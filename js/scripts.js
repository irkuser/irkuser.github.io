function showThumb(e){if(e[0]){var t=".vimeo-"+e[0].id;$(t).each(function(){$(this).attr("src",e[0].thumbnail_medium)})}}function vimeoLoadingThumb(e){var t=document.location.protocol+"//vimeo.com/api/v2/video/"+e+".json?callback=showThumb",n=".vimeo-"+e;$(n).each(function(){$(this).before('<script type="text/javascript" src="'+t+'"><\/script>')})}!function(e){function t(e){var t=parseInt(e.val());return isNaN(t)?0:t}e.fn.incrementalInput=function(n){var i={inputClass:".js-incremental-input",plusClass:".js-incremental-plus",minusClass:".js-incremental-minus",step:1,max:!1,min:!1,canChange:function(){return!0},onIncrease:function(){},onDecrease:function(){},onChange:function(){}},o=e.extend(!0,{},i,n);return this.each(function(){var n=e(this),i=n.find(o.inputClass);n.find(o.plusClass).on("click",function(e){if(!o.canChange(i))return!1;var n=t(i);return i.prevValue=n,n+=o.step,!1!==o.max&&n>o.max&&(n=o.max),i.val(n),o.onIncrease(i,n,i.prevValue),o.onChange(i,n,i.prevValue),!1}),n.find(o.minusClass).on("click",function(){if(!o.canChange(i))return!1;var e=t(i);return i.prevValue=e,e-=o.step,!1!==o.min&&e<o.min&&(e=o.min),i.val(e),o.onDecrease(i,e,i.prevValue),o.onChange(i,e,i.prevValue),!1})})}}(window.jQuery),function(){function addEvent(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{if(!e.attachEvent)throw new Error("not supported or DOM not loaded");e.attachEvent("on"+t,function(){n.call(e)})}}function addResizeEvent(e){var t;addEvent(window,"resize",function(){t&&clearTimeout(t),t=setTimeout(e,100)})}function getBox(e){var t,n,i,o,a=getOffset(e);return t=a.left,i=a.top,n=t+e.offsetWidth,o=i+e.offsetHeight,{left:t,right:n,top:i,bottom:o}}function addStyles(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function copyLayout(e,t){var n=getBox(e);addStyles(t,{position:"absolute",left:n.left+"px",top:n.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})}function fileFromPath(e){return e.replace(/.*(\/|\\)/,"")}function getExt(e){return-1!==e.indexOf(".")?e.replace(/.*[.]/,""):""}function hasClass(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){var n=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(n,"")}function removeNode(e){e.parentNode.removeChild(e)}if(document.documentElement.getBoundingClientRect)var getOffset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,i=n.body,o=n.documentElement,a=o.clientTop||i.clientTop||0,r=o.clientLeft||i.clientLeft||0,s=1;if(i.getBoundingClientRect){var c=i.getBoundingClientRect();s=(c.right-c.left)/i.clientWidth}return s>1&&(a=0,r=0),{top:t.top/s+(window.pageYOffset||o&&o.scrollTop/s||i.scrollTop/s)-a,left:t.left/s+(window.pageXOffset||o&&o.scrollLeft/s||i.scrollLeft/s)-r}};else var getOffset=function(e){var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:n,top:t}};var toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n)}}(),getUID=function(){var e=0;return function(){return"ValumsAjaxUpload"+e++}}();window.AjaxUpload=function(e,t){this._settings={action:"upload.php",name:"userfile",multiple:!1,data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}};for(var n in t)t.hasOwnProperty(n)&&(this._settings[n]=t[n]);if(e.jquery?e=e[0]:"string"==typeof e&&(/^#.*/.test(e)&&(e=e.slice(1)),e=document.getElementById(e)),!e||1!==e.nodeType)throw new Error("Please make sure that you're passing a valid element");"A"==e.nodeName.toUpperCase()&&addEvent(e,"click",function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)}),this._button=e,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks()},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){addClass(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();"INPUT"!=e&&"BUTTON"!=e||this._button.setAttribute("disabled","disabled"),this._input&&this._input.parentNode&&(this._input.parentNode.style.visibility="hidden")},enable:function(){removeClass(this._button,this._settings.disabledClass),this._button.removeAttribute("disabled"),this._disabled=!1},_createInput:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("name",this._settings.name),this._settings.multiple&&t.setAttribute("multiple","multiple"),addStyles(t,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer"});var n=document.createElement("div");if(addStyles(n,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583}),"0"!==n.style.opacity){if(void 0===n.filters)throw new Error("Opacity not supported by the browser");n.style.filter="alpha(opacity=0)"}addEvent(t,"change",function(){if(t&&""!==t.value){var n=fileFromPath(t.value);if(!1===e._settings.onChange.call(e,n,getExt(n)))return void e._clearInput();e._settings.autoSubmit&&e.submit()}}),addEvent(t,"mouseover",function(){addClass(e._button,e._settings.hoverClass)}),addEvent(t,"mouseout",function(){removeClass(e._button,e._settings.hoverClass),removeClass(e._button,e._settings.focusClass),t.parentNode&&(t.parentNode.style.visibility="hidden")}),addEvent(t,"focus",function(){addClass(e._button,e._settings.focusClass)}),addEvent(t,"blur",function(){removeClass(e._button,e._settings.focusClass)}),n.appendChild(t),document.body.appendChild(n),this._input=t},_clearInput:function(){this._input&&(removeNode(this._input.parentNode),this._input=null,this._createInput(),removeClass(this._button,this._settings.hoverClass),removeClass(this._button,this._settings.focusClass))},_rerouteClicks:function(){var e=this;addEvent(e._button,"mouseover",function(){if(!e._disabled){e._input||e._createInput();var t=e._input.parentNode;copyLayout(e._button,t),t.style.visibility="visible"}})},_createIframe:function(){var e=getUID(),t=toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e){var t=this._settings,n=toElement('<form method="post" enctype="multipart/form-data"></form>');n.setAttribute("action",t.action),n.setAttribute("target",e.name),n.style.display="none",document.body.appendChild(n);for(var i in t.data)if(t.data.hasOwnProperty(i)){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",i),o.setAttribute("value",t.data[i]),n.appendChild(o)}return n},_getResponse:function(iframe,file){var toDeleteFlag=!1,self=this,settings=this._settings;addEvent(iframe,"load",function(){if("javascript:'%3Chtml%3E%3C/html%3E';"==iframe.src||"javascript:'<html></html>';"==iframe.src)return void(toDeleteFlag&&setTimeout(function(){removeNode(iframe)},0));var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(!(doc.readyState&&"complete"!=doc.readyState||doc.body&&"false"==doc.body.innerHTML)){var response;doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,settings.responseType&&"json"==settings.responseType.toLowerCase()&&(doc.body.firstChild&&"PRE"==doc.body.firstChild.nodeName.toUpperCase()&&(doc.normalize(),response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,settings.onComplete.call(self,file,response),toDeleteFlag=!0,iframe.src="javascript:'<html></html>';"}})},submit:function(){var e=this,t=this._settings;if(this._input&&""!==this._input.value){var n=fileFromPath(this._input.value);if(!1===t.onSubmit.call(this,n,getExt(n)))return void this._clearInput();var i=this._createIframe(),o=this._createForm(i);removeNode(this._input.parentNode),removeClass(e._button,e._settings.hoverClass),removeClass(e._button,e._settings.focusClass),o.appendChild(this._input),o.submit(),removeNode(o),o=null,removeNode(this._input),this._input=null,this._getResponse(i,n),this._createInput()}}}}(),function(e){e.fn.endlessScroll=function(t){var n={bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"<br />Loading...<br />",data:!1,url:!1,params:{},toElement:!1,success:function(){},error:function(){},insertAfter:"div:last",resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1},disable:!1},t=e.extend({},n,t),i=!1,o=!0,a=!1,r=0;!0===t.ceaseFire.apply(this)&&(o=!1);var s=this;if(!0===o){if(!1===t.toElement)var c=s;else var c=window;e(c).scroll(function(){if(!i){if(!0===t.ceaseFire.apply(this)||t.disable)return void s.unbind("scroll");if(s==document||s==window)var n=e(document).height()-e(window).height()<=e(window).scrollTop()+t.bottomPixels;else if(!1===t.toElement){var o=e(".endless_scroll_inner_wrap",this);0==o.length&&(o=e(this).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap"));var n=o.length>0&&o.height()-e(this).height()<=e(this).scrollTop()+t.bottomPixels}else var c=e(s).offset(),d=c.top,n=d<=e(window).height()+e(window).scrollTop()+t.bottomPixels;n&&(0==t.fireOnce||1==t.fireOnce&&1!=a)&&(!0===t.resetCounter.apply(this)&&(r=0),a=!0,r++,e(t.insertAfter).after('<div id="endless_scroll_loader">'+t.loader+"</div>"),!1===t.url&&!1===t.data||(!1!==t.url?(i=!0,e.ajax({url:t.url,type:"POST",data:t.params,success:function(n){i=!1,e("div#endless_scroll_loader").remove();var o="function"==typeof t.success&&t.success.apply(this,[n,t,r]);!1!==o?e(t.insertAfter).after(o):s.unbind("scroll"),t.disable&&s.unbind("scroll"),t.callback.apply(this,[r])},error:function(){e("div#endless_scroll_loader").remove(),"function"==typeof t.error&&t.error.apply(this,[r]),s.unbind("scroll"),t.callback.apply(this,[r])},dataType:"json"})):(data="function"==typeof t.data?t.data.apply(this,[t,r]):t.data,e(t.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>"),e("div#endless_scroll_data").hide().fadeIn(),e("div#endless_scroll_data").removeAttr("id"),e("div#endless_scroll_loader").remove(),t.callback.apply(this,[r])),!1!==t.fireDelay||0!==t.fireDelay?(e("body").after('<div id="endless_scroll_marker"></div>'),e("div#endless_scroll_marker").fadeTo(t.fireDelay,1,function(){e(this).remove(),a=!1})):a=!1),t.disable&&s.unbind("scroll"))}})}}}(jQuery),view={_lang:void 0,getLang:function(){return void 0===this._lang&&$(function(){this._lang=$("#top-body").data("lang")?$("#top-body").data("lang"):"ru"}),this._lang},translate:function(e){return"ru"!=this.getLang()&&void 0!=e&&""!=e&&void 0!=window.Translate?Translate[e]||e:e},query:function(e,t,n,i,o,a,r){var s=o||"json",c=i||{},d=r||{};$.ajax({url:e,type:"POST",dataType:s,data:c,timeout:3e4,success:function(e,i){try{if(e&&1==e.success)t(e,i);else if(void 0!=a&&a(e,i),void 0==a||void 0!=d.showError&&1==d.showError){var o;if(o=d.msg?d.msg:"json"==s?void 0!=e.msg?e.msg:"":$(e).closest(".block-error").length>0?$(e).html():"",!e.type||"warning"!=e.type)throw new Error(o);ntNotification.showWarning(e.message),Popup.progressBar("hide")}}catch(e){Notifier.showError(e.message,n)}},error:function(e,t){var i=Notifier.getErrorTpl(t);Notifier.showError(i,n),Popup.progressBar("hide")}})},scrollTo:function(e,t){if(0==$("#"+e).length)return!1;t|=500;var n=$("#"+e).offset();return $("body, html").animate({scrollTop:n.top},t),!0},toogleBlockByClick:function(e,t){var n=$(e);$(document).on("click",n.selector,function(){return $(t).toggle(),!1})},array_unique:function(e){for(var t=[],n=e.length,i=0;i<n;i++){for(var o=i+1;o<n;o++)e[i]===e[o]&&(o=++i);t.push(e[i])}return t},isInt:function(e){return!isNaN(e)&&parseInt(e)==e&&!/^0[x|X]\.*/i.test(e)&&e>=0},getTld:function(){return $("body").data("tld")},setPhoneValidator:function(){var e=view.getTld(),t=/^$/i;switch(e){case"ru":t=/^\+7\(\d{3}\)\d{7}$/i;break;case"ua":t=/^\+380\(\d{3}\)\d{7}$/i}return jQuery.validator.addMethod("phoneNumber",function(e,n){return this.optional(n)||t.test(e)},this.translate("Введите корректный телефон")),!0}};var Notifier={ask:function(e){return confirm(e)},addPreloader:function(e){0==$(e).find(".preloader").length&&(e.append('<div class="bg">'),e.append('<div class="preloader">'))},removePreloader:function(e){0!=$(e).find(".preloader").length&&(e.find(".bg").remove(),e.find(".preloader").remove())},hasPreloader:function(e){return 0!=$(e).find(".preloader").length},getErrorTpl:function(e){return view.translate("Ошибка")+": "+e+"."+view.translate("Попробуйте запрос позже")+"."},_showPopup:function(e){var t=this;t.popupTemlate?t._initPopup(e):$.get("/html/ru_RU/utils/notifyer.html",function(n){t.popupTemlate=n,$(document).on("click",".window.notifyer .-btn",function(){Popup.closeDialog()}),$(document).on("click",".window.notifyer a",function(){return Popup.closeDialog(),t.to_href=$(this).attr("href"),!1}),t._initPopup(e)})},_initPopup:function(e){var t=this,n=$(this.popupTemlate);n.find(".header").html(e.head),n.find(".message").html(e.msg),n.addClass(e.type),n.find(".-btn").addClass("-btn-"+e.type);var i=Popup.getParams();i.padding=0,i.afterClose=function(){t.to_href&&(window.location.href="http://"+window.location.host+t.to_href,$(document).trigger("hashchange")),t.to_href=!1},Popup.showDialog(n,i)},showError:function(e,t,n,i){var o=this;n=void 0==n||n,e=e||"Произошла ошибка. Попробуйте еще.",e=view.translate(e),i=i||"Произошла ошибка",i=view.translate(i),void 0!=t&&$(t).length>0?o.notify({type:"error",msg:e,el:t,hide:n}):o._showPopup({head:i,msg:e,type:"error"})},showSuccess:function(e,t,n,i){var o=this;n=void 0==n||n,e=e||view.translate("Операция выполнена успешно"),e=view.translate(e),i=i||"Операция выполнена успешно",i=view.translate(i),void 0!=t&&$(t).length>0?this.notify({type:"success",msg:e,el:t,hide:n}):o._showPopup({head:i,msg:e,type:"success"})},showWarning:function(e,t,n,i){var o=this;e=e||view.translate("Предупреждение"),e=view.translate(e),i=i||"Уведомление",i=view.translate(i),o._showPopup({head:i,msg:e,type:"warning"})},showMessage:function(e,t,n,i){var o=void 0==n||n;void 0!=t&&$(t).length>0?(i=i||void 0,this.notify({type:"ok",msg:e,el:t,hide:o,speedOut:i})):void 0!=e&&alert(e)},notify:function(e){var t=this.getTemplate();1==e.hide&&$("."+$(t).attr("class")).fadeOut(),$(t).addClass(e.type).html('<table><td><div id="'+e.type+'-icon"></div></td><td>'+e.msg+"</td></table>"),$(e.el).prepend($(t)),$(t).fadeIn();var n=$(e.el).position().top;if($(e.el).scrollTop()>0&&$("body,html").animate({scrollTop:n},200),1==e.hide){var i=e.speedOut||5e3;setTimeout(function(){$(t).fadeOut(),$(t).remove()},i)}},getTemplate:function(){return $('<div class="notifier"/>')},showIndicator:function(e,t){var n=this.getIndicatorBtn(e,t);this.showIndicatorBtn(n)},hideIndicator:function(e,t){var n=this.getIndicatorBtn(e,t);this.hideIndicatorBtn(n)},lockBtn:function(e){e.hasClass("disable")||e.addClass("disable")},unlockBtn:function(e){e.removeClass("disable")},showIndicatorBtn:function(e){e.attr("style","width:"+e.innerWidth()+"px"),e.addClass("locked"),e.prepend('<div class="-loader"></div>'),e.on("click.off",function(){return!1})},hideIndicatorBtn:function(e){e.removeClass("locked"),e.children(".-loader").remove(),e.attr("style",""),e.off("click.off")},getIndicatorBtn:function(e,t){return 0==(t||!1)?0==$("#"+e+" button.blue, #"+e+" .-btn-complete").length?$("#"+e+" .buttons.green-btn"):$("#"+e+" button.blue,#"+e+" .-btn-complete"):$("#"+e+" footer button.blue, #"+e+" footer .-btn-complete")},getLoader:function(){return'<div id="ajax-loader"></div>'},showNotice:function(e,t,n){var i=$(e);if(i.length>0){var o=$('<div id="user-notice" style="display:none;">'+t+"</div>"),a=i.find("#user-notice");n&&a.length?a.eq(0).replaceWith(o):i.append(o),o.fadeIn(200),setTimeout(function(){o.fadeOut(200,function(){o.remove()})},2500)}},getSmallLoader:function(){return"<img id='lazy-loader' src='//s.siteapi.org/frontend/static/grid_9/img/lazyload-da16aabf34.gif'>"},removeSmallLoader:function(){$("#lazy-loader").remove()}},Notifier={ask:function(e){return confirm(e)},addPreloader:function(e){0==$(e).find(".preloader").length&&(e.append('<div class="bg">'),e.append('<div class="preloader">'))},removePreloader:function(e){0!=$(e).find(".preloader").length&&(e.find(".bg").remove(),e.find(".preloader").remove())},hasPreloader:function(e){return 0!=$(e).find(".preloader").length},getErrorTpl:function(e){return view.translate("Ошибка")+": "+e+"."+view.translate("Попробуйте запрос позже")+"."},_showPopup:function(e){var t=this;t.popupTemlate?t._initPopup(e):$.get("/html/ru_RU/utils/notifyer.html",function(n){t.popupTemlate=n,$(document).on("click",".window.notifyer .-btn",function(){Popup.closeDialog()}),$(document).on("click",".window.notifyer a",function(){return Popup.closeDialog(),t.to_href=$(this).attr("href"),!1}),t._initPopup(e)})},_initPopup:function(e){var t=this,n=$(this.popupTemlate);n.find(".header").html(e.head),n.find(".message").html(e.msg),n.addClass(e.type),n.find(".-btn").addClass("-btn-"+e.type);var i=Popup.getParams();i.padding=0,i.afterClose=function(){t.to_href&&(window.location.href=document.location.protocol+"://"+window.location.host+t.to_href,$(document).trigger("hashchange")),t.to_href=!1},Popup.showDialog(n,i)},showError:function(e,t,n,i){var o=this;n=void 0==n||n,e=e||"Произошла ошибка. Попробуйте еще.",e=view.translate(e),i=i||"Произошла ошибка",i=view.translate(i),void 0!=t&&$(t).length>0?o.notify({type:"error",msg:e,el:t,hide:n}):ntNotification.showError('<div class="-f-bold"><b>'+i+"</b></div><div>"+e+"</div>")},showSuccess:function(e,t,n,i){n=void 0==n||n,e=e||view.translate("Операция выполнена успешно"),e=view.translate(e),i=i||"Операция выполнена успешно",i=view.translate(i),void 0!=t&&$(t).length>0?this.notify({type:"success",msg:e,el:t,hide:n}):ntNotification.showSuccess('<div class="-f-bold"><b>'+i+"</b></div><div>"+e+"</div>")},showWarning:function(e,t,n,i){e=e||view.translate("Предупреждение"),e=view.translate(e),i=i||"Уведомление",i=view.translate(i),ntNotification.showWarning('<div class="-f-bold"><b>'+i+"</b></div><div>"+e+"</div>")},showMessage:function(e,t,n,i){var o=void 0==n||n;void 0!=t&&$(t).length>0?(i=i||void 0,this.notify({type:"ok",msg:e,el:t,hide:o,speedOut:i})):void 0!=e&&alert(e)},notify:function(e){var t=this.getTemplate();1==e.hide&&$("."+$(t).attr("class")).fadeOut(),$(t).addClass(e.type).html('<table><td><div id="'+e.type+'-icon"></div></td><td>'+e.msg+"</td></table>"),$(e.el).prepend($(t)),$(t).fadeIn();var n=$(e.el).position().top;if($(e.el).scrollTop()>0&&$("body,html").animate({scrollTop:n},200),1==e.hide){var i=e.speedOut||5e3;setTimeout(function(){$(t).fadeOut(),$(t).remove()},i)}},getTemplate:function(){return $('<div class="notifier"/>')},showIndicator:function(e,t){var n=this.getIndicatorBtn(e,t);this.showIndicatorBtn(n)},hideIndicator:function(e,t){var n=this.getIndicatorBtn(e,t);this.hideIndicatorBtn(n)},lockBtn:function(e){e.hasClass("disable")||e.addClass("disable")},unlockBtn:function(e){e.removeClass("disable")},showIndicatorBtn:function(e){e.attr("style","width:"+e.innerWidth()+"px"),e.addClass("locked"),e.prepend('<div class="-loader"></div>'),e.on("click.off",function(){return!1})},hideIndicatorBtn:function(e){e.removeClass("locked"),e.children(".-loader").remove(),e.attr("style",""),e.off("click.off")},getIndicatorBtn:function(e,t){return 0==(t||!1)?0==$("#"+e+" button.blue, #"+e+" .-btn-complete").length?$("#"+e+" .buttons.green-btn"):$("#"+e+" button.blue,#"+e+" .-btn-complete"):$("#"+e+" footer button.blue, #"+e+" footer .-btn-complete")},getLoader:function(){return'<div id="ajax-loader"></div>'},showNotice:function(e,t,n){var i=$(e);if(i.length>0){var o=$('<div id="user-notice" style="display:none;">'+t+"</div>"),a=i.find("#user-notice");n&&a.length?a.eq(0).replaceWith(o):i.append(o),o.fadeIn(200),setTimeout(function(){o.fadeOut(200,function(){o.remove()})},2500)}},getSmallLoader:function(){return"<img id='lazy-loader' src='//s.siteapi.org/frontend/static/grid_9/img/lazyload-da16aabf34.gif'>"},removeSmallLoader:function(){$("#lazy-loader").remove()}},Popup={loadEvents:function(){var e=this;$(document).on("click",".window .close, .window .close-link a, .window .cancel,.window .-btn-cancel",function(){return 0==$(this).parents("#comment_form").length&&(e.closeDialog(),$.jPicker&&$.jPicker.List.forEach(function(e){e.hide()})),!1})},getParams:function(){return{closeBtn:!1,enableEscapeButton:!0,margin:0,padding:2,scrolling:!1,minHeight:1,minWidth:1}},showDialog:function(e,t){var n=this,i=t||n.getParams();i=$.extend({},i,{content:e}),Visitor.bindImageViewer($,i)},showWindow:function(e,t,n,i){var o='<section class="window '+n+'" id="'+n+'-edit-window" style="width:'+i+'px"><header><div class="edit-block"><ul><li><span class="close"></span></li></ul></div><h1>'+view.translate(t)+'</h1></header><div id="windowContent">'+e+"</div></section>";this.showDialog(o)},closeDialog:function(){$.fancybox.close()},progressBar:function(e){"show"==e?$.fancybox.showLoading():$.fancybox.hideLoading()},center:function(){}};Visitor={init:function(){this.setTooltip(),$("#footer").append($('<div id="temp-block"/>')),this.loadEvents(),this._initValidate(),this.decorateContent(),Popup.loadEvents();var e=$("#top-body").data("lang");this.lang=void 0==e?"ru":e,this.scrollWindow=0,this.isFancyLoad=!1,this.setSrcToFrameMap(),setTimeout(function(){Visitor.checkViewer()},1e3),this.addValidateMethods(),this.subscriberAddFormValidate(),this.initCatalogPriceFilter(),OneClickBuy.init(),this.formsHashHandler(),$(window).on("hashchange",$.proxy(function(){this.formsHashHandler()},this)),this.initDropDown(),$(document).on("widget_set_content",function(e,t){11==t&&(this.initDropDown(),Visitor.initCatalogPriceFilter())}.bind(this)),this.initTab()},initCatalogPriceFilter:function(){var e=$("#catalog_price_filter");if(0!=e.length){var t,n,i=$("#catalog_price_filter_min_cost"),o=$("#catalog_price_filter_max_cost");n=i.data("min-cost")?parseInt(i.data("min-cost")):0,t=o.data("max-cost")?parseInt(o.data("max-cost")):1e4,e.html(""),i.val()||i.val(n),o.val()||o.val(t);try{noUiSlider.create(e[0],{start:[parseInt(i.val()),parseInt(o.val())],range:{min:n,max:t},format:{to:function(e){return parseInt(e)},from:function(e){return e}},connect:!0}),e[0].noUiSlider.on("update",function(e,t){1==t?o.val(e[t]):i.val(e[t])}),i.on("change",function(){e[0].noUiSlider.set([i.val(),o.val()])}),o.on("change",function(){e[0].noUiSlider.set([i.val(),o.val()])})}catch(e){}}},setTooltip:function(){$(document).on("mouseover",".tooltip:not(.tooltipstered)",function(){var e=$(this);e.tooltipster({touchDevices:!1}),e.tooltipster("show")})},addValidateMethods:function(){$.validator.setDefaults({onclick:function(e,t){$(e).valid()&&$(e).removeClass("error")},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||$(e).valid()&&$(e).removeClass("error")}}),$.validator.addMethod("identity",function(e,t){var n=e.trim();return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},view.translate("Введите корректный email")),$.validator.addMethod("phone",function(e,t){var n=e.trim();return this.optional(t)||/^[+]?(\d)+$/i.test(n)})},loadEvents:function(){var e=this;$(document).on("click",".ddelivery-map",function(){var e=$(this).data("city-type");Popup.showDialog('<iframe src="http://service.ddelivery.ru/demodev/ddelivery/ajax.php?iframe=1&amp;config_type=3&amp;width=900&amp;height=580&config_city='+e+'" height="600" width="920"></iframe>',{closeBtn:!1,enableEscapeButton:!0,margin:0,padding:[20,0,0,20],scrolling:!1,minHeight:1,minWidth:1})}),e.scrllWidth=e.scrollbarWidth(),$(document).on("click",".mailerForm .send",function(){$(".mailerForm form").submit()}),$(document).on("click","#topcontacts .feedback-btn",function(e){Feedback.init($(this).data("type"))}),$(document).on("click","#up-link",function(t){return e.scrollTop(t)}),$(document).on("mouseover","#up-link",function(){$(this).stop(!0,!0).animate({opacity:1},200)}),$(document).on("mouseout","#up-link",function(){$(this).stop(!0,!0).animate({opacity:.4},200)}),$(window).scroll(function(){e.showUpLink(this)}),$(document).on("click",".buttons.order",function(){e.makeOrder(this)}),document.onkeydown=function(t){e.keyEvents(t)},$(document).on("mouseover.fancy",".fancy-img",function(){var e=$(".fancy-img");return Nethouse.Modal.imageGallery(e.filter(function(){return $(this).find("img").is(":visible")})),$(document).off("mouseover.fancy",".fancy-img"),!1}),$(document).on("click",".fancy-img-post",function(){var e=$(this);e.parent().is("a")||0!=e.parents(".mrb-grid").length||Nethouse.Modal.item(e.attr("data-eval"),{type:"image"})}),$(document).on("click",".video-intext",function(){e.getVideo(this)}),$(document).on("click",".buttons.disable",function(){return!1}),$(document).on("click",".video-item a, .video-link",function(){e.showVideo($(this))}),$(document).on("click",".fancybox-wrap.can-close",function(e){e.target==this&&$.fancybox.close()}),$(document).on("click","#contactsmain-left .ymap, #contactsmain .ymap, #contactsmain-left .gmap, #contactsmain .gmap, #contactsmain-left .2gismap, #contactsmain .2gismap",function(){return e.findAddress(this),!1}),$(document).on("click","#sharebyemail-edit-window footer .save",function(){$("form#sharebyemail").submit()}),$(document).on("click",".error-window .ok,.success-window .ok",function(){Popup.closeDialog()}),$(document).on("click",".top-news .popup",function(){return e.getUrgentMessage()}),$(document).on("click","#blog-posts-lnk",function(){return e.setPostCounterNull()}),$(document).on("change","select#translate",function(){return e.toggleLanguage(this)}),$(document).on("click",".window .show-form a",function(){return $(this).parent().parent().find("form").slideToggle(),!1}),$(document).on("click",".window #comment_wrap .show-all",function(){$(this).remove(),$(".window .comment_wrap").show()}),$(document).on("click","#fancybox-right.photos",function(){$(".album-items-wrap li.curr-"+$(this).data("next")).trigger("click")}),$(document).on("click","#fancybox-left.photos",function(){$(".album-items-wrap li.curr-"+$(this).data("prev")).trigger("click")}),this.viewPhoto(),this.viewCommentImageAttachment(),$(document).on("click",".share-links a:not(.mail-average-icon)",function(){e.ShareLinks(this)}),$(document).on("click",".share-links a.mail-average-icon",function(){e.getShareByMailForm($(this))});var t=$("#catalogsortable select[name=sort], #catalogsortable select[name=categoryId]").each(function(){var e=$(this);e.attr("data-current-val",e.val())});$(document).on("widget_set_content",function(e,t){t==Nethouse.WIDGETS.TYPE_PRODUCTS&&$("#catalogsortable select[name=sort], #catalogsortable select[name=categoryId]").each(function(){var e=$(this);e.attr("data-current-val",e.val())})});var n=$(".catalog-filter-group select#productGroupSelector, .selectorGroup select#productGroupSelector");$(document).on("change",n.selector,function(e){var t=$(e.target),n=t.parents("form"),i=n.find("input[name=productGroup]"),o=n.find("input[name=productCustomGroup]"),a=t.find("option:selected"),r=a.attr("data-group-id"),s=a.attr("data-group-entity-id");r==i.val()&&s==o.val()||(i.val(r),o.val(s),n.submit())}),$(document).on("change",t.selector,function(e){var t=$(e.target);t.data("current-val")!=t.val()&&t.parents("form").submit()}),$(document).on("change","#catalogsortable input[type=checkbox]",function(e){$(this).parents("form").submit()}),view.setPhoneValidator()},showVideo:function(e){var t=this;$.post(e.attr("data-video-href"),function(n){if(!n.success)return void ntNotification.showError("Произошла ошибка. Видео не найдено.");t.changeLocationHash(e.attr("href")),Nethouse.Modal.openHtml(n.block,{open:function(){var e=$(".js-video-window"),i=e.find(".item-content").attr("id").replace("item","");n.nocomment||$.post("/get/commentswindow",{object:i,type:Comments.types.video},function(n){if(n.success){var i,o=$(n.block),a=e.find(".item-info");o.hide(),a.append(o),a.find(".comments-block").slideDown(),t.bindInputCharCounter(),i=e.find("#comment_form"),Comments.initFormImages(i),Comments.initImageUpload(i),Comments.validateWindowForm(i),"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents()}else ntNotification.showError("Произошла ошибка. Видео не найдено.")},"json")}})},"json")},getShareByMailForm:function(e){var t=this,n={id:e.attr("data-id"),type:e.attr("data-type"),token:e.attr("data-token")};$.post("/getmailform",n,function(e){e.success&&Nethouse.Modal.openHtml(e.form,{open:function(){t.shareByMailFormValidate()}},!1)})},shareByMailFormValidate:function(){$("form#sharebyemail").validate({submitHandler:function(e){return Notifier.showIndicator("sharebyemail"),$(e).ajaxSubmit({success:function(t){if(Notifier.hideIndicator("sharebyemail"),t.success)return void Nethouse.Modal.openHtml(t.success_window,null,!1);void 0!=t.error?Nethouse.Modal.openHtml(t.error,null,!1):t.error!=e&&Nethouse.Modal.openHtml(t.form,null,!1)}}),!1},focusInvalid:!1,focusCleanup:!0,rules:{email:{required:!0,email:!0}},messages:{email:{required:view.translate("Пожалуйста, укажите email адрес"),email:view.translate("Введите корректный email")}},errorPlacement:function(e,t){var n=t.parent().parent().find(".state_field");e.appendTo(n)},highlight:function(e){$(e).attr("id");$(e).parent().parent().find(".state_field").addClass("red"),$(e).addClass("error")},unhighlight:function(e){$(e).parent().parent().find(".state_field").removeClass("red"),$(e).removeClass("error")}})},ShareLinks:function(e){var t=$(e).attr("href"),n=[560,472],i=screen.width?(screen.width-n[0])/2:0,o=screen.height?(screen.height-n[1])/2:0,a="height="+n[1]+",width="+n[0]+",top="+o+",left="+i+",scrollbars=yes,resizable";return window.open(t,"SocialNet",a),!1},getVideo:function(e){var t=this,n=$(e).prop("class").replace("video-intext ",""),i=$(e).prop("alt").replace(/<(\/)?(\s)*script(\s)*>/,""),o=$(e).prop("id").replace(/<(\/)?(\s)*script(\s)*>/,""),a=$(e).prop("title").replace(/<(\/)?(\s)*script(\s)*>/,""),r=t.VideoConfig[n].content.replace(/\#/g,o);r='<div id="video-content" class="video" style="width: 740px;" data-code="'+o+'"><div class="item-content"><header><h1 class="video__header">'+a+'</h1></header><div class="video__content">'+r+'<div class="video__stub"><div class="video-desc video__desc">'+i+"</div></div></div></div></div>",Nethouse.Modal.openHtml(r,{beforeOpen:function(){$(".fancybox-skin").addClass("imageGallery")},open:function(){t.changeLocationHash("#video-c_"+o)}})},VideoConfig:{youtube:{image:"//img.youtube.com/vi/?/default.jpg",regexp:/(?:(?:youtube\.com\/watch\?(?:[\w\d]+\=[\w\d]+\&)*v\=)|(?:youtu\.be\/)|(?:youtube\.com\/user\/[\w\d]+(?:\?(?:[\w\d]+\=[\w\d]+[\&]?)+)?#p\/(?:[\w]\/){0,4}[\d]+\/))([_a-zA-Z0-9-]+)/i,content:'<iframe width="700" height="390" src="//www.youtube.com/embed/#?rel=0" frameborder="0" allowfullscreen></iframe>'},youtu:{image:"//img.youtube.com/vi/?/default.jpg",regexp:/(?:(?:youtube\.com\/watch\?(?:[\w\d]+\=[\w\d]+\&)*v\=)|(?:youtu\.be\/)|(?:youtube\.com\/user\/[\w\d]+(?:\?(?:[\w\d]+\=[\w\d]+[\&]?)+)?#p\/(?:[\w]\/){0,4}[\d]+\/))([_a-zA-Z0-9-]+)/i,
content:'<iframe width="700" height="390" src="//www.youtube.com/embed/#?rel=0" frameborder="0" allowfullscreen></iframe>'},rutube:{image:"//tub.rutube.ru/thumbs-wide/?-2.jpg",regexp:/(?:(?:rutube\.ru\/tracks\/[0-9]+\.html\?v\=)|(?:video\.rutube\.ru\/))([_a-zA-Z0-9]+)/i,content:'<iframe width="700" height="390" src="//rutube.ru/video/embed/#" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>'},vimeo:{image:"",regexp:/vimeo\.com\/([0-9]+)/i,content:'<iframe src="//player.vimeo.com/video/#?title=0&amp;byline=0&amp;portrait=0" width="700" height="390" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}},showUpLink:function(e){var t=document.body.clientWidth,n=$("#up-link");t>1100&&$(e).scrollTop()>400?n.fadeIn():n.fadeOut(200)},scrollTop:function(e){return $("body,html").animate({scrollTop:0},200),e.preventDefault(),!1},keyEvents:function(e){if(e=e||window.event,27==e.keyCode){$(".on-edit:not(.static)").not("#comment-edit").length>0&&Site.toggleBlock(),$.jPicker&&$.jPicker.List.forEach(function(e){e.hide()})}},decorateContent:function(){$(document).on("widget_init",function(){$("#content").find(".user-inner li:not(:has(i.circles))").prepend('<i class="circles"></i>')}),$("#content").find(".user-inner li:not(:has(i.circles))").prepend('<i class="circles"></i>')},makeOrder:function(e){$forOrder=$(e).parents(".content-block").attr("id").replace("-show","");var t=$(e).parents(".item-content"),n="";return t.length>0&&(n=$(t).attr("id").replace("item","")||""),Feedback.init($forOrder,{sid:n,order:!0})},_initValidate:function(){$.validator.setDefaults({showErrors:function(e,t){if(t.length<1)return void $("ul.errors").remove();$.each(t,function(e,t){var n=$(t.element);n.removeClass("valid").addClass("error"),n.is('input[type="checkbox"]')||(n.removeClass("valid").addClass("error"),n.next("ul.errors").remove(),n.after($("<ul/>").addClass("errors").append($("<li/>").text(t.message))))})}})},preloadBannerImages:function(e){if(void 0!==document.body)try{$("#banner-carousel").html(Notifier.getLoader());var t=document.createElement("div"),n=t.style;n.position="absolute",n.top=n.left=0,n.display="none",document.body.appendChild(t);for(var i in e){var o=document.createElement("img");o.src=e[i],t.appendChild(o)}BannerShow()}catch(e){}},ymaploaded:function(e){var t=$(e).attr("src");void 0!=t&&"about:blank"!=t&&$("#ymap-container #ajax-loader").remove()},findAddress:function(e){var t=$(e),n=t.prevAll(".address-value"),i=(n.html(),n.data("geolat"),n.data("geolng"),n.data("geozoom"));i=i||0;t.hasClass("gmap")||t.hasClass("2gismap");var o=(t.data("host"),t.data("lang"),t.attr("href"));Popup.showDialog('<div id="map-container"><div id="ajax-loader"></div><iframe id="map-frame" width="600" height="450" marginheight="0" marginwidth="0" frameborder="0" src=""></iframe></div>',{closeBtn:!0,padding:10});var a=$("#map-frame");a.attr("src",o),a.load(function(){var e=$(this).attr("src");void 0!=e&&"about:blank"!=e&&$("#map-container #ajax-loader").remove()})},setSrcToFrameMap:function(){var e=$("#main-contacts .address ul iframe[id^=ymap-], #main-contacts .address ul iframe[id^=gmap-], #main-contacts .address ul iframe[id^='2gismap-']");return e.length&&e.each(function(){var e=$(this);if(void 0!=e.attr("src"))return!0;var t=e.attr("id"),n=t.replace(/-\d+/,"");"ymap"!=n&&"gmap"!=n&&"2gismap"!=n&&(n="ymap");var i=$(this).data("host"),o=$(this).data("lang"),a=$(this).prevAll("span.address-value").data("geolat"),r=$(this).prevAll("span.address-value").data("geolng"),s=$(this).prevAll("span.address-value").data("geozoom");s=s||0;var c=$(this).prevAll("span.address-value").html(),d=document.location.protocol+"//"+i+"/"+n+"/addr/"+c+"/"+s+"/w/550/h/300/embedded/"+o;void 0!=a&&void 0!=r&&(d=document.location.protocol+"//"+i+"/"+n+"/coords/"+a+";"+r+"/"+s+"/w/550/h/300/embedded/"+o),$(this).attr("src",d)}),!1},getUrgentMessage:function(){var e={pid:$(".top-news").data("mid")},t=function(e){Popup.showDialog(e.content)};return view.query("/geturgentcontent",t,null,e),!1},setPostCounterNull:function(){var e=$("#blog-counter");if(e.length>0){var t={type:"all"},n=function(){e.hide()};view.query("/markpostread",n,null,t)}},toggleLanguage:function(e){var t=$(e).val()||"ru";return view.query("/togglelang",function(e){void 0!=e.success&&1==e.success&&window.location.reload()},"",{lang:t}),!1},bindImageViewer:function(e,t){var n=this;if(e&&e.length){var i=function(){};t=t||{},t.fitToView=!1,t.fixed=!1,t.scrolling=t.scrolling||"no",t.nextEffect="none",t.prevEffect="none",t.openEffect="fade",t.openSpeed="slow",t.iframe={preload:!1},t.minHeight=1,t.live=!0,t.minWidth=1,t.beforeShow&&(i=t.beforeShow);t.afterLoad&&t.afterLoad;var o=function(){};t.beforeLoad&&(o=t.beforeLoad);var a=function(){};t.afterClose&&(a=t.afterClose),t.beforeLoad=function(){return n.fancy=this,$.fancybox.showLoading(),o()},t.beforeShow=function(){"html"==n.fancy.type&&void 0==n.fancy.isGallery&&(n.fancy.height=$(".fancybox-inner").innerHeight()),$("html").addClass("modal-open"),$.fancybox.hideLoading();var e=$(".fancybox-wrap");e.addClass(t.className),e.addClass("imageviwer"),t.clickBlocked||e.addClass("can-close");var o=t.href||n.fancy.href;if(o){var a;if(/\/img\//.test(o)){var r=n.fancy.element.context.id.split("-");r[1]&&n.changeLocationHash("#img-"+r[1])}else/http[s]?:\/\/.*\/video/.test(o)&&(a=o.replace(/http[s]?:\/\/.*\/video\//,""))&&n.changeLocationHash("#video-"+a)}else{var s=this.content,c=$(s).closest("#video-content").data("code");c&&n.changeLocationHash("#video-c_"+c)}i(),n.isFancyLoad=!0},t.afterClose=function(e){if($("html").removeClass("modal-open"),window.location.hash.length>1)if(window.history&&window.history.replaceState){var t=window.location.pathname+window.location.search;window.history.replaceState({},"",t)}else window.location.hash=" ";a(e),n.isFancyLoad=!1},e.fancybox(t)}},scrollbarWidth:function(){var e,t=$("body"),n=$('<div style="position: absolute; left: -100000px; height: 100px; width: 100px;"></div>');return t.append(n),e=n.width(),n.css("overflow","scroll"),e-=n.width(),e||(e=n.width()-n[0].clientWidth),n.remove(),$("head").append('<style type="text/css">.modal-open { padding-right: '+e+"px } .scroll-width { padding-right:"+e+"px }</style>"),e},checkViewer:function(){var e=window.location.hash;if(/^#img-.*$/.test(e)){var t=e.split("-");if(null===t)return;t=t[1],$("#view-"+t).trigger("click");var n=new RegExp("^.*"+t+".*$");$("a.fancy-img, img.fancy-img-post, li.view-photo a").each(function(){$this=$(this);var e="";if($this.is("a")?e=$this.attr("href"):$this.is("img")&&(e=$(this).data("eval")),n.test(e))return $this.trigger("click"),!1})}else if(/^#video-\d*$/.test(e)){var i=e.match(/^#video-(\d+)$/);if(null===i)return;i=i[1];var n=new RegExp("^.*#video-"+i+".*$");$("a.video-link,.video-item a:not(.video-link)").each(function(){var e=$(this).attr("href");if(n.test(e))return $(this).trigger("click"),!1})}else if(/^#video-c_\w+$/.test(e)){var o=e.match(/^#video-c_(\w+)$/);if(null===o)return;o=o[1],$("#"+o).trigger("click")}},changeLocationHash:function(e){window.history&&window.history.replaceState?window.history.replaceState({},"",e):window.location.hash=e},getPhotos:function(e,t){return $.ajax("/photoalbum/load/getalbumphotos",{method:"POST",data:{aid:e,page:t,isView:!0},dataType:"json"}).then(function(e){if(e.success){var t=$(e.data).wrap("<div></div>").parent();return this.preparePhotosData(t.find(".photos a"),t.find("#photoview-tpl").data("base"))}}.bind(this))},preparePhotosData:function(e,t){return e.map(function(){var e=$(this).parent(),n=e.parents(".album-items-wrap"),i=n.hasClass("homepage"),o=e.data(),a=n.data();return o.fullSize_href=o.raw,o.id=e.attr("id"),o.src=o.view,o["photoId_data-pid"]=o.pid,o["desctext_data-pid"]=o.pid,i&&(a=$.extend(a,e.find(".view-photo-href").data())),o=$.extend({},o,a),o.albumname_href=t+"/"+o.albumid,o}).get()},viewPhoto:function(){var e,t,n,i,o=this,a=$("#photoview-tpl"),r=$("#photoalbum-show .view-photo > a");return r.on("click",function(){return e=o.preparePhotosData(r,a.data("base")),t=!0,Nethouse.Modal.openListImages(e,a.html(),r.index(this),{open:function(e){n=function(t,n){var i=window._.find(e.items,function(e){return(e.data?e.data.pid:e.pid)==n.pid});i.data.desc=n.desc,i.data.desctext=n.desctext,Nethouse.Modal.update()},i=function(){Nethouse.Modal.close()},$(document).on("changePhotoDesc",n),$(document).on("deletePhoto",i)},beforeNext:function(){return t},beforePrev:function(){return t},close:function(){$(document).off("changePhotoDesc",n),$(document).off("deletePhoto",i)},change:function(e,n){var i=e.data.page,a=Math.ceil(e.data.total/40),r=null,s=e.data.albumid;return t=!1,s?(e.data.current==40*i||e.data.current==e.data.total?r=a==i?1:i+1:e.data.current==40*(i-1)+1&&(r=1==i?a:i-1),!r||_.findWhere(n.st.items,{page:r})?void(t=!0):void o.getPhotos(e.data.albumid,r).then(function(e){r<i&&(n.st.index=n.index+e.length,n.index=n.index+e.length),n.st.items=n.st.items.concat(e),n.st.items=_.sortBy(n.st.items,"current"),n.items=_.clone(n.st.items),n.updateItemHTML(),t=!0})):void(t=!0)},imageLoaded:function(e){var t=$(".js-photo-window"),n=t.find("#view-photo-desc"),i=t.find("#photo-desc"),a=""!=$.trim(n.find(".text").text()),r=e.data.id.split("-");i.val(i.html()),n.find(".placeDesc").toggle(!a),r[1]&&o.changeLocationHash("#img-"+r[1]),void 0!=o.getcomments&&o.getcomments.abort(),o.getcomments=$.post("/get/commentswindow",{object:e.data.pid,type:Comments.types.images},function(e){if(e.success){var n,i=$(e.block);t.find(".js-photo-window__comments").html(i),o.bindInputCharCounter(),n=t.find("#comment_form"),Comments.initFormImages(n),Comments.initImageUpload(n),Comments.validateWindowForm(n),"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents()}}.bind(this),"json")}.bind(this)}),!1}),!1},viewCommentImageAttachment:function(){return $("body").on("click",".js-comment-image-link",function(){var e=$(this).parents(".js-comment-images").find(".js-comment-image-link"),t=e.map(function(){var e=$(this),t=e.data();return t.src=t.view,t.fullSize_href=t.raw,t}).get();return Nethouse.Modal.openListImages(t,$(".js-imageAttachmentView-tpl").html(),e.index(this)),!1}),!1},charCounter:function(e,t,n,i){void 0!==i&&!1===i&&(e=e.replace(/(<\/?[^>]+>)|(&nbsp;)/gi,""));var o=t-e.length;o<0&&(o=0),n.html(o)},bindInputCharCounter:function(){var e=this,t='<span class="infoDigits char_info">'+view.translate("Осталось символов")+': <span class="char_limit"></span></span>';$("input, textarea:visible, #comment_form textarea").each(function(){var n,i=$(this),o=i.data("charcounter");if(n=i.attr("maxlength")){var a,r;if(i.parents("dd").length&&"no"!=o){r=i.attr("id");var s=i.parents("dl").find("dt#"+r+"-label");s.find("span.char_info").length||s.prepend(t),a=$("#"+r+"-label .char_info .char_limit")}else"yes"==o&&(r=i.attr("id"),i.parent().find("span.char_info").length||i.parent().prepend(t),a=i.parent().find("span.char_info .char_limit"));void 0!==r&&$("#"+r).unbind(".limit").bind("change.limit keyup.limit",function(){e.charCounter($(this).val(),n,a)}).triggerHandler("change.limit")}})},bindInputCharCounterByElement:function(e){var t,n=this,i='<span class="infoDigits char_info">'+view.translate("Осталось символов")+': <span class="char_limit"></span></span>',o=e.data("charcounter");if(t=e.attr("maxlength")){var a,r;if(e.parents("dd").length&&"no"!=o){r=e.attr("id");var s=e.parents("dl").find("dt#"+r+"-label");s.find("span.char_info").length||s.prepend(i),a=$("#"+r+"-label .char_info .char_limit")}else"yes"==o&&(r=e.attr("id"),e.parent().find("span.char_info").length||e.parent().prepend(i),a=e.parent().find("span.char_info .char_limit"));void 0!==r&&$("#"+r).unbind(".limit").bind("change.limit keyup.limit",function(){n.charCounter($(this).val(),t,a)}).triggerHandler("change.limit")}},subscriberAddFormValidate:function(){$('form#subscriber-add-form input[type="text"]:visible:not([placeholder])').focus(function(){var e=$(this);e.val()==e.data("default")&&e.val("")}).blur(function(){var e=$(this),t=e.val(),n=e.data("default");""==t&&e.val(n)}),$("form#subscriber-add-form").validate({submitHandler:function(e){return Notifier.showIndicator("subscribe-left"),$(e).ajaxSubmit({success:function(e){Notifier.hideIndicator("subscribe-left");try{if(void 0!=e.form){var t=$(e.form).find('input[id*="csrf"]');t.length&&$("#subscriber-add-form").find('input[id*="csrf"]').replaceWith(t)}void 0!=e.success&&1==e.success?Nethouse.Modal.openHtml(e.success_window,null,!1):ntNotification.showError("Ошибка при добавлении подписчика")}catch(e){ntNotification.showError(e.message)}}}),!1},focusInvalid:!0,focusCleanup:!1,errorClass:"error",rules:{name:{required:!0,minlength:1},email:{required:!0,email:!0}},messages:{name:{required:view.translate("Пожалуйста, укажите свое имя")},email:{required:view.translate("Пожалуйста, укажите email адрес"),email:view.translate("Введите корректный email")}}})},formsHashHandler:function(){var e,t=location.hash;void 0!==t&&""!==t&&null!==t&&(e=function(){switch(!0){case/\#(\/)?feedback/.test(t):return"a.feedback-btn[data-type=0]";case/\#(\/)?callback$/.test(t):return"a.feedback-btn[data-type=1]";case/\#(\/)?order\-form/.test(t):return"button.order, .buttons.order";case/\#(\/)?one\-click\-form/.test(t):return"a.one-click-order-btn";default:return""}}.call(this),null!==$(e)&&$(e).length>0&&$(e).trigger("click"))},initDropDown:function(){$(".ui.dropdown").on("click",function(e){e.stopPropagation()}),$(".ui.dropdown:not(.with-inputs)").each(function(e,t){t=$(t),t.find("label.item").removeClass("active");var n=t.children(".text").addClass("default");n.attr("data-text")||n.attr("data-text",n.text()),t.dropdown({useLabels:!1,message:{count:n.attr("data-text")+" ({count})"}})}),$(".ui.dropdown.with-inputs").dropdown({useLabels:!1,action:"nothing"}),$(".ui.dropdown.menu").dropdown({action:"nothing",transition:"fade",keepOnScreen:!0})},initTab:function(){$("#product-full-desc .paths .menu .item").on("click",function(e){e.stopPropagation()}),$("#product-full-desc .paths .menu .item").tab({context:"#product-full-desc .paths"})}};var d=document,ie=d.all&&!window.opera,op="",OneClickBuy={selector:"a.one-click-order-btn",formSelector:"form.order-by-click",link:void 0,init:function(){$(this.selector).length>0&&this.initEventListener()},initEventListener:function(){var e=this;$(document).on("click",this.selector,function(t){setTimeout(function(){e.openModal($(e.selector),t)},200)})},handleFormSubmit:function(){var e=$(this.formSelector).parents(".window").find("button.send"),t=this;e.length>0&&$(e).click(function(e){e.preventDefault(),$(t.formSelector).submit()})},openModal:function(e,t){var n=$(e).attr("data-product-id"),i=$(e).attr("data-href"),o=this,a=$("#product-params-view"),r=[];if(a.length>0&&(r=window.Nethouse.cart.getParamsValues(a),!r.length))return ntNotification.showWarning("Выберите все параметры",4e3),void t.preventDefault();Nethouse.Modal.openHtmlAjax(i,{opts:{type:"POST",data:{productId:n,selectedParams:JSON.stringify(r)}},error:"Ошибка при загрузке формы",open:function(){o.addFieldsValidators(),o.handleFormSubmit()}})},addFieldsValidators:function(){$(this.formSelector).validate({focusInvalid:!1,focusCleanup:!0,rules:{clientName:{required:!0},clientPhone:{required:!0,phone:!0}},messages:{clientName:{required:view.translate("Введите корректное имя")},clientPhone:{required:view.translate("Введите номер телефона")}}})}};Feedback={init:function(e,t){return this.type=e,this.params=t||{},this.loadEvents(),this.showFeedback(),this.id="feedback"==e?"feedback-edit-window":"services-edit-window",!1},loadEvents:function(){},showFeedback:function(){var e,t=this;if(this.params.order)e="/"+this.type+"/load/makeorder",this.params.type=this.type,n=this.params;else{e="/mailer/getform";var n={type:this.type}}return Nethouse.Modal.openHtmlAjax(e,{opts:{type:"POST",data:n},error:"Ошибка при загрузке формы",open:function(){$(t.windowId).addClass(t.type),t.submitFeedback($("#"+t.type+"-order-form"))}}),!1},submitFeedback:function(e){var t=this,n=$(e);return e.validate({submitHandler:function(e){var n=t.type+"-edit-window";Notifier.showIndicator(n,!0),$(e).ajaxSubmit({dataType:"json",success:function(e){Notifier.hideIndicator(n,!0);try{if(void 0!=e&&1==e.success)Nethouse.Modal.close(),setTimeout(function(){ntNotification.showSuccess(view.translate("Форма успешно отправлена"));var e=Nethouse.DynamicForm.getSubmitHash(t.type);e&&(window.location.hash=e)},300);else{var i=e.msg||view.translate("Ошибка при отправке письма!");Notifier.showError(i,"#"+t.id+" #windowContent")}}catch(e){ntNotification.showError(e)}}})},focusInvalid:!1,focusCleanup:!0,rules:t.feedbackRules(e),messages:t.feedbackErrors(e)}),(n.is("#products-order-form")||n.is("#services-order-form"))&&t.initUploadFile(e),!0},initUploadFile:function(e){var t,n,i=this,o=["doc","docx","xls","xlsx","pdf","jpg","jpeg","gif","png","zip","rar"],a=$(e),r=!1,s=$('<div id="progress"><div class="progressbar-value"></div></div>'),c="fancybox-content";a.is("#products-order-form")?c="products-edit-window":a.is("#services-order-form")&&(c="services-edit-window"),t=a.find(".attach-btn a"),n=new Nethouse.Uploader(t[0],{path:"/putdocpub"}),n.addExtensionFilter(o).addFileSizeFilter(20*Nethouse.Uploader.MB).on("before",function(e){e.length&&(Notifier.showIndicator(c),s.hide(),r||(r=!0,t.after(s)),t.hide())}.bind(this)).on("progress",function(e){s.show(),s.find(".progressbar-value").css({width:e.loaded/e.total*100+"%"})}).on("filecomplete",function(e,n,o){if(Notifier.hideIndicator(c),s.hide(),t.show(),e)return void ntNotification.showError(sprintf(window.view.translate("js_uploader_upload_file_fail"),o.name),6e3);var r,d,l,u,m,p,h,f=window.JSON.parse(n.response);f.success&&f.url||ntNotification.showError(sprintf(window.view.translate("js_uploader_upload_file_fail"),o.name),6e3),r=f.url,d=f.name,l=f.size,u=f.timestamp,a.find("#attach-url").val(r),a.find("#attach-name").val(d),a.find("#attach-size").val(l),a.find("#attach-timestamp").val(u),m=a.find(".attach-info .file-info"),m.find(".attach-file-name").html(d),p=i.getHumanReadableFileSize(l),m.find(".attach-file-size").html(p),m.parent().show(),a.find(".attach-btn").hide(),(h=i.getFileIcon(d))&&a.find(".file-icons").addClass(h)}).on("error",function(e,n){s.hide(),t.show();var i=Nethouse.Uploader.Errors;switch(e){case i.EXTENSION:ntNotification.showError(sprintf(view.translate("js_uploader_extension_fail"),n.file.name,o.join(", ")),6e3);break;case i.MAX_SIZE:ntNotification.showError(sprintf(view.translate("js_uploader_max_size_fail"),n.file.name,"20 MB"),6e3)}}.bind(this))},getHumanReadableFileSize:function(e){e=parseInt(e);return e>=1048576?Math.round(e/1048576*10)/10+" Мб":e>=1024?Math.round(e/1024*10)/10+" кб":e+" б"},getFileIcon:function(e){e=e.toLowerCase();var t={pdf:[/pdf$/],xls:[/xls$/,/xlsx$/],jpg:[/jpg$/,/jpeg$/],psd:[/psd$/],mp3:[/mp3$/],gif:[/gif$/],ai:[/ai$/],eps:[/eps$/],png:[/png$/],zip:[/zip$/],rar:[/rar$/],txt:[/txt$/],rtf:[/rtf$/],doc:[/doc$/,/docx$/],ppt:[/ppt$/,/pptx$/],djvu:[/djvu$/,/djvue$/],fb:[/fb$/],ps:[/ps$/]},n=null;for(var i in t){var o=t[i];for(var a in o)if(o[a].test(e)){n=i;break}}return n&&(n+="-icon"),n},getUid:function(e){e=e||32;for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",i=0;i<e;i++){n+=t[Math.floor(16*Math.random())+0]}return n},startProgressUpload:function(e,t){var n=this,i=$('<div id="progress"><div class="progressbar-value"></div></div>');$(e).after(i).css("display","none"),setTimeout(function(){n.updateProgress(t,i)},1e3)},updateProgress:function(id,progressbar,success){var _self=this;$.ajax({url:"/getprogress",timeout:3e3,headers:{"X-Progress-ID":id},dataType:"script",complete:function(e,t){},error:function(e,t,n){},success:function(data){var response=null;try{response=eval(data)}catch(e){response={}}var progress=0;if(void 0!=response.state)if(void 0!=success&&"function"==typeof success)success(response,id);else{if("uploading"==response.state){var size=response.size,received=response.received;progress=Math.floor(received/size*100),size!=received&&setTimeout(function(){_self.updateProgress(id,progressbar)},1e3)}else{if("starting"==response.state)return void setTimeout(function(){_self.updateProgress(id,progressbar)},500);"done"==response.state&&(progress=100)}progressbar.find(".progressbar-value").stop(!0).animate({width:parseInt(3*progress)+"px"},2e3)}}})},feedbackRules:function(e){var t=$(e).data("type"),n={FORM_TYPE_FEEDBACK:0,FORM_TYPE_CALLBACK:1,FORM_TYPE_ORDER:2},i={maxlength:1e3};"call"!=t&&(i.required=!0);var o={content:i,fio:{required:!0,maxlength:100},email:{required:!0,maxlength:50,email:!0},phone:{phone:!0,required:!0,maxlength:26}};switch(t){case"services":o.serviceName={required:!0};break;case"products":o.productName={required:!0},o.phone={phone:!0};break;case n.FORM_TYPE_FEEDBACK:o.phone={required:!1}}return o},feedbackErrors:function(){var e={content:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле")},fio:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле")},email:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле"),email:view.translate("Неверный формат почты")},phone:{phone:view.translate("Только цифры и +. Пример: +79123456789"),maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле")}};switch(this.type){case"services":e.serviceName={required:view.translate("Выберите услугу")};break;case"products":e.productName={required:view.translate("Выберите товар")}}return e}},$(document).ready(function(){Visitor.init()});var PromoCodeService=function(){function e(){}return e.getPromoCode=function(e){return $.ajax({type:"POST",url:"/products/load/getdiscount",data:{code:e},dataType:"json"}).then(function(e){return e&&e.success?e.promocode:null})},e.calculateDiscount=function(t,n,i,o){void 0===i&&(i="");var a,r=t.conditions,s=0;switch(Number(t.type)){case e.PROMOCODE_FORALL:for(a in r)s=r[a].discount;return parseFloat(n-parseFloat(n*parseFloat(s)/100)).toFixed(2);case e.PROMOCODE_PERCENT:for(a in r)n>parseFloat(r[a].condition)&&(s=parseFloat(r[a].discount));return parseFloat(n-parseFloat(n*parseFloat(s)/100)).toFixed(2);case e.PROMOCODE_CURRENCY:for(a in r)n>parseFloat(r[a].condition)&&(s=parseFloat(r[a].discount));return parseFloat(n-parseFloat(s)).toFixed(2);case e.PROMOCODE_ARTICUL:for(a in r)if(r[a].discount==i&&""!=i)return s=parseFloat(r[a].condition),parseFloat(s*o)<parseFloat(n)?parseFloat(parseFloat(n)-parseFloat(s*o)).toFixed(2):parseFloat(n).toFixed(2)}return n},e}();PromoCodeService.PROMOCODE_FORALL=0,PromoCodeService.PROMOCODE_PERCENT=1,PromoCodeService.PROMOCODE_CURRENCY=2,PromoCodeService.PROMOCODE_ARTICUL=3;var Cart=function(){this.blockId="products",this.blockLeft="products-cart-left",this.orderBtn=$("#products").find(".buttons.cart"),this.orderForm="#product-order-form",this.pushUrl="/"+this.blockId+"/load/pushtocart",this.updateUrl="/"+this.blockId+"/load/updatecart",this.promocode=null,this.timeouts={},this.orderData=$("#view-cart-show"),this.clientData=$("#user-info"),this.initIncremental(),this.loadEvents(),this.addValidateMethods(),this.initShipping(),this.initPromoCode()};$.extend(Cart.prototype,{initIncremental:function(){$(".js-incremental-field").incrementalInput({min:0,canChange:function(e){return!Cart.countUpdated&&!e.prop("disabled")},onChange:function(e,t,n){0===t&&0==n||this.restoreItem(e)||this.update(e,"update",!0)}.bind(this)})},addValidateMethods:function(){$.validator.addMethod("payment_qiwi_phone",function(e,t){return!$("#payments-14").attr("checked")||(e=e.replace(/[^\d]/g,""),this.optional(t)||/^(7|8)\d{10}$/i.test(e))},view.translate("Введите корректный номер QIWI кошелька")),$.validator.addMethod("phone",function(e,t){var n=e.trim();return this.optional(t)||/^[+]?(\d)+$/i.test(n)},view.translate("Только цифры и +. Пример: +79123456789")),$.validator.addMethod("payment_pscb_phone",function(e,t){return!$("#payments-204").attr("checked")||(e=e.replace(/[^\d]/g,""),this.optional(t)||/^(7|8)\d{10}$/i.test(e))},view.translate("Введите корректный номер ПСКБ кошелька")),$.validator.addMethod("onecheck",function(){return $("#accept_agreement:checked").length>=1},"Принять условия публичной оферты")},summDeliveryPrice:function(e){var t=$("#delivery-choose");if(t.length>0){var n=t.find("input.delivery-choose:checked").val();if(void 0!=n&&e>0){var i=parseFloat(n.replace("/[^d.]/",""));t.find("#total-summ-order span").html((e+i).toFixed(2))}else t.find("#total-summ-order span").html(e.toFixed(2))}},initPromoCode:function(){var e=this,t=$("#promocode-form");t.find("input").val()&&this.checkPromoCode(),$(document).on("click",t.find(".buttons").selector,function(){return e.checkPromoCode(),!1}),$(document).on("change",t.find("input").selector,function(){return e.checkPromoCode(),!1})},initShipping:function(){var e=$.fn.shipping.events,t=$(document),n=this.orderData.find(".btn-contact-step"),i=$(".js-shipping").shipping();i.length&&(n.on("click",function(){return i.shipping("citySelected")&&i.shipping("rateSelected")}),i.on(e.rateChanged,function(e,t){var n=this.getTotal(),i=(n+t.price).toFixed(2),o=this.getTotalShippingElm();$(".js-shipping__shipment-id").val(t.shipment),$(".js-shipping__rate-id").val(t.id),$(".js-shipping__pickup-point-id").val(t.pickupPoint),o.html(i).data("shipping-price",t.price)}.bind(this)),t.on("cart-total-changed",function(){var e,t=this.getTotal(),n=this.getTotalShippingElm();if(this.summDeliveryPrice(t),!n.length)return!0;e=(t+n.data("shipping-price")).toFixed(2),n.html(e)}.bind(this)),t.on("cart.update",function(){i.trigger(e.updateRates)}))},getTotalShippingElm:function(){return this.orderData.find(".js-cart__total_with-shipping")},getTotalElm:function(){return this.orderData.find(".js-cart__total")},getTotal:function(){return parseFloat(this.getTotalElm().text())},setTotal:function(e){this.getTotalElm().html(e)},totalChanged:function(){$(document).trigger("cart-total-changed")},loadEvents:function(){var e=this,t=$(".payments-step");e.paramsNotSelectedClass="not-selected",e.hasStore=t.length>0;var n=$("#top-body:not(.cabinet)"),i=function(){var t=$(".contacts-step"),n=$(".cart-step"),i=$(".pay-step");t.find(".separate").removeClass("arrow_step_fl").addClass("arrow_step_fr"),i.find(".separate").removeClass("arrow_step").addClass("arrow_step_fl"),n.removeClass("active"),t.addClass("active");var o=$("input.delivery-choose:checked");if(o.length){var a=parseInt(o.data("dlvr"));$("#product-order-form").find("#dlvrId").val(a)}e.clientData.show(),$("html,body").animate({scrollTop:$(".order-steps").offset().top-30},100),e.orderData.hide()};$(document).on("change",e.orderData.find(".num-items").selector,function(){return 0==e.orderData.find("tr:not(.deleted-item) .num-items.error").length&&e.orderData.find(".btn-contact-step").removeClass("disable"),e.restoreItem(this)||e.update(this,"update",!0),!1}),$(document).on("click",e.orderData.find(".btn-contact-step:not(.disable)").selector,function(){return Cart.countUpdated?($(document).off("toContactStep"),$(document).on("toContactStep",function(){i()})):i(),!1}),$(".prev-step-contacts, .prev-step").keypress(function(){return!1}),e.hasStore&&($(document).on("click",e.clientData.find(".btn-payments-step").selector,function(){if($(e.orderForm).valid()){var n=$(".contacts-step"),i=($(".cart-step"),$(".pay-step"));n.find(".separate").removeClass("arrow_step_fr").addClass("arrow_step"),i.find(".separate").removeClass("arrow_step_fl").addClass("arrow_step_fr"),n.removeClass("active"),i.addClass("active"),t.show(),$("html,body").animate({scrollTop:$(".order-steps").offset().top-30},100),e.clientData.hide()}return!1}),$(document).on("click",t.find(".prev-step-contacts").selector,function(){var n=$(".contacts-step"),i=($(".cart-step"),$(".pay-step"));return n.find(".separate").removeClass("arrow_step").addClass("arrow_step_fr"),i.find(".separate").removeClass("arrow_step_fr").addClass("arrow_step_fl"),n.addClass("active"),i.removeClass("active"),t.hide(),e.clientData.show(),!1})),$(document).on("click",e.clientData.find(".prev-step").selector,function(t){return e.toCartStep(),!1}),$(document).on("click",this.orderBtn.selector,function(){return e.grabParamsAndAdd(this)}),$(document).on("click","#products .product-item .cart-btn",function(){return e.addToCart(this,!0)}),$(document).on("click",n.find(".cart-item .delete").selector,function(){return e.update(this,"delete")}),$(document).on("click",n.find("#view-cart .delete-item").selector,function(){return e.update(this,"delete",!0)}),$(document).on("change","#products-cart-left .num-items",function(){return e.update(this)}),$(document).on("click",n.find("#view-cart .restore-item").selector,function(){return e.restoreItem(this)}),$(document).on("click",e.clientData.find(".btn-send").selector,function(){return $("#product-order-form").submit(),!1}),$(document).on("change",'.payments-step input[data-name="paymethod_grid9"]',function(){return $("#product-order-form").submit(),!1}),e.submitOrderForm(),$("#delivery-choose").find(".delivery-choose").change(function(){var t=$("input.delivery-choose:checked");$(".without-delivery").toggle(t.hasClass("delivery-type-2")),$(".with-delivery").toggle(!t.hasClass("delivery-type-2"));var n=parseInt(t.data("dlvr"));return $("#product-order-form").find("#dlvrId").val(n),e.totalChanged(),!1}),$(document).on("change","#product-params-view .ptype-view-select",function(){return e.updateProductCost(this)}),$("#product-order-form").find(".vertical-radio input:radio").prop("checked",!1),$(document).on("click","#view-cart input[type=radio]",function(){var e=$(this);"payments-14"==e.attr("id")?$("#qiwi_phone_container").show():$("#qiwi_phone_container").hide(),"payments-204"==e.attr("id")?$("#pscb_phone_container").show():$("#pscb_phone_container").hide()}),$(document).on("change",'.payments-step input[data-name="paymethod"]',function(){var e=$('input[data-name="paymethod"]:checked');if(e.length>0){var t=$(".payments-step .btn-send"),n=e.val();0==n||2==n||1==n?t.html(view.translate("Отправить заказ")):t.html(view.translate("Перейти к оплате")),t.removeClass("disable")}})},toCartStep:function(){var e=$(".contacts-step"),t=$(".cart-step"),n=$(".pay-step");n.find(".separate").removeClass("arrow_step_fl").removeClass("arrow_step_fr").addClass("arrow_step"),e.find(".separate").removeClass("arrow_step_fr").addClass("arrow_step_fl"),t.addClass("active"),e.removeClass("active"),n.removeClass("active"),$(".payments-step").hide(),this.clientData.hide(),this.orderData.show()},setPromoCode:function(e,t){this.promocode=e,$("#promocode").val(t),$("#total-discount-element").css("display","")},hideDiscount:function(){this.promocode=null,$("#total-discount-element").css("display","none")},checkPromoCode:function(){var e=this,t=$("#promocode-form").find("input").val();return Cart.countUpdated=!0,PromoCodeService.getPromoCode(t).then(function(n){n?e.setPromoCode(n,t):e.hideDiscount(),e.calculateSumm(),setTimeout(function(){Cart.countUpdated=!1,$(document).off("toContactStep")},10)}).fail(function(){ntNotification.showError("Произошла ошибка")}),!1},getParamsValues:function(e){var t=e.find(".ptype-view-wrapper select"),n=[],i=this;return t.each(function(){parseInt(this.value)&&n.push(this.value),i.paramIsSelected($(this))}),t.length==n.length?n:[]},grabParams:function(e){var t=[],n=$("#product-params-view");if(n.length<=0)return void e(t);t=this.getParamsValues(n),t.length?e(t):ntNotification.showWarning("Выберите все параметры",4e3)},grabParamsAndAdd:function(e){var t=this;t.grabParams(function(n){t.addToCart(e,!1,n)})},addToCart:function(e,t,n){var i=1==t?$(e).parents(".product-item"):$(e).parents(".item-content"),o=n||[];if(i.length>0){var a=$(i).attr("id").replace("item","")||0,r=t&&!$(e).hasClass("js-cart-btn")?void 0:e;this.push({itemId:a,num:1,getcart:1,button:r,productParams:o})}return!1},
push:function(e){var t=this;return void 0!=e&&$.post(t.pushUrl,{cid:e.itemId,num:e.num,getcart:e.getcart||0,productParams:e.productParams},function(n){try{if(_.isUndefined(n)||1!=n.success){var i=void 0!=n.msg?n.msg:"Произошла ошибка, попробуйте  позже";throw new Error(i)}if(!_.isUndefined(n)){var o=$("<div>"+n.cart+"</div>").find("#"+t.blockLeft),a=$("#"+t.blockLeft);a.length>0?a.replaceWith(o):$(".cart-is-empty").replaceWith(o)}"restore"==e.action&&t.markItem(e.elementId,!0),e.callback&&e.callback(),void 0!=e.button&&Notifier.showNotice($(e.button).parent(),view.translate("Товар добавлен"),!0),$(document).trigger("cart.update")}catch(e){ntNotification.showError(e.message)}},"json"),!1},update:function(e,t,n){e=$(e);var i,o=this,a=t||"update",r=n||!1,s=r?e.parents("tr").eq(0).attr("id").replace("item",""):e.parents(".cart-item").eq(0).data("cid");if(Cart.countUpdated=!0,void 0==s)return!1;if(i={cid:s,act:a},"update"==a){var c=e.val();if(!view.isInt(c)||c<0)return e.val(e.data("value")),Cart.countUpdated=!1,!1;0==c?i.act="delete":$.extend(i,{num:c})}$.post(this.updateUrl,i,function(t){try{if(void 0==t||1!=t.success){if(t.noProductInStock)return o.showNumErrors(t.noProductInStock),e.val(t.noProductInStock[s]),void o.update(e,"update",n);void 0!=t.num&&e.val(e.data("value"));var d=t.msg||view.translate("Произошла ошибка, попробуйте  позже");throw new Error(d)}var l=e.data("pid"),u=e.data("price"),m=$("#cart-inner").find('.price-info[rel="product-'+l+'"]');switch(a){case"update":0==c&&(r?o.markItem(i.cid):o.removeItem(i.cid));var p=u*c;p=parseFloat(p.toFixed(2)),m.html(p),o.calculateSumm(),e.data("value",e.val());break;case"delete":r?o.markItem(i.cid):o.removeItem(i.cid)}$(document).trigger("cart.update")}catch(e){ntNotification.showError(e.message)}setTimeout(function(){Cart.countUpdated=!1,$(document).off("toContactStep")},10)},"json")},removeItem:function(e){$("#cid"+e).remove(),0==$("#"+this.blockLeft+" .cart-item").length&&$("#"+this.blockLeft).replaceWith('<div class="cart-is-empty">')},markItem:function(e,t){var n,i;if(void 0!=e){var o=t||!1,a=$("#item"+e);o?(n="delete-item",i="",a.find(".num-items").prop("disabled",!1)):(n="restore-item",i="deleted-item",a.find(".num-items").prop("disabled",!0)),a.find(".cart-manage span").attr("class",n),a.attr("class",i),this.calculateSumm()}return!1},restoreItem:function(e){var t=this,n=$(e).parents("tr.deleted-item").eq(0);if(n.length>0){var i=n.attr("id"),o={itemId:n.data("pid"),elementId:i.replace("item",""),action:"restore"},a=$("#"+i+" .num-items"),r=parseInt(a.val());0==r&&(r=1,a.val(1),o.callback=function(){t.update(a[0],"update",!0)}),o.num=r;var s=$(n).find(".product-params li"),c=[];return s.length>0&&s.each(function(){c.push($(this).data("param"))}),o.productParams=c,this.push(o),!0}return!1},calculateSumm:function(){var e=!0,t=this,n=$("#cart-inner"),i=0,o=0;n.length>0&&(n.find('tr:not(".deleted-item") .product-summ').length?($(".cart-empty").hide(),$("#view-cart").find(".has_products").show()):($("#view-cart").find(".has_products").hide(),$(".cart-empty").show(),e=!1),n.find('tr:not(".deleted-item") .product-summ').each(function(){var e=$(this).html().replace("/[^d.]/",""),n=$(this).parent().parent().find("input");e=""!=e&&e>0?e:0,t.promocode&&Number(t.promocode.type)===PromoCodeService.PROMOCODE_ARTICUL?(o+=parseFloat(e),i+=parseFloat(PromoCodeService.calculateDiscount(t.promocode,parseFloat(e),$(n).data("articul"),$(n).val()))):i+=parseFloat(e)})),t.promocode&&Number(t.promocode.type)!==PromoCodeService.PROMOCODE_ARTICUL?(o=parseFloat(i).toFixed(2),i=PromoCodeService.calculateDiscount(t.promocode,parseFloat(i.toFixed(2)))):i=parseFloat(i).toFixed(2),$("#total-discount-element").find("#total-discount span").html(parseFloat(o-i).toFixed(2)),t.setTotal(i),t.totalChanged();var a,r=$(".min-order-sum"),s=$(".btn-contact-step"),c=$(".shop-continue");r.length&&(a=r.data("min-sum"),i<a?(r.show(),c.show(),s.hide(),e=!1):(r.hide(),c.hide(),s.show())),e&&$(document).trigger("toContactStep")},getError:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if("object"==$.type(e[n]))return this.getError(e[n],n);var i={};return i.element=t,i.message=e[n],i}},showError:function(e,t,n){if(e.addClass("error"),!e.is('input[type="checkbox"]')){var i=$('<div class="error -text-error -pull-right -mg-l-10 error-message">');i.text(t),n.find('label[for="'+e.attr("name")+'"]').append(i)}},appendNumError:function(e,t,n,i){var o,a="js-num-products_error";n.addClass("error"),e.addClass(a),o=t.find("."+a),o.length?o.replaceWith(e):t.append(e),this.timeouts[i]&&clearTimeout(this.timeouts[i]),this.timeouts[i]=setTimeout(function(){delete this.timeouts[i],n.removeClass("error"),t.find("."+a).remove()}.bind(this),6e3)},showNumErrors:function(e){var t,n,i,o,a=$("#products-cart-left-show");for(var r in e)e.hasOwnProperty(r)&&(a.length?(i=a.find("#cid"+r),n=i.find("input"),n.val(e[r]),o=$('<div style="margin-top: 3px" class="-text-error"></div>')):(n=$("#item"+r+" input.num-items"),i=n.parent(),o=$('<div class="-mg-t-10 -text-error"></div>')),t=0!=e[r]?view.translate("Осталось")+": "+e[r]:view.translate("Нет в наличии"),o.html(t),this.appendNumError(o,i,n,r))},submitOrderForm:function(){var t=this,n=$(".payments-step"),i=n.find('input[type="radio"][name="payment"]'),o=$(this.orderForm);t.hasStore&&$(document).on("click",'.payments-step input[type="radio"]',function(){var e=parseInt(n.find('input[type="radio"]:checked').val()),t=n.find("label[for=accept_agreement]");0==e||2==e?t.hide():t.show()}),o.validate({submitHandler:function(a){if($(".payments-step .btn-send.disable").length)return!1;Notifier.showIndicatorBtn($(".btn-send")),o.ajaxSubmit({dataType:"json",success:function(r){if(r.success)if(t.hasStore&&0==i.filter("#payments-0:checked, #payments-2:checked, #payments-1:checked, #payments-MP:checked").length){var s=$(r.gateway_form);s.hide(),$("#view-cart").append(s),s.submit()}else window.location="/cart/checkout";else{if(Notifier.hideIndicatorBtn($(".btn-send")),r.noProductInStock)return t.toCartStep(),void t.showNumErrors(r.noProductInStock);if(r.message&&ntNotification.showError(r.message),r.errors){var c=t.getError(r.errors),d=$(a).find("#"+c.element);d.length>0?(t.hasStore&&n.find(".prev-step-contacts").trigger("click"),t.showError(d,c.message,o)):ntNotification.showError(e.message)}}}})},showErrors:function(e,n){o.find(".error-message").remove(),$("input.error").removeClass("error");for(var i=0;i<n.length;i++){var a=n[i],r=$(a.element);t.showError(r,a.message,o)}},focusInvalid:!1,focusCleanup:!1,rules:{qiwi_phone:{required:!0,payment_qiwi_phone:!0},nhpay_phone:{required:!0,payment_pscb_phone:!0},accept_agreement:{onecheck:!0},name:{required:!0},email:{identity:!0,required:!0},phone:{required:!0,phone:!0}},messages:{qiwi_phone:{required:view.translate("Обязательное поле")},nhpay_phone:{required:view.translate("Обязательное поле")},comment:{maxlength:view.translate("Введено больше символов")},adress:{maxlength:view.translate("Введено больше символов")},name:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле")},email:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле"),email:view.translate("Неверный формат почты")},phone:{maxlength:view.translate("Введено больше символов"),required:view.translate("Обязательное поле")}}}),Visitor.bindInputCharCounter()},paramIsSelected:function(e){var t=e.parent();Number(e.val())>0?t.removeClass(this.paramsNotSelectedClass):t.addClass(this.paramsNotSelectedClass)},updateProductCost:function(e){var t=this,n=$("#products-show"),i={price:n.find(".product-content .old-price .product-price-data"),priceSale:n.find(".product-content #cost-by-impact .product-price-data")},o={price:Number(i.price.data("cost")),priceSale:Number(i.priceSale.data("cost"))};o.priceSale>=0&&($("#product-params-view").find(".ptype-view-wrapper select").each(function(){var e=$(this),n=e.find("option:selected"),i=parseFloat(n.data("impact"));t.paramIsSelected(e),o.price+=i,o.priceSale+=i}),o.price=o.price>0?o.price:0,o.priceSale=o.priceSale>0?o.priceSale:0,i.price.html(parseFloat(o.price.toFixed(2))),i.priceSale.html(parseFloat(o.priceSale.toFixed(2))))}}),$("document").ready(function(){window.Nethouse=window.Nethouse||{},window.Nethouse.cart=new Cart});var Comments;$("document").ready(function(){Comments=function(){this.init()},Comments.prototype={maxImagesQuantity:5,types:{video:6,images:7},init:function(){var e=this;this.commentsAccept=!0,this.initAnswerBtnAllowed=!0,this.id="comment",this.block_id=$("#"+this.id).data("block-id"),this.widget_type=7,this.countSubComments=2,this.page=2,this.showMessage='<span class="comment-item__btn button button_for_comment-toggle-comments">'+view.translate("Показать все комментарии")+"</span>",this.hideMessage='<span class="comment-item__btn button button_for_comment-toggle-comments">'+view.translate("Скрыть комментарии")+"</span>",$("#comment_wrap").length?e.initComments():$(document).on("widget_init",function(){e.initComments()}),this.loadEvents()},initComments:function(){var e=this,t=$("#comment_wrap"),n=t.attr("class");if(0!=$(".widget-comments .comment_wrap").length){var i=$(".widget-comments > .comment_wrap");e.count_roots=i.length,e.prepareOutput(i,!0),t.find(".next_comments").click(function(){e.getWidgetComments(this)})}$(document).on("changeBlock","#comment",function(){var t=$("#comment_wrap");if(0!=t.length&&t.is(":hidden")){var n=$(".widget-comments > .comment_wrap");e.prepareOutput(n,!0),$(".all-comments .answer-btn").click(function(){e.getAnswer(this)}),"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents()}}),void 0!=n?(this.type=n,this.object=t.find(".comment").attr("id")):this.type="site",0!=t.length&&0!=t.find(".is_scroll").length&&this.commentsAccept&&(e.infiniteScroll(),this.commentsAccept=!1)},initScroll:function(){$("#comment_wrap")},loadEvents:function(){var e=this;$(document).on("click","#comment_wrap .addcomment",function(){var t=$("#form_wrap");return e._getSmallForm($(this),t,!1),!1}),$(document).on("click",".all-comments .answer-btn",function(){e.getAnswer(this)}),this.initAnswerBtnAllowed=!1,$(document).on("click",".window #comment_form .cancel",function(){var t=this;return $(t).parents("#comment_form").slideToggle(function(){e.hideFormAndRevalidate($(t))}),!1}),$(document).on("click",".all-comments .cancel, #comment_wrap .cancel",function(){return $(this).parents("#comment_form").hide(),$(this).parents(".answer-form").hide(),$(this).parents(".comment_wrap ").find(".up-arrow").hide(),e.hideFormAndRevalidate($(this)),!1}),$(document).on("click","#comment-edit .cancel, #comment-edit .close",function(){e.toggleBlock(e.id,"close")}),$(document).on("hideBlocks",function(){e.toggleBlock(e.id,"close")}),$(document).on("click","#comment .add-btn",function(){e.toggleBlock(e.id,"add");var t=$("#"+e.id+"-edit"),n=$("#"+e.id+" i.up-arrow");return $("i.up-arrow").remove(),n.length>0&&n.remove(),e._getSmallForm($(this),t,!1)}),$(document).on("click","#comment_form #reload",function(){e.reloadCaptcha()})},infiniteScroll:function(){var e=this;$(".end_comments").endlessScroll({fireOnce:!0,fireDelay:200,loader:"<img id='loader' src='//s.siteapi.org/frontend/static/grid_9/img/lazyload-da16aabf34.gif'>",url:"/comment/load/getcomments",toElement:!0,params:{type:e.type,object:e.object,page:e.page},success:function(e,t){return!!e.success&&(t.params.page++,e.next_page?$("#comment_wrap .is_scroll .per_page").html(e.count):(t.disable=!0,$("#comment_wrap .is_scroll").removeClass("is_scroll")),void $("#comment_wrap .all-comments").append(e.output))},insertAfter:".all-comments article.comment_wrap:last",callback:function(){CommentsUser.reloadEvents()}})},prepareOutput:function(e,t){var n=this,i='<div class="button-show-'+n.id+' blue">'+n.showMessage+"</div>";e.each(function(){var e=$(this),o=e.find(".button-show-"+n.id),a=e.find(".comment_wrap");a.length>n.countSubComments?(0==o.length&&(e.children("div").after(i),e.find(".button-show-"+n.id).click(function(){n.showSubComments(this)})),!t&&o.hasClass("isshow")||(a.show(),e.find(".comment_wrap:lt("+(a.length-n.countSubComments)+")").hide())):0!=o.length&&(a.show(),o.remove())}),t&&($("#ajax-loader").remove(),$("#"+n.id+"_wrap").show())},showSubComments:function(e){$(".answer-form.comment_wrap").remove();var t=$("#comment-form");0!=t.length&&(t.parent().find(".item").show(),t.remove());var n=this,i=$(e);if(i.hasClass("isshow")){i.removeClass("isshow");var o=i.parent().find(".comment_wrap"),a=o.length;a>n.countSubComments&&(i.html(n.showMessage),i.parent().find(".comment_wrap:lt("+(a-n.countSubComments)+")").hide())}else i.addClass("isshow"),i.html(n.hideMessage),i.parent().find(".comment_wrap").show()},getAnswer:function(e){var t=this;$(e).parent().parent().find(".answer-form").remove();var n=$(e).parents(".item").attr("id").replace("item-",""),i=$('<article id="parent-'+n+'" class="answer-form"><div><div></article>');return $(e).parent().after(i),$("i.up-arrow").remove(),0!=$("#comment-edit:visible").length&&($("#comment_form").remove(),t.toggleBlock(t.id,"add")),t._getSmallForm($(e),i,!0),!1},hideFormAndRevalidate:function(e){var t=this,n=$(e).parents("form"),i=0!=$(e).parents(".fancybox-inner").length,o=n.parent(),a=n.clone();o.append(a),n.remove(),i?t.validateWindowForm(a):"site"==t.type?t.validateWidgetForm(a):t.validateForm(a),a.find(".js-comment-images__list").html(""),this.initImageUpload(a)},toggleBlock:function(e,t){$(".on-edit:not(.static)").hide(),$(".content-block").show(),$(".content-block").parents("section").addClass("on-view"),$("header.infoPlate").each(function(){0==$(this).parents("#"+e).length&&($(this).children(".edit-block").find("a").removeClass("active-btn"),$(this).find(".add-btn").removeClass("active-btn"))}),$("#header-wrapper .edit-block").find("a.active-btn").removeClass("active-btn"),$("#header-wrapper").attr("class","");var n=$("#"+e).hasClass("overt");if("edit"==t||"add"==t){var i="add"==t?"edit":"add";$("#"+e+" ."+t+"-btn").hasClass("active-btn")?($("#"+e+"-edit").hide(),$("#"+e+" .no-entry").show(),$("#"+e+"-show").show(),$("#"+e).addClass("on-view"),$("#"+e+" ."+t+"-btn").removeClass("active-btn")):($("#"+e+"-edit").show(),n||$("#"+e+"-show").hide(),$("#"+e+" .no-entry").hide(),$("#"+e).removeClass("on-view"),$("#"+e+" ."+t+"-btn").addClass("active-btn"),$("#"+e+" ."+i+"-btn").removeClass("active-btn"))}else $("#"+e+"-edit").hide(),$("#"+e+"-show").show(),$("#"+e+" .no-entry").show(),$("#"+e).addClass("on-view"),$("#"+e+" .edit-btn").removeClass("active-btn"),$("#"+e+" .add-btn").removeClass("active-btn");return void 0!=t||"contactsmain"!=e&&"contactssocnet"!=e||$("#content #"+e+"-form").remove(),!1},getWidgetComments:function(e){var t=this;$("#comment_wrap .next_comments span").hide(),$("#comment_wrap .next_comments").append("<img id='loader' src='//s.siteapi.org/frontend/static/grid_9/img/lazyload-da16aabf34.gif'>"),$.post("/comment/load/getsitecomments",{page:t.page},function(e){if($("#comment_wrap #loader").remove(),e.success){t.page++;var n=$(e.output);t.prepareOutput(n),$(".all-comments.widget-comments").append(n),"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents(),this.initAnswerBtnAllowed&&n.find(".answer-btn").click(function(){t.getAnswer(this)}),e.next_page?$("#comment_wrap .next_comments span").show():$("#comment_wrap .next_comments").remove()}else $("#comment_wrap .next_comments span").show(),ntNotification.showError("Произошла ошибка")},"json")},initFormImages:function(e,t){e.find(".js-comment-image").each(function(){var t=$(this);t.find(".js-comment-image__delete").on("click",function(){t.remove(),e.find(".js-comment-images__upload").show()}.bind(this))})},getImagesQuatity:function(e){return e.find(".js-comment-images__list .js-comment-image:not(.upload-image_fail)").length},initImageUpload:function(e){e.find(".js-comment-images").show();var t,n=e.find(".js-comment-images__list"),i=e.find(".js-comment-images__upload"),o=i.data("upload-url"),a=["jpeg","png","gif","jpg"],r=$(".js-comment-image-tpl").html(),s=this.maxImagesQuantity-this.getImagesQuatity(e);0!=i.length&&(s>0&&i.show(),t=new Nethouse.ImageUploader(i[0],{multiple:!0,path:o}),t.preview(90,60,function(t,o){t=$(r).append(t),n.append(t),t.addClass("js-comment-image_"+o),t.find(".js-comment-image__delete").on("click",function(){t.remove(),this.getImagesQuatity(e)<this.maxImagesQuantity&&i.show()}.bind(this))}.bind(this)).addExtensionFilter(a).addFileSizeFilter(5*Nethouse.Uploader.MB).on("before",function(){t.maxFiles=this.maxImagesQuantity-this.getImagesQuatity(e)}.bind(this)).on("filecomplete",function(t,o,a){if(t)return void ntNotification.showError(sprintf(view.translate("js_uploader_upload_file_fail"),a.name),6e3);var r=window.JSON.parse(o.response),s=new Nethouse.FileModel(r),c=this.getImagesQuatity(e);n.find(".js-comment-image_"+a.id).append(s.toInputFields(a.id,"attachments")),c>=this.maxImagesQuantity&&i.hide()}.bind(this)).on("error",function(e,t){var n=Nethouse.Uploader.Errors;switch(e){case n.EXTENSION:ntNotification.showError(sprintf(view.translate("js_uploader_extension_fail"),t.file.name,a.join(", ")),6e3);break;case n.MAX_SIZE:ntNotification.showError(sprintf(view.translate("js_uploader_max_size_fail"),t.file.name,"5 MB"),6e3);break;case n.MAX_FILES_COUNT:ntNotification.showError(sprintf(view.translate("js_uploader_files_count_fail"),this.maxImagesQuantity),6e3)}}.bind(this)))},_getSmallForm:function(e,t,n){var i=this;if($(".comment_wrap.answer-form").not(t).remove(),$("#comment_form").parents(".answer-form").remove(),$("section#comment #comment-edit #comment_form").remove(),$(".comment_wrap #comment_form").remove(),$(".comment_wrap .item").show(),n)var o=e.parents(".item").attr("id").replace("item-","");if(e.hasClass("active-btn")||"site"!=i.type||n){"site"==i.type&&e.append('<i class="up-arrow"></i>');var a=Notifier.getLoader();t.html('<div class="ajax-loader">'+a+"</div>");var r="/"+i.id+"/load/getform";$.post(r,{type:i.type,object:i.object,parent:o},function(n){var o,a;n.success?($("."+i.id+"_wrap #"+i.id+"_form").remove(),a=t.html(n.form),i.initFormImages(a.find("form")),i.initImageUpload(a.find("form")),"site"==i.type?(a.children("form").removeClass("fromTable").addClass("new-item"),i.validateWidgetForm(a.children("form"))):(i.ReloadEvents(e),i.validateForm(a.children("form")))):($("#"+i.id+" .no-entry").show(),o=$(n.form).closest(".block-error").length>0?n.form:"Ошибка",$("#comment-edit").empty(),Notifier.showError(o,"#comment-edit"))},"json")}return!1},getCookie:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},ReloadEvents:function(e){var t=this;e.unbind("click"),e.click(function(){$(".comment_wrap #comment_form").remove(),$(".comment_wrap .item").show();var e=$("#comment_form");e.is(":hidden")?t.reloadCaptcha():e.hide()})},highlight:function(e,t){$(e).addClass(t)},unhighlight:function(e,t){$(e).removeClass(t).next(".errors")},showErrors:function(e,t){$("#comment_form .errors").remove(),$("#comment_form .error").removeClass("error");for(var n=0;n<t.length;n++){var i=t[n],o=$(i.element),a=$('<ul class="errors">');a.append($("<li>").text(i.message)),o.hasClass("cleditor")?a.insertAfter(o.parents(".cleditorMain").find("iframe")):a.insertAfter(o),this.settings.highlight.call(this,i.element,"error")}},validateWindowForm:function(e){var t=this;e.validate({showErrors:t.showErrors,unhighlight:t.unhighlight,highlight:t.highlight,submitHandler:function(e){return Notifier.showIndicator("comment_form",!1),$(e).ajaxSubmit({dataType:"json",success:function(e){if(Notifier.hideIndicator("comment_form",!1),e.success){if($(".window #comment_form").slideToggle(),!e.approved)return t.cleanForm(),void t.notApprovedNotification();e.isNew?($(".window .all-comments").append(e.comment),0==$("#comment_wrap header .info h2").length&&$("#comment_wrap header .info").append('<h2 class="not_scroll">Комментарии</h2><div class="bold_sep"><hr></div>'),t.cleanForm()):$(".window .all-comments #item-"+e.item).parent().replaceWith(e.comment),"undefined"!=typeof CommentsUser?CommentsUser.reloadEvents():t.reloadCaptcha()}else e.captchaFaild?(t.reloadCaptcha(),t.captchaError()):($(".comment_wrap .item").show(),ntNotification.showError("Произошла ошибка"))},beforeSubmit:function(){Notifier.showIndicator("comment_wrap",!1)}}),!1},rules:t.rules,messages:t.messages,focusInvalid:!1,focusCleanup:!0})},validateForm:function(e){var t=this;e.validate({showErrors:t.showErrors,unhighlight:t.unhighlight,highlight:t.highlight,submitHandler:function(e){return Notifier.showIndicator("comment_form",!1),$(e).ajaxSubmit({dataType:"json",success:function(e){if(Notifier.hideIndicator("comment_form",!1),e.success){if($("#comment_form").hide(),$(".answer-form").remove(),!e.approved)return void t.notApprovedNotification();if(e.isNew){if(e.parent?$("#comment_wrap .all-comments #item-"+e.parent).parent().append(e.comment):$("#comment_wrap .all-comments").prepend(e.comment),t.cleanForm(),0!=$("#comment_wrap .no-comments").length)$("#comment_wrap .no-comments").replaceWith('<h2 class="not_scroll">Комментарии</h2>'),$("#comment_wrap .bold_sep").html("<hr/>");else if(0!=$("#comment_wrap .is_scroll").length){var n=$("#comment_wrap .is_scroll .per_page"),i=$("#comment_wrap .is_scroll .total"),o=parseInt(n.text())+1,a=parseInt(i.text())+1;i.html(a),n.html(o)}}else $(".all-comments #item-"+e.item).parent().replaceWith(e.comment);"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents()}else e.captchaFaild?(t.reloadCaptcha(),t.captchaError()):($(".comment_wrap .item").show(),ntNotification.showError("Произошла ошибка"))},beforeSubmit:function(){Notifier.showIndicator("comment_wrap",!1)}}),!1},rules:t.rules,messages:t.messages,focusInvalid:!1,focusCleanup:!0}),Visitor.bindInputCharCounter()},validateWidgetForm:function(e){var t=this;e.validate({showErrors:t.showErrors,unhighlight:t.unhighlight,highlight:t.highlight,submitHandler:function(e){return Notifier.showIndicator("comment_form",!1),$(e).ajaxSubmit({dataType:"json",success:function(e,n,i){if(Notifier.hideIndicator("comment_form",!1),e.success){if(!e.approved)return t.cleanForm(),t.notApprovedNotification(),void(e.parent?$("#comment_form").parent().hide():t.toggleBlock(t.id,"add"));if(e.isNew){$("#comment_form").parent().hide(),$("i.up-arrow").remove(),$("#comment .no-entry").remove();var o=$(e.comment);if(e.parent){var a=$("#comment .all-comments #item-"+e.parent).parent();a.append(o),t.prepareOutput(a,!1)}else t.toggleBlock(t.id,"add"),o.find(".answer-btn").click(function(){t.getAnswer(this)}),$("#comment .all-comments").prepend(o);t.cleanForm(),"undefined"==typeof CommentsUser&&t.reloadCaptcha()}else{var r=$("#comment .all-comments #item-"+e.item);r.parent().find("#comment_form").remove();var o=$(e.comment);o.find(".answer-btn").click(function(){t.getAnswer(this)}),r.replaceWith(o)}"undefined"!=typeof CommentsUser&&CommentsUser.reloadEvents()}else e.captchaFaild?(t.reloadCaptcha(),t.captchaError()):($(".comment_wrap .item").show(),ntNotification.showError("Произошла ошибка"))},beforeSubmit:function(){Notifier.showIndicator("comment_wrap",!1)}}),!1},rules:t.rules,messages:t.messages,focusInvalid:!1,focusCleanup:!0}),Visitor.bindInputCharCounter()},captchaError:function(){$("#comment_form #captcha-input").val("").addClass("error"),$("#comment_form #captcha-element").append('<ul class="errors"><li>'+view.translate("Неверно введены символы, указанные на картинке.")+"</li></ul>")},cleanForm:function(){$('#comment_form input[type="text"], #comment_form textarea').val(""),$("#comment_form #captcha-input").val("")},rules:{name:{required:!0,maxlength:40},commenttext:{required:!0,maxlength:3e3},"captcha[input]":{required:!0,minlength:6,maxlength:6}},messages:{name:{required:view.translate("Обязательное поле"),maxlength:view.translate("Максимальная длина")+" 40 "+view.translate("символов")},commenttext:{required:view.translate("Обязательное поле"),maxlength:view.translate("Максимальная длина")+" 3000 "+view.translate("символов")},"captcha[input]":{required:view.translate("Обязательное поле"),maxlength:view.translate("Введено не")+" 6 "+view.translate("символов"),minlength:view.translate("Введено не")+" 6 "+view.translate("символов")}},reloadCaptcha:function(){"undefined"==typeof CommentsUser&&$.post("/comment/load/captcha",function(e){e.success?($("#comment_form #captcha-element img").attr("src",e.image),$("#comment_form #captcha-id").val(e.captcha)):ntNotification.showError("Произошла ошибка")},"json")},notApprovedNotification:function(){ntNotification.showSuccess(view.translate("comment_is_not_approved"),6e3)}},Comments=new Comments}),function(e,t){"use strict";e(document).on("click",".js-cancel-window, .window .close",function(){return e.magnificPopup.close(),!1}),e(document).ready(function(){e.magnificPopup.defaults.gallery.tCounter="%curr% "+t.view.translate("из")+" %total%"});var n={loaded:function(){},parseItem:function(){},beforeOpen:function(){},open:function(){},close:function(){},imageLoaded:function(){},change:function(){},type:"inline"},i={openHtmlAjax:function(i,o){o=o||{},o=e.extend({},n,o),e.magnificPopup.open({tLoading:'<img src="//s.siteapi.org/frontend/static/grid_9/img/preloader-c6f1ad4957.gif">',items:{type:"ajax",src:i},ajax:{settings:o.opts,tError:o.error},removalDelay:300,mainClass:"mfp-fade",showCloseBtn:!1,fixedContentPos:!0,callbacks:{beforeOpen:function(){e(document).trigger("modal:beforeOpen"),e("html").addClass("modal-open"),o.beforeOpen()},parseAjax:function(t){e(document).trigger("modal:open"),o.loaded(t,this)},ajaxContentAdded:function(){e(".mfp-content").addClass("site-popup"),o.open()},close:function(){e("html").removeClass("modal-open"),t.history.pushState("",document.title,t.location.pathname),e(document).trigger("modal:close")}}})},update:function(){e.magnificPopup.instance.updateItemHTML()},imageGallery:function(i,o){o=o||{},o=e.extend({},n,o),i.magnificPopup({type:"image",fixedContentPos:!0,callbacks:{beforeOpen:function(){e(document).trigger("modal:beforeOpen"),e("html").addClass("modal-open"),o.beforeOpen()},open:function(){e(document).trigger("modal:open"),o.open(this.items)},close:function(){e("html").removeClass("modal-open"),t.history.pushState("",document.title,t.location.pathname),o.close(),e(document).trigger("modal:close")}},gallery:{enabled:!0,preload:[1,4]}})},item:function(t,i){i=i||{},i=e.extend({},n,i),e.magnificPopup.open({type:i.type,fixedContentPos:!0,items:{src:t},callbacks:{beforeOpen:function(){e(document).trigger("modal:beforeOpen"),e("html").addClass("modal-open"),i.beforeOpen()},open:function(){e(document).trigger("modal:open"),i.open(this.items)},close:function(){e("html").removeClass("modal-open"),i.close(),e(document).trigger("modal:close")}}})},openListImages:function(i,o,a,r){r=r||{},r=e.extend({beforeNext:function(){return!0},beforePrev:function(){return!0}},n,r),e.magnificPopup.open({items:i,type:"image",fixedContentPos:!0,callbacks:{beforeOpen:function(){e(document).trigger("modal:beforeOpen"),e("html").addClass("modal-open"),r.beforeOpen()},open:function(){this.next=function(){r.beforeNext(this)&&e.magnificPopup.proto.next.call(this)},this.prev=function(){r.beforePrev(this)&&e.magnificPopup.proto.prev.call(this)},e(document).trigger("modal:open"),r.open(this)},close:function(){e("html").removeClass("modal-open"),t.history.pushState("",document.title,t.location.pathname),r.close(),e(document).trigger("modal:close")},imageLoadComplete:function(){r.imageLoaded(this.currItem,this.items)},change:function(){r.change(this.currItem,this,this.direction)}},image:{verticalFit:!1,markup:o},gallery:{enabled:!0,preload:[1,4]}},a)},openHtml:function(i,o,a){var r;a=!!_.isUndefined(a)||a,r=a?e(i).wrap('<div class="window"></div>').parent():e(i),o=o||{},o=e.extend({},n,o),e.magnificPopup.open({tLoading:'<img src="//s.siteapi.org/frontend/static/grid_9/img/preloader-c6f1ad4957.gif">',items:{src:r,type:"inline"},removalDelay:300,mainClass:"mfp-fade",fixedContentPos:!0,showCloseBtn:!1,callbacks:{beforeOpen:function(){e(document).trigger("modal:beforeOpen"),e("html").addClass("modal-open"),o.beforeOpen()},open:function(){e(document).trigger("modal:open"),o.open()},close:function(){e("html").removeClass("modal-open"),t.history.pushState("",document.title,t.location.pathname),o.close(),e(document).trigger("modal:close")}}})},showLoader:function(){e("body").prepend('<div class="-screen-loader"><div><div class="-screen-loader-img"><img src="//s.siteapi.org/frontend/static/grid_9/img/preloader-c6f1ad4957.gif"></div></div></div>')},hideLoader:function(){e("body > .-screen-loader").remove()},close:function(){e.magnificPopup.close()}};t.Nethouse=t.Nethouse||{},t.Nethouse.Modal=i}(window.$,window),$(document).ready(function(){var e,t=$(".notify-line");t.length&&(e=$("<style> .goog-te-banner-frame { top: "+t.height()+"px; } </style>"),$("head").append(e),$(".notify-line__close").on("click",function(){var n=new Date;return n.setMinutes(n.getMinutes()+5),document.cookie="notify_line=1; path=/; expires="+n.toUTCString(),t.remove(),$(".notify-line__height").remove(),e.remove(),!1}))});var ntNotification={templates:{},notifications:[],getTemplate:function(e,t){var n=this;this.templates[e]?t(n.templates[e]):$.get("/html/ru_RU/utils/notification.html",function(i){n.templates[e]=i,t(n.templates[e])})},getTop:function(e){return parseInt(e.css("top").replace("px",""))},moveAll:function(e,t){var n=this;_.forEach(n.notifications,function(i,o){if(o>=e)if(e!=o){var a=n.notifications[o-1].elm;t=t+a.outerHeight()+5,i.elm.animate({top:t+"px"},200)}else i.elm.animate({top:t+"px"},200)})},deleteNotification:function(e,t){var n=this,i=_.indexOf(n.notifications,e),o=n.getTop(e.elm);e.timeout&&clearTimeout(e.timeout),n.notifications=_.without(n.notifications,e),e.elm.stop(!0,!0),t?e.elm.animate({left:e.elm.width()+"px",opacity:0},200,function(){e.elm.remove(),n.moveAll(i,o)}):e.elm.animate({top:o-e.elm.outerHeight()+"px",opacity:0},200,function(){e.elm.remove(),n.moveAll(i,o)})},shake:function(e){for(var t=0;t<6;t++)$(e).animate({"margin-left":t%2==0?5:-5},{duration:70,queue:!0});$(e).animate({"margin-left":0},70)},getPageX:function(e){var t=0;if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){t=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX}else"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(t=e.pageX);return t},show:function(e,t,n){var i=this,o=CryptoJS.SHA1(t).toString(),a=_.findWhere(i.notifications,{id:o}),r=!_.isUndefined(n)&&n;if(a){if(a.elm.stop(!0,!0),i.shake(a.elm),a.timeout){clearTimeout(a.timeout);var s=a.elm.find(".-notification-timer");s.stop(!0,!0),s.css({width:""}),s.animate({width:0},a.time),a.timeout=setTimeout(function(){i.deleteNotification(a)},a.time)}}else this.getTemplate(e,function(a){window.view&&window.view.translate&&(t=window.view.translate(t));var s={id:o,elm:$(_.template(a)({type:e,message:t,hasTimer:r}))};if(s.elm.data("id",o),i.notification_box||(i.notification_box=$('<div class="-notification-box"></div>'),$(document).on("click",".-notification-close, .-notification-box .-notification-icon",function(){var e=_.findWhere(i.notifications,{id:$(this).parent().eq(0).data("id")});e&&i.deleteNotification(e)}),$(document).on("touchstart",".-notification",function(e){var t=_.findWhere(i.notifications,{id:$(this).data("id")});t.elm.css("left",0);var n=i.getPageX(e),o=t.elm.offset();$(document).on("touchmove.notification",function(e){var a=i.getPageX(e),r=a-n;r>0?t.elm.css({left:r+"px"}):o.left<a?n=a:$(document).off("touchmove.notification touchend.notification"),r>100&&($(document).off("touchmove.notification touchend.notification"),i.deleteNotification(t,!0))}),$(document).on("touchend.notification",".-notification",function(){t.elm&&t.elm.css({left:0}),$(document).off("touchmove.notification touchend.notification")})}),i.notification_box.css({top:0}),$("body").append(i.notification_box)),s.elm.css({opacity:0,top:0}),i.notification_box.append(s.elm),0!=i.notifications.length){
5==i.notifications.length&&i.deleteNotification(i.notifications[i.notifications.length-1]);var c,d=function(){};_.forEach(i.notifications,function(e,t){if(t==i.notifications.length-1&&(d=function(){s.elm.animate({opacity:1},{duration:100,queue:!0})}),0!=t){var n=i.notifications[t-1].elm;c=c+n.outerHeight()+5,e.elm.animate({top:c+"px"},100,d)}else c=s.elm.outerHeight()+5,e.elm.animate({top:c+"px"},100,d)})}else s.elm.animate({opacity:1},100);i.notifications.unshift(s),r&&(s.time=n,s.elm.find(".-notification-timer").animate({width:0},n),s.timeout=setTimeout(function(){i.deleteNotification(s)},s.time))})},showError:function(e,t){t=_.isUndefined(t)?5e3:t,this.showMessage(e,"error",t)},showWarning:function(e,t){t=!0===t&&5e3||t,this.showMessage(e,"warning",t)},showSuccess:function(e,t){t=_.isUndefined(t)?5e3:t,this.showMessage(e,"success",t)},showMessage:function(e,t,n){var i=this;if(t=t||"error",n=_.isUndefined(n)?"warning"==t?0:5e3:n,/^\/[a-z]+/.test(e)){var o=$("body").data("lang");$.get("/html/"+o+e,function(e){i.show(t,e,n)})}else i.show(t,e,n)}};!function(e,t,n,i,o){"use strict";e.validator.addMethod("cMaxlength",e.validator.methods.maxlength,i.translate("Длина поля должна быть до {0} символов")),e.validator.addMethod("required",e.validator.methods.required,i.translate("Обязательное поле")),e.validator.addMethod("cRequired",e.validator.methods.required,i.translate("Обязательное поле")),e.validator.addMethod("identity",function(e,t){var n=e.trim();return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},i.translate("Введите корректный email")),e.validator.addMethod("email",e.validator.methods.identity,i.translate("Пожалуйста, введите правильный эл. адрес")),e.validator.addMethod("cMinCurrency",e.validator.methods.min,e.validator.format(i.translate("Минимальная сумма платежа - {0}руб."))),e.validator.addMethod("phone",function(e,t){var n=e.trim();return this.optional(t)||/^[+]?(\d)+$/i.test(n)},i.translate("Только цифры и +. Пример: +79123456789")),e.validator.addClassRules({"dynamic-form-required":{cRequired:!0},"dynamic-form-text":{cMaxlength:100},"dynamic-form-textarea":{cMaxlength:1e3},"dynamic-form-phone":{phone:!0},"dynamic-form-email":{identity:!0},"dynamic-form-money":{cMinCurrency:0}});var a=function(e,t){this.type=e,this.options=t||{},this.selector=".dynamic-form-"+e,this.btnSelector=".dynamic-form-button-"+e};a.getSubmitHash=function(e){return{0:"thankyou-form-0",1:"thankyou-form-1",3:"thankyou-lead-form",5:"thankyou-lead-form"}[e]},t.extend(a,{formIsShow:function(t){e(document).trigger("dynamic-form-show."+t)},types:{FORM_TYPE_FEEDBACK:0,FORM_TYPE_CALLBACK:1,FORM_TYPE_ORDER:2,FORM_TYPE_LEAD:3,FORM_TYPE_PAY:4,FORM_TYPE_LEAD_MRB:5},tooltipError:{trigger:"custom",theme:"tooltipster-error",speed:0,positionTracker:!0,offsetY:-6,position:"top"}}),t.extend(a.prototype,{init:function(){var t=e(this.selector);e(document).on("dynamic-form-show."+this.type,function(){o.setTimeout(function(){this.addButtonEvent(),this.validateForm()}.bind(this),100)}.bind(this)),t.length&&(this.addButtonEvent(),this.validateForm())},destroy:function(){e(document).off("dynamic-form-show."+this.type),e(this.btnSelector).off("click")},addButtonEvent:function(){var t=this;e(this.btnSelector).on("click",function(){e(this).parent().parent().find(t.selector).submit()})},processErrors:function(e,n){return t.reduce(e,function(e,i){return e.concat(t.map(i,function(e,i){return{element:n.find("[name="+i+"]"),message:t.values(e)[0]}}))},[])},validateForm:function(){var r=e(this.selector),s=this;r.each(function(){var r=e(this),c=r.validate({submitHandler:function(){if("function"==typeof s.options.beforeSubmit&&s.options.beforeSubmit(),r.locked)return!1;r.locked=!0,r.ajaxSubmit({dataType:s.options.dataType||"json",success:function(e,t,d){var l,u;if(r.locked=!1,"function"==typeof s.options.afterSubmit&&s.options.afterSubmit(e),!1===e.success)return void(e.errors?(l=s.processErrors(e.errors,r),c.errorList=l,c.showErrors()):(l=e.msg||i.translate("Ошибка при отправке формы"),n.showError(l)));r[0].reset(),n.showSuccess(i.translate("Форма успешно отправлена")),o.history.pushState("",document.title,o.location.pathname),(u=a.getSubmitHash(s.type))&&(o.location.hash=u)},error:function(e,t,n){this.success({success:!1,msg:n},t,e)}})},focusInvalid:!1,focusCleanup:!1,showErrors:function(n,i){var o=r.find("input, textarea"),s=r.hasClass("js-no-tooltip");o.each(function(){var t=e(this);t.removeClass("error").addClass("valid"),t.siblings(".errors").remove(),t.hasClass("tooltipstered")&&t.tooltipster("hide")}),t.forEach(i,function(t){var n,i=e(t.element);s?(n=e('<ul class="errors">'),n.append(e("<li>").text(t.message)),i.is('[type="checkbox"]')?i.next("label").after(n):i.after(n)):(i.hasClass("tooltipstered")||i.tooltipster(a.tooltipError),i.tooltipster("content",t.message),i.tooltipster("show")),i.removeClass("valid").addClass("error")})}})})}}),o.Nethouse=o.Nethouse||{},o.Nethouse.DynamicForm=a}(window.$,window._,window.ntNotification,window.view,window),function(e,t){"use strict";setTimeout(function(){e(document).ready(function(){new t(t.types.FORM_TYPE_LEAD_MRB,{dataType:"text",afterSubmit:function(){window.location.hash="lead-form-send"}}).init()})},1e3)}(window.$,window.Nethouse.DynamicForm),function(e){var t;t=function(t){var n=this;n.element=e(t),n.init()},e.extend(t.prototype,{init:function(){var e=this;e.currentForm=e.element.find("form"),e.formId=e.currentForm.attr("id"),e.loadEvents(),e.addValidateMethods(),e.initFormValidate()},loadEvents:function(){var t=this;e(document).on("click","#"+t.formId+" .payments",t.submitHandler.bind(t))},addValidateMethods:function(){e.validator.addMethod("required",e.validator.methods.required,view.translate("Обязательное поле")),e.validator.addMethod("email",e.validator.methods.email,view.translate("Пожалуйста, введите правильный эл. адрес")),e.validator.addMethod("maxlength",e.validator.methods.maxlength,e.validator.format(view.translate("Пожалуйста, не вводите более {0} символов"))),e.validator.addMethod("min",e.validator.methods.min,e.validator.format(view.translate("Минимальная сумма платежа - {0}руб.")))},initFormValidate:function(){var t=this;e(document).ready(function(){t.validation=e("#"+t.formId).validate(t)})},submitHandler:function(){var t,n=this,i=e("#"+n.formId),o=i.attr("action"),a=i.serialize();i.valid()&&e.post(o,a,function(i){if(!1===i.success)throw i.errors?(_.forEach(i.errors,function(e,t,n){n[t]=_.reduce(e,function(e,t){return[e,t].join("\n")},"")}),n.validation.showErrors(i.errors),_.uniq(_.values(i.errors)).join("")):(t="Ошибка при обработке формы оплаты",ntNotification.showError(t)),Error(t);i.paymentType=a.match(/payment=(.*)/)[1];var o=document.createElement("form");o.setAttribute("action","https://money.yandex.ru/eshop.xml"),o.setAttribute("method","POST"),_.forEach(i,function(e,t){var n=document.createElement("input");n.type="hidden",n.name=t,n.setAttribute("value",e),o.appendChild(n)}),e("body").append(o),o.submit()},"json")}}),setTimeout(function(){e(document).ready(function(){_.map(e(".mrb-form_payment"),function(e){new t(e)})})},1e3)}(jQuery),function(e,t){"use strict";e(document).ready(function(){new t(t.types.FORM_TYPE_LEAD).init()})}(window.$,window.Nethouse.DynamicForm),function(e){function t(n){var i={url:"",name:"",size:0,timestamp:0,type:t.TYPE_IMAGE};n=e.extend({},i,n),this.url=n.url,this.name=n.name,this.size=n.size,this.timestamp=n.timestamp,this.type=n.type}window.Nethouse=window.Nethouse||{};var n=window.Nethouse;t.TYPE_IMAGE=1,t.prototype.properties=["url","name","size","timestamp","type"],t.prototype.toInputFields=function(e,t){var n=document.createElement("input"),i=document.createElement("div");return i.className="js-file-fields js-file-fields_"+e,n.className="js-file-field",n.type="hidden",this.properties.forEach(function(o){n.name=t+"["+e+"]["+o+"]",n.value=this[o],i.appendChild(n),n=n.cloneNode(!0)}.bind(this)),i},n.FileModel=t}(window._),function(){function e(e,t){this.filters=[],this.path=t.path,this.maxFiles=t.maxFiles||0,this.fieldName=t.fieldName||"file",this.beforeUpload=this.beforeUpload||function(){};var n=document.createElement("input");n.name="files",n.type="file",t.multiple&&(n.multiple="multiple"),e.appendChild(n),e.className+=" fileapi",this.events={},window.FileAPI.event.on(n,"change",this.inputChanges.bind(this))}function t(t,n){n=window.FileAPI.extend({path:"/putimg"},n),e.call(this,t,n)}window.Nethouse=window.Nethouse||{};var n=1e4,i=window.Nethouse;e.Errors={MAX_SIZE:1,MIN_SIZE:2,EXTENSION:3,MAX_WIDTH:4,MAX_HEIGHT:5,MIN_WIDTH:6,MIN_HEIGHT:7,MAX_FILES_COUNT:8},e.MB=FileAPI.MB,e.KB=FileAPI.KB,e.prototype.call=function(e){var t=Array.prototype.slice.call(arguments,1);this.events[e]&&this.events[e].forEach(function(e){e.apply(this,t)}.bind(this))},e.prototype.on=function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this},e.prototype.inputChanges=function(t){var n=window.FileAPI,i=n.getFiles(t);n.filterFiles(i,function(e,t){for(var n=0;n<this.filters.length;n++)if(!this.filters[n](e,t))return!1;return!0}.bind(this),function(t,i){if(this.call("before",t,i),t.length){this.maxFiles&&t.length>this.maxFiles&&(this.call("error",e.Errors.MAX_FILES_COUNT,{filesCount:t.length,maxFilesCount:this.maxFiles}),t=t.slice(0,this.maxFiles)),this.beforeUpload(t,i);var o={url:this.path,upload:function(e,t){this.call("upload",e,t)}.bind(this),progress:function(e,t,n,i){this.call("progress",e,t,n,i)}.bind(this),filecomplete:function(e,t,n,i){this.call("filecomplete",e,t,n,i)}.bind(this),complete:function(e,t){this.call("complete",e,t)}.bind(this)};o.files={},o.files[this.fieldName]=t,n.upload(o)}}.bind(this)),n.reset(t.currentTarget)},e.prototype.addFileSizeFilter=function(t,n){return n=n||0,this.filters.push(function(i){return i.size>t?(this.call("error",e.Errors.MAX_SIZE,{file:i,maxSize:t}),!1):!(i.size<n)||(this.call("error",e.Errors.MIN_SIZE,{file:i,minSize:n}),!1)}.bind(this)),this},e.prototype.addExtensionFilter=function(t){var n=new RegExp("^.+\\.("+t.join("|")+")$","i");return this.filters.push(function(t){return!!n.test(t.name)||(this.call("error",e.Errors.EXTENSION,{file:t}),!1)}.bind(this)),this},i=i||{},i.Uploader=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.addMaxSizeFilter=function(t,n){return this.filters.push(function(i,o){return t&&o.width>t?(this.call("error",e.Errors.MAX_WIDTH,{file:i,width:o.width,maxWidth:t}),!1):!(n&&o.height>n)||(this.call("error",e.Errors.MAX_HEIGHT,{file:i,height:o.height,maxHeight:n}),!1)}.bind(this)),this},t.prototype.addMinSizeFilter=function(t,n){return this.filters.push(function(i,o){return t&&o.width<t?(this.call("error",e.Errors.MIN_WIDTH,{file:i,width:o.width,minWidth:t}),!1):!(n&&o.height<n)||(this.call("error",e.Errors.MIN_HEIGHT,{file:i,height:o.height,minHeight:n}),!1)}.bind(this)),this},t.prototype.preview=function(e,t,n){return this.previewSize={width:e,height:t},this.events.progress=[function(e,t){var n=document.querySelectorAll(".upload-image_"+t.id+" .upload-image__progress")[0],i=e.loaded/e.total*100;n&&i<90&&(n.style.top=e.loaded/e.total*100+"%")}],this.events.filecomplete=[function(e,t,n){var i=document.querySelectorAll(".upload-image_"+n.id)[0];if(i){if(e)return void(i.className+=" upload-image_fail");i.className+=" upload-image_uploaded",i.querySelectorAll(".upload-image__progress")[0].style.top="100%"}}],this.events.preview=n,this},t.prototype.beforeUpload=function(e){if(this.events.preview){var t=window.FileAPI;t.each(e,function(e){e.id=n++,t.Image(e).preview(this.previewSize.width,this.previewSize.height).get(function(t,n){var i=document.createElement("div");i.className="upload-image upload-image_"+e.id,i.innerHTML='<div class="upload-image__progress"></div><div class="upload-image-file__status"></div>',i.appendChild(n),this.events.preview(i,e.id)}.bind(this))}.bind(this))}},i.ImageUploader=t}(),function(e){"use strict";var t={init:function(){this.addMobileSelector()},addMobileSelector:function(){!0===isMobile.any&&e("body").addClass("mobile-device")}};e(document).ready(function(){t.init()})}(jQuery);
/* http://keith-wood.name/countdown.html
   Countdown for jQuery v1.6.3.
   Written by Keith Wood (kbwood{at}iinet.com.au) January 2008.
   Available under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license. 
   Please attribute the author if you use it. */
(function($){function Countdown(){this.regional=[];this.regional['']={labels:['Years','Months','Weeks','Days','Hours','Minutes','Seconds'],labels1:['Year','Month','Week','Day','Hour','Minute','Second'],compactLabels:['y','m','w','d'],whichLabels:null,digits:['0','1','2','3','4','5','6','7','8','9'],timeSeparator:':',isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:'dHMS',layout:'',compact:false,significant:0,description:'',expiryUrl:'',expiryText:'',alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};$.extend(this._defaults,this.regional['']);this._serverSyncs=[];var c=(typeof Date.now=='function'?Date.now:function(){return new Date().getTime()});var d=(window.performance&&typeof window.performance.now=='function');function timerCallBack(a){var b=(a<1e12?(d?(performance.now()+performance.timing.navigationStart):c()):a||c());if(b-f>=1000){x._updateTargets();f=b}e(timerCallBack)}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var f=0;if(!e||$.noRequestAnimationFrame){$.noRequestAnimationFrame=null;setInterval(function(){x._updateTargets()},980)}else{f=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||c();e(timerCallBack)}}var Y=0;var O=1;var W=2;var D=3;var H=4;var M=5;var S=6;$.extend(Countdown.prototype,{markerClassName:'hasCountdown',propertyName:'countdown',_rtlClass:'countdown_rtl',_sectionClass:'countdown_section',_amountClass:'countdown_amount',_rowClass:'countdown_row',_holdingClass:'countdown_holding',_showClass:'countdown_show',_descrClass:'countdown_descr',_timerTargets:[],setDefaults:function(a){this._resetExtraLabels(this._defaults,a);$.extend(this._defaults,a||{})},UTCDate:function(a,b,c,e,f,g,h,i){if(typeof b=='object'&&b.constructor==Date){i=b.getMilliseconds();h=b.getSeconds();g=b.getMinutes();f=b.getHours();e=b.getDate();c=b.getMonth();b=b.getFullYear()}var d=new Date();d.setUTCFullYear(b);d.setUTCDate(1);d.setUTCMonth(c||0);d.setUTCDate(e||1);d.setUTCHours(f||0);d.setUTCMinutes((g||0)-(Math.abs(a)<30?a*60:a));d.setUTCSeconds(h||0);d.setUTCMilliseconds(i||0);return d},periodsToSeconds:function(a){return a[0]*31557600+a[1]*2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_attachPlugin:function(a,b){a=$(a);if(a.hasClass(this.markerClassName)){return}var c={options:$.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};a.addClass(this.markerClassName).data(this.propertyName,c);this._optionPlugin(a,b)},_addTarget:function(a){if(!this._hasTarget(a)){this._timerTargets.push(a)}},_hasTarget:function(a){return($.inArray(a,this._timerTargets)>-1)},_removeTarget:function(b){this._timerTargets=$.map(this._timerTargets,function(a){return(a==b?null:a)})},_updateTargets:function(){for(var i=this._timerTargets.length-1;i>=0;i--){this._updateCountdown(this._timerTargets[i])}},_optionPlugin:function(a,b,c){a=$(a);var d=a.data(this.propertyName);if(!b||(typeof b=='string'&&c==null)){var e=b;b=(d||{}).options;return(b&&e?b[e]:b)}if(!a.hasClass(this.markerClassName)){return}b=b||{};if(typeof b=='string'){var e=b;b={};b[e]=c}if(b.layout){b.layout=b.layout.replace(/&lt;/g,'<').replace(/&gt;/g,'>')}this._resetExtraLabels(d.options,b);var f=(d.options.timezone!=b.timezone);$.extend(d.options,b);this._adjustSettings(a,d,b.until!=null||b.since!=null||f);var g=new Date();if((d._since&&d._since<g)||(d._until&&d._until>g)){this._addTarget(a[0])}this._updateCountdown(a,d)},_updateCountdown:function(a,b){var c=$(a);b=b||c.data(this.propertyName);if(!b){return}c.html(this._generateHTML(b)).toggleClass(this._rtlClass,b.options.isRTL);if($.isFunction(b.options.onTick)){var d=b._hold!='lap'?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date());if(b.options.tickInterval==1||this.periodsToSeconds(d)%b.options.tickInterval==0){b.options.onTick.apply(a,[d])}}var e=b._hold!='pause'&&(b._since?b._now.getTime()<b._since.getTime():b._now.getTime()>=b._until.getTime());if(e&&!b._expiring){b._expiring=true;if(this._hasTarget(a)||b.options.alwaysExpire){this._removeTarget(a);if($.isFunction(b.options.onExpiry)){b.options.onExpiry.apply(a,[])}if(b.options.expiryText){var f=b.options.layout;b.options.layout=b.options.expiryText;this._updateCountdown(a,b);b.options.layout=f}if(b.options.expiryUrl){window.location=b.options.expiryUrl}}b._expiring=false}else if(b._hold=='pause'){this._removeTarget(a)}c.data(this.propertyName,b)},_resetExtraLabels:function(a,b){var c=false;for(var n in b){if(n!='whichLabels'&&n.match(/[Ll]abels/)){c=true;break}}if(c){for(var n in a){if(n.match(/[Ll]abels[02-9]|compactLabels1/)){a[n]=null}}}},_adjustSettings:function(a,b,c){var d;var e=0;var f=null;for(var i=0;i<this._serverSyncs.length;i++){if(this._serverSyncs[i][0]==b.options.serverSync){f=this._serverSyncs[i][1];break}}if(f!=null){e=(b.options.serverSync?f:0);d=new Date()}else{var g=($.isFunction(b.options.serverSync)?b.options.serverSync.apply(a,[]):null);d=new Date();e=(g?d.getTime()-g.getTime():0);this._serverSyncs.push([b.options.serverSync,e])}var h=b.options.timezone;h=(h==null?-d.getTimezoneOffset():h);if(c||(!c&&b._until==null&&b._since==null)){b._since=b.options.since;if(b._since!=null){b._since=this.UTCDate(h,this._determineTime(b._since,null));if(b._since&&e){b._since.setMilliseconds(b._since.getMilliseconds()+e)}}b._until=this.UTCDate(h,this._determineTime(b.options.until,d));if(e){b._until.setMilliseconds(b._until.getMilliseconds()+e)}}b._show=this._determineShow(b)},_destroyPlugin:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}this._removeTarget(a[0]);a.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(a){this._hold(a,'pause')},_lapPlugin:function(a){this._hold(a,'lap')},_resumePlugin:function(a){this._hold(a,null)},_hold:function(a,b){var c=$.data(a,this.propertyName);if(c){if(c._hold=='pause'&&!b){c._periods=c._savePeriods;var d=(c._since?'-':'+');c[c._since?'_since':'_until']=this._determineTime(d+c._periods[0]+'y'+d+c._periods[1]+'o'+d+c._periods[2]+'w'+d+c._periods[3]+'d'+d+c._periods[4]+'h'+d+c._periods[5]+'m'+d+c._periods[6]+'s');this._addTarget(a)}c._hold=b;c._savePeriods=(b=='pause'?c._periods:null);$.data(a,this.propertyName,c);this._updateCountdown(a,c)}},_getTimesPlugin:function(a){var b=$.data(a,this.propertyName);return(!b?null:(b._hold=='pause'?b._savePeriods:(!b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date()))))},_determineTime:function(k,l){var m=function(a){var b=new Date();b.setTime(b.getTime()+a*1000);return b};var n=function(a){a=a.toLowerCase();var b=new Date();var c=b.getFullYear();var d=b.getMonth();var e=b.getDate();var f=b.getHours();var g=b.getMinutes();var h=b.getSeconds();var i=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var j=i.exec(a);while(j){switch(j[2]||'s'){case's':h+=parseInt(j[1],10);break;case'm':g+=parseInt(j[1],10);break;case'h':f+=parseInt(j[1],10);break;case'd':e+=parseInt(j[1],10);break;case'w':e+=parseInt(j[1],10)*7;break;case'o':d+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break;case'y':c+=parseInt(j[1],10);e=Math.min(e,x._getDaysInMonth(c,d));break}j=i.exec(a)}return new Date(c,d,e,f,g,h,0)};var o=(k==null?l:(typeof k=='string'?n(k):(typeof k=='number'?m(k):k)));if(o)o.setMilliseconds(0);return o},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(c){var d=this;c._periods=(c._hold?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date()));var e=false;var f=0;var g=c.options.significant;var h=$.extend({},c._show);for(var i=Y;i<=S;i++){e|=(c._show[i]=='?'&&c._periods[i]>0);h[i]=(c._show[i]=='?'&&!e?null:c._show[i]);f+=(h[i]?1:0);g-=(c._periods[i]>0?1:0)}var j=[false,false,false,false,false,false,false];for(var i=S;i>=Y;i--){if(c._show[i]){if(c._periods[i]){j[i]=true}else{j[i]=g>0;g--}}}var k=(c.options.compact?c.options.compactLabels:c.options.labels);var l=c.options.whichLabels||this._normalLabels;var m=function(a){var b=c.options['compactLabels'+l(c._periods[a])];return(h[a]?d._translateDigits(c,c._periods[a])+(b?b[a]:k[a])+' ':'')};var n=function(a){var b=c.options['labels'+l(c._periods[a])];return((!c.options.significant&&h[a])||(c.options.significant&&j[a])?'<span class="'+x._sectionClass+'">'+'<span class="'+x._amountClass+'">'+d._translateDigits(c,c._periods[a])+'</span><br/>'+(b?b[a]:k[a])+'</span>':'')};return(c.options.layout?this._buildLayout(c,h,c.options.layout,c.options.compact,c.options.significant,j):((c.options.compact?'<span class="'+this._rowClass+' '+this._amountClass+(c._hold?' '+this._holdingClass:'')+'">'+m(Y)+m(O)+m(W)+m(D)+(h[H]?this._minDigits(c,c._periods[H],2):'')+(h[M]?(h[H]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[M],2):'')+(h[S]?(h[H]||h[M]?c.options.timeSeparator:'')+this._minDigits(c,c._periods[S],2):''):'<span class="'+this._rowClass+' '+this._showClass+(c.options.significant||f)+(c._hold?' '+this._holdingClass:'')+'">'+n(Y)+n(O)+n(W)+n(D)+n(H)+n(M)+n(S))+'</span>'+(c.options.description?'<span class="'+this._rowClass+' '+this._descrClass+'">'+c.options.description+'</span>':'')))},_buildLayout:function(c,d,e,f,g,h){var j=c.options[f?'compactLabels':'labels'];var k=c.options.whichLabels||this._normalLabels;var l=function(a){return(c.options[(f?'compactLabels':'labels')+k(c._periods[a])]||j)[a]};var m=function(a,b){return c.options.digits[Math.floor(a/b)%10]};var o={desc:c.options.description,sep:c.options.timeSeparator,yl:l(Y),yn:this._minDigits(c,c._periods[Y],1),ynn:this._minDigits(c,c._periods[Y],2),ynnn:this._minDigits(c,c._periods[Y],3),y1:m(c._periods[Y],1),y10:m(c._periods[Y],10),y100:m(c._periods[Y],100),y1000:m(c._periods[Y],1000),ol:l(O),on:this._minDigits(c,c._periods[O],1),onn:this._minDigits(c,c._periods[O],2),onnn:this._minDigits(c,c._periods[O],3),o1:m(c._periods[O],1),o10:m(c._periods[O],10),o100:m(c._periods[O],100),o1000:m(c._periods[O],1000),wl:l(W),wn:this._minDigits(c,c._periods[W],1),wnn:this._minDigits(c,c._periods[W],2),wnnn:this._minDigits(c,c._periods[W],3),w1:m(c._periods[W],1),w10:m(c._periods[W],10),w100:m(c._periods[W],100),w1000:m(c._periods[W],1000),dl:l(D),dn:this._minDigits(c,c._periods[D],1),dnn:this._minDigits(c,c._periods[D],2),dnnn:this._minDigits(c,c._periods[D],3),d1:m(c._periods[D],1),d10:m(c._periods[D],10),d100:m(c._periods[D],100),d1000:m(c._periods[D],1000),hl:l(H),hn:this._minDigits(c,c._periods[H],1),hnn:this._minDigits(c,c._periods[H],2),hnnn:this._minDigits(c,c._periods[H],3),h1:m(c._periods[H],1),h10:m(c._periods[H],10),h100:m(c._periods[H],100),h1000:m(c._periods[H],1000),ml:l(M),mn:this._minDigits(c,c._periods[M],1),mnn:this._minDigits(c,c._periods[M],2),mnnn:this._minDigits(c,c._periods[M],3),m1:m(c._periods[M],1),m10:m(c._periods[M],10),m100:m(c._periods[M],100),m1000:m(c._periods[M],1000),sl:l(S),sn:this._minDigits(c,c._periods[S],1),snn:this._minDigits(c,c._periods[S],2),snnn:this._minDigits(c,c._periods[S],3),s1:m(c._periods[S],1),s10:m(c._periods[S],10),s100:m(c._periods[S],100),s1000:m(c._periods[S],1000)};var p=e;for(var i=Y;i<=S;i++){var q='yowdhms'.charAt(i);var r=new RegExp('\\{'+q+'<\\}([\\s\\S]*)\\{'+q+'>\\}','g');p=p.replace(r,((!g&&d[i])||(g&&h[i])?'$1':''))}$.each(o,function(n,v){var a=new RegExp('\\{'+n+'\\}','g');p=p.replace(a,v)});return p},_minDigits:function(a,b,c){b=''+b;if(b.length>=c){return this._translateDigits(a,b)}b='0000000000'+b;return this._translateDigits(a,b.substr(b.length-c))},_translateDigits:function(b,c){return(''+c).replace(/[0-9]/g,function(a){return b.options.digits[a]})},_determineShow:function(a){var b=a.options.format;var c=[];c[Y]=(b.match('y')?'?':(b.match('Y')?'!':null));c[O]=(b.match('o')?'?':(b.match('O')?'!':null));c[W]=(b.match('w')?'?':(b.match('W')?'!':null));c[D]=(b.match('d')?'?':(b.match('D')?'!':null));c[H]=(b.match('h')?'?':(b.match('H')?'!':null));c[M]=(b.match('m')?'?':(b.match('M')?'!':null));c[S]=(b.match('s')?'?':(b.match('S')?'!':null));return c},_calculatePeriods:function(c,d,e,f){c._now=f;c._now.setMilliseconds(0);var g=new Date(c._now.getTime());if(c._since){if(f.getTime()<c._since.getTime()){c._now=f=g}else{f=c._since}}else{g.setTime(c._until.getTime());if(f.getTime()>c._until.getTime()){c._now=f=g}}var h=[0,0,0,0,0,0,0];if(d[Y]||d[O]){var i=x._getDaysInMonth(f.getFullYear(),f.getMonth());var j=x._getDaysInMonth(g.getFullYear(),g.getMonth());var k=(g.getDate()==f.getDate()||(g.getDate()>=Math.min(i,j)&&f.getDate()>=Math.min(i,j)));var l=function(a){return(a.getHours()*60+a.getMinutes())*60+a.getSeconds()};var m=Math.max(0,(g.getFullYear()-f.getFullYear())*12+g.getMonth()-f.getMonth()+((g.getDate()<f.getDate()&&!k)||(k&&l(g)<l(f))?-1:0));h[Y]=(d[Y]?Math.floor(m/12):0);h[O]=(d[O]?m-h[Y]*12:0);f=new Date(f.getTime());var n=(f.getDate()==i);var o=x._getDaysInMonth(f.getFullYear()+h[Y],f.getMonth()+h[O]);if(f.getDate()>o){f.setDate(o)}f.setFullYear(f.getFullYear()+h[Y]);f.setMonth(f.getMonth()+h[O]);if(n){f.setDate(o)}}var p=Math.floor((g.getTime()-f.getTime())/1000);var q=function(a,b){h[a]=(d[a]?Math.floor(p/b):0);p-=h[a]*b};q(W,604800);q(D,86400);q(H,3600);q(M,60);q(S,1);if(p>0&&!c._since){var r=[1,12,4.3482,7,24,60,60];var s=S;var t=1;for(var u=S;u>=Y;u--){if(d[u]){if(h[s]>=t){h[s]=0;p=1}if(p>0){h[u]++;p=0;s=u;t=1}}t*=r[u]}}if(e){for(var u=Y;u<=S;u++){if(e&&h[u]){e--}else if(!e){h[u]=0}}}return h}});var w=['getTimes'];function isNotChained(a,b){if(a=='option'&&(b.length==0||(b.length==1&&typeof b[0]=='string'))){return true}return $.inArray(a,w)>-1}$.fn.countdown=function(a){var b=Array.prototype.slice.call(arguments,1);if(isNotChained(a,b)){return x['_'+a+'Plugin'].apply(x,[this[0]].concat(b))}return this.each(function(){if(typeof a=='string'){if(!x['_'+a+'Plugin']){throw'Unknown command: '+a;}x['_'+a+'Plugin'].apply(x,[this].concat(b))}else{x._attachPlugin(this,a||{})}})};var x=$.countdown=new Countdown()})(jQuery);
/*!
 * # Semantic UI 2.2.10 - Accordion
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,n,t,i){"use strict";n="undefined"!=typeof n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(t){var o,a=e(this),s=(new Date).getTime(),r=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)};return a.each(function(){var d,g,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.accordion.settings,t):e.extend({},e.fn.accordion.settings),m=f.className,p=f.namespace,h=f.selector,v=f.error,b="."+p,y="module-"+p,C=a.selector||"",O=e(this),x=O.find(h.title),F=O.find(h.content),A=this,T=O.data(y);g={initialize:function(){g.debug("Initializing",O),g.bind.events(),f.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){T=g,O.data(y,g)},destroy:function(){g.debug("Destroying previous instance",O),O.off(b).removeData(y)},refresh:function(){x=O.find(h.title),F=O.find(h.content)},observeChanges:function(){"MutationObserver"in n&&(d=new MutationObserver(function(e){g.debug("DOM tree modified, updating selector cache"),g.refresh()}),d.observe(A,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",d))},bind:{events:function(){g.debug("Binding delegated events"),O.on(f.on+b,h.trigger,g.event.click)}},event:{click:function(){g.toggle.call(this)}},toggle:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating),s=o.hasClass(m.active),r=s&&!a,c=!s&&a;g.debug("Toggling visibility of content",t),r||c?f.collapsible?g.close.call(t):g.debug("Cannot close accordion content collapsing is disabled"):g.open.call(t)},open:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating),s=o.hasClass(m.active),r=s||a;return r?void g.debug("Accordion already open, skipping",o):(g.debug("Opening accordion content",t),f.onOpening.call(o),f.exclusive&&g.closeOthers.call(t),t.addClass(m.active),o.stop(!0,!0).addClass(m.animating),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?o.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:1},f.duration,g.resetOpacity)),void o.slideDown(f.duration,f.easing,function(){o.removeClass(m.animating).addClass(m.active),g.reset.display.call(this),f.onOpen.call(this),f.onChange.call(this)}))},close:function(n){var t=n!==i?"number"==typeof n?x.eq(n):e(n).closest(h.title):e(this).closest(h.title),o=t.next(F),a=o.hasClass(m.animating),s=o.hasClass(m.active),r=!s&&a,c=s&&a;!s&&!r||c||(g.debug("Closing accordion content",o),f.onClosing.call(o),t.removeClass(m.active),o.stop(!0,!0).addClass(m.animating),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?o.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:0},f.duration,g.resetOpacity)),o.slideUp(f.duration,f.easing,function(){o.removeClass(m.animating).removeClass(m.active),g.reset.display.call(this),f.onClose.call(this),f.onChange.call(this)}))},closeOthers:function(n){var t,o,a,s=n!==i?x.eq(n):e(this).closest(h.title),r=s.parents(h.content).prev(h.title),c=s.closest(h.accordion),l=h.title+"."+m.active+":visible",u=h.content+"."+m.active+":visible";f.closeNested?(t=c.find(l).not(r),a=t.next(F)):(t=c.find(l).not(r),o=c.find(u).find(l).not(r),t=t.not(o),a=t.next(F)),t.length>0&&(g.debug("Exclusive enabled, closing other content",t),t.removeClass(m.active),a.removeClass(m.animating).stop(!0,!0),f.animateChildren&&(e.fn.transition!==i&&O.transition("is supported")?a.children().transition({animation:"fade out",useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):a.children().stop(!0,!0).animate({opacity:0},f.duration,g.resetOpacity)),a.slideUp(f.duration,f.easing,function(){e(this).removeClass(m.active),g.reset.display.call(this)}))},reset:{display:function(){g.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){g.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(n,t){if(g.debug("Changing setting",n,t),e.isPlainObject(n))e.extend(!0,f,n);else{if(t===i)return f[n];e.isPlainObject(f[n])?e.extend(!0,f[n],t):f[n]=t}},internal:function(n,t){return g.debug("Changing internal",n,t),t===i?g[n]:void(e.isPlainObject(n)?e.extend(!0,g,n):g[n]=t)},debug:function(){!f.silent&&f.debug&&(f.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,f.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),g.verbose.apply(console,arguments)))},error:function(){f.silent||(g.error=Function.prototype.bind.call(console.error,console,f.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var n,t,i;f.performance&&(n=(new Date).getTime(),i=s||n,t=n-i,s=n,r.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":t})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var n=f.name+":",t=0;s=!1,clearTimeout(g.performance.timer),e.each(r,function(e,n){t+=n["Execution Time"]}),n+=" "+t+"ms",C&&(n+=" '"+C+"'"),(console.group!==i||console.table!==i)&&r.length>0&&(console.groupCollapsed(n),console.table?console.table(r):e.each(r,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),r=[]}},invoke:function(n,t,a){var s,r,c,l=T;return t=t||u,a=A||a,"string"==typeof n&&l!==i&&(n=n.split(/[\. ]/),s=n.length-1,e.each(n,function(t,o){var a=t!=s?o+n[t+1].charAt(0).toUpperCase()+n[t+1].slice(1):n;if(e.isPlainObject(l[a])&&t!=s)l=l[a];else{if(l[a]!==i)return r=l[a],!1;if(!e.isPlainObject(l[o])||t==s)return l[o]!==i?(r=l[o],!1):(g.error(v.method,n),!1);l=l[o]}})),e.isFunction(r)?c=r.apply(a,t):r!==i&&(c=r),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),r}},l?(T===i&&g.initialize(),g.invoke(c)):(T!==i&&T.invoke("destroy"),g.initialize())}),o!==i?o:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,n,t,i,o){return-i*(n/=o)*(n-2)+t}})}(jQuery,window,document);
/*!
 * # Semantic UI 2.2.10 - API
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,r,n){"use strict";var t="undefined"!=typeof t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(r){var o,s=e(e.isFunction(this)?t:this),i=s.selector||"",a=(new Date).getTime(),u=[],c=arguments[0],d="string"==typeof c,l=[].slice.call(arguments,1);return s.each(function(){var s,g,f,p,m,b,v=e.isPlainObject(r)?e.extend(!0,{},e.fn.api.settings,r):e.extend({},e.fn.api.settings),h=v.namespace,y=v.metadata,q=v.selector,R=v.error,x=v.className,S="."+h,A="module-"+h,k=e(this),T=k.closest(q.form),P=v.stateContext?e(v.stateContext):k,j=this,O=P[0],w=k.data(A);b={initialize:function(){d||b.bind.events(),b.instantiate()},instantiate:function(){b.verbose("Storing instance of module",b),w=b,k.data(A,w)},destroy:function(){b.verbose("Destroying previous module for",j),k.removeData(A).off(S)},bind:{events:function(){var e=b.get.event();e?(b.verbose("Attaching API events to element",e),k.on(e+S,b.event.trigger)):"now"==v.on&&(b.debug("Querying API endpoint immediately"),b.query())}},decode:{json:function(e){if(e!==n&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}},read:{cachedResponse:function(e){var r;return t.Storage===n?void b.error(R.noStorage):(r=sessionStorage.getItem(e),b.debug("Using cached response",e,r),r=b.decode.json(r))}},write:{cachedResponse:function(r,o){return o&&""===o?void b.debug("Response empty, not caching",o):t.Storage===n?void b.error(R.noStorage):(e.isPlainObject(o)&&(o=JSON.stringify(o)),sessionStorage.setItem(r,o),void b.verbose("Storing cached response for url",r,o))}},query:function(){if(b.is.disabled())return void b.debug("Element is disabled API request aborted");if(b.is.loading()){if(!v.interruptRequests)return void b.debug("Cancelling request, previous request is still pending");b.debug("Interrupting previous request"),b.abort()}return v.defaultData&&e.extend(!0,v.urlData,b.get.defaultData()),v.serializeForm&&(v.data=b.add.formData(v.data)),g=b.get.settings(),g===!1?(b.cancelled=!0,void b.error(R.beforeSend)):(b.cancelled=!1,f=b.get.templatedURL(),f||b.is.mocked()?(f=b.add.urlData(f),f||b.is.mocked()?(g.url=v.base+f,s=e.extend(!0,{},v,{type:v.method||v.type,data:p,url:v.base+f,beforeSend:v.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),b.debug("Querying URL",s.url),b.verbose("Using AJAX settings",s),"local"===v.cache&&b.read.cachedResponse(f)?(b.debug("Response returned from local cache"),b.request=b.create.request(),void b.request.resolveWith(O,[b.read.cachedResponse(f)])):void(v.throttle?v.throttleFirstRequest||b.timer?(b.debug("Throttling request",v.throttle),clearTimeout(b.timer),b.timer=setTimeout(function(){b.timer&&delete b.timer,b.debug("Sending throttled request",p,s.method),b.send.request()},v.throttle)):(b.debug("Sending request",p,s.method),b.send.request(),b.timer=setTimeout(function(){},v.throttle)):(b.debug("Sending request",p,s.method),b.send.request()))):void 0):void b.error(R.missingURL))},should:{removeError:function(){return v.hideError===!0||"auto"===v.hideError&&!b.is.form()}},is:{disabled:function(){return k.filter(q.disabled).length>0},expectingJSON:function(){return"json"===v.dataType||"jsonp"===v.dataType},form:function(){return k.is("form")||P.is("form")},mocked:function(){return v.mockResponse||v.mockResponseAsync||v.response||v.responseAsync},input:function(){return k.is("input")},loading:function(){return b.request?"pending"==b.request.state():!1},abortedRequest:function(e){return e&&e.readyState!==n&&0===e.readyState?(b.verbose("XHR request determined to be aborted"),!0):(b.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return b.is.expectingJSON()&&e.isFunction(v.successTest)?(b.debug("Checking JSON returned success",v.successTest,t),v.successTest(t)?(b.debug("Response passed success test",t),!0):(b.debug("Response failed success test",t),!1)):(b.verbose("Response is not JSON, skipping validation",v.successTest,t),!0)}},was:{cancelled:function(){return b.cancelled||!1},succesful:function(){return b.request&&"resolved"==b.request.state()},failure:function(){return b.request&&"rejected"==b.request.state()},complete:function(){return b.request&&("resolved"==b.request.state()||"rejected"==b.request.state())}},add:{urlData:function(t,r){var o,s;return t&&(o=t.match(v.regExp.required),s=t.match(v.regExp.optional),r=r||v.urlData,o&&(b.debug("Looking for required URL variables",o),e.each(o,function(o,s){var i=-1!==s.indexOf("$")?s.substr(2,s.length-3):s.substr(1,s.length-2),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];return a===n?(b.error(R.requiredParameter,i,t),t=!1,!1):(b.verbose("Found required variable",i,a),a=v.encodeParameters?b.get.urlEncodedValue(a):a,t=t.replace(s,a),void 0)})),s&&(b.debug("Looking for optional URL variables",o),e.each(s,function(o,s){var i=-1!==s.indexOf("$")?s.substr(3,s.length-4):s.substr(2,s.length-3),a=e.isPlainObject(r)&&r[i]!==n?r[i]:k.data(i)!==n?k.data(i):P.data(i)!==n?P.data(i):r[i];a!==n?(b.verbose("Optional variable Found",i,a),t=t.replace(s,a)):(b.verbose("Optional variable not found",i),t=-1!==t.indexOf("/"+s)?t.replace("/"+s,""):t.replace(s,""))}))),t},formData:function(t){var r,o=e.fn.serializeObject!==n,s=o?T.serializeObject():T.serialize();return t=t||v.data,r=e.isPlainObject(t),r?o?(b.debug("Extending existing data with form data",t,s),t=e.extend(!0,{},t,s)):(b.error(R.missingSerialize),b.debug("Cant extend data. Replacing data with form data",t,s),t=s):(b.debug("Adding form data",s),t=s),t}},send:{request:function(){b.set.loading(),b.request=b.create.request(),b.is.mocked()?b.mockedXHR=b.create.mockedXHR():b.xhr=b.create.xhr(),v.onRequest.call(O,b.request,b.xhr)}},event:{trigger:function(e){b.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,r,n){var o=this,s=(new Date).getTime()-m,i=v.loadingDuration-s,a=e.isFunction(v.onResponse)?b.is.expectingJSON()?v.onResponse.call(o,e.extend(!0,{},t)):v.onResponse.call(o,t):!1;i=i>0?i:0,a&&(b.debug("Modified API response in onResponse callback",v.onResponse,a,t),t=a),i>0&&b.debug("Response completed early delaying state change by",i),setTimeout(function(){b.is.validResponse(t)?b.request.resolveWith(o,[t,n]):b.request.rejectWith(o,[n,"invalid"])},i)},fail:function(e,t,r){var n=this,o=(new Date).getTime()-m,s=v.loadingDuration-o;s=s>0?s:0,s>0&&b.debug("Response completed early delaying state change by",s),setTimeout(function(){b.is.abortedRequest(e)?b.request.rejectWith(n,[e,"aborted",r]):b.request.rejectWith(n,[e,"error",t,r])},s)}},request:{done:function(e,t){b.debug("Successful API Response",e),"local"===v.cache&&f&&(b.write.cachedResponse(f,e),b.debug("Saving server response locally",b.cache)),v.onSuccess.call(O,e,k,t)},complete:function(e,t){var r,n;b.was.succesful()?(n=e,r=t):(r=e,n=b.get.responseFromXHR(r)),b.remove.loading(),v.onComplete.call(O,n,k,r)},fail:function(e,t,r){var o=b.get.responseFromXHR(e),i=b.get.errorFromRequest(o,t,r);return"aborted"==t?(b.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,r),v.onAbort.call(O,t,k,e),!0):("invalid"==t?b.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&e!==n&&(b.debug("XHR produced a server error",t,r),200!=e.status&&r!==n&&""!==r&&b.error(R.statusMessage+r,s.url),v.onError.call(O,i,k,e)),v.errorDuration&&"aborted"!==t&&(b.debug("Adding error state"),b.set.error(),b.should.removeError()&&setTimeout(b.remove.error,v.errorDuration)),b.debug("API Request failed",i,e),void v.onFailure.call(O,o,k,e))}}},create:{request:function(){return e.Deferred().always(b.event.request.complete).done(b.event.request.done).fail(b.event.request.fail)},mockedXHR:function(){var t,r,n,o=!1,s=!1,i=!1,a=v.mockResponse||v.response,u=v.mockResponseAsync||v.responseAsync;return n=e.Deferred().always(b.event.xhr.complete).done(b.event.xhr.done).fail(b.event.xhr.fail),a?(e.isFunction(a)?(b.debug("Using specified synchronous callback",a),r=a.call(O,g)):(b.debug("Using settings specified response",a),r=a),n.resolveWith(O,[r,o,{responseText:r}])):e.isFunction(u)&&(t=function(e){b.debug("Async callback returned response",e),e?n.resolveWith(O,[e,o,{responseText:e}]):n.rejectWith(O,[{responseText:e},s,i])},b.debug("Using specified async response callback",u),u.call(O,g,t)),n},xhr:function(){var t;return t=e.ajax(s).always(b.event.xhr.always).done(b.event.xhr.done).fail(b.event.xhr.fail),b.verbose("Created server request",t,s),t}},set:{error:function(){b.verbose("Adding error state to element",P),P.addClass(x.error)},loading:function(){b.verbose("Adding loading state to element",P),P.addClass(x.loading),m=(new Date).getTime()}},remove:{error:function(){b.verbose("Removing error state from element",P),P.removeClass(x.error)},loading:function(){b.verbose("Removing loading state from element",P),P.removeClass(x.loading)}},get:{responseFromXHR:function(t){return e.isPlainObject(t)?b.is.expectingJSON()?b.decode.json(t.responseText):t.responseText:!1},errorFromRequest:function(t,r,o){return e.isPlainObject(t)&&t.error!==n?t.error:v.error[r]!==n?v.error[r]:o},request:function(){return b.request||!1},xhr:function(){return b.xhr||!1},settings:function(){var t;return t=v.beforeSend.call(O,v),t&&(t.success!==n&&(b.debug("Legacy success callback detected",t),b.error(R.legacyParameters,t.success),t.onSuccess=t.success),t.failure!==n&&(b.debug("Legacy failure callback detected",t),b.error(R.legacyParameters,t.failure),t.onFailure=t.failure),t.complete!==n&&(b.debug("Legacy complete callback detected",t),b.error(R.legacyParameters,t.complete),t.onComplete=t.complete)),t===n&&b.error(R.noReturnedValue),t===!1?t:t!==n?e.extend(!0,{},t):e.extend(!0,{},v)},urlEncodedValue:function(e){var r=t.decodeURIComponent(e),n=t.encodeURIComponent(e),o=r!==e;return o?(b.debug("URL value is already encoded, avoiding double encoding",e),e):(b.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var t={};return e.isWindow(j)||(b.is.input()?t.value=k.val():b.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow(j)||"now"==v.on?(b.debug("API called without element, no events attached"),!1):"auto"==v.on?k.is("input")?j.oninput!==n?"input":j.onpropertychange!==n?"propertychange":"keyup":k.is("form")?"submit":"click":v.on},templatedURL:function(e){if(e=e||k.data(y.action)||v.action||!1,f=k.data(y.url)||v.url||!1)return b.debug("Using specified url",f),f;if(e){if(b.debug("Looking up url for action",e,v.api),v.api[e]===n&&!b.is.mocked())return void b.error(R.missingAction,v.action,v.api);f=v.api[e]}else b.is.form()&&(f=k.attr("action")||P.attr("action")||!1,b.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=b.get.xhr();e&&"resolved"!==e.state()&&(b.debug("Cancelling API request"),e.abort())},reset:function(){b.remove.error(),b.remove.loading()},setting:function(t,r){if(b.debug("Changing setting",t,r),e.isPlainObject(t))e.extend(!0,v,t);else{if(r===n)return v[t];e.isPlainObject(v[t])?e.extend(!0,v[t],r):v[t]=r}},internal:function(t,r){if(e.isPlainObject(t))e.extend(!0,b,t);else{if(r===n)return b[t];b[t]=r}},debug:function(){!v.silent&&v.debug&&(v.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,v.name+":"),b.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),b.verbose.apply(console,arguments)))},error:function(){v.silent||(b.error=Function.prototype.bind.call(console.error,console,v.name+":"),b.error.apply(console,arguments))},performance:{log:function(e){var t,r,n;v.performance&&(t=(new Date).getTime(),n=a||t,r=t-n,a=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":r})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var t=v.name+":",r=0;a=!1,clearTimeout(b.performance.timer),e.each(u,function(e,t){r+=t["Execution Time"]}),t+=" "+r+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,r,s){var i,a,u,c=w;return r=r||l,s=j||s,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(r,o){var s=r!=i?o+t[r+1].charAt(0).toUpperCase()+t[r+1].slice(1):t;if(e.isPlainObject(c[s])&&r!=i)c=c[s];else{if(c[s]!==n)return a=c[s],!1;if(!e.isPlainObject(c[o])||r==i)return c[o]!==n?(a=c[o],!1):(b.error(R.method,t),!1);c=c[o]}})),e.isFunction(a)?u=a.apply(s,r):a!==n&&(u=a),e.isArray(o)?o.push(u):o!==n?o=[o,u]:u!==n&&(o=u),a}},d?(w===n&&b.initialize(),b.invoke(c)):(w!==n&&w.invoke("destroy"),b.initialize())}),o!==n?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document);
(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{if(typeof module!=="undefined"&&module.exports){a(require("jquery"))}else{a(jQuery)}}}(function(f){var y="1.6.15",p="left",o="right",e="up",x="down",c="in",A="out",m="none",s="auto",l="swipe",t="pinch",B="tap",j="doubletap",b="longtap",z="hold",E="horizontal",u="vertical",i="all",r=10,g="start",k="move",h="end",q="cancel",a="ontouchstart" in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!a,d=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!a,C="TouchSwipe";var n={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:true};f.fn.swipe=function(H){var G=f(this),F=G.data(C);if(F&&typeof H==="string"){if(F[H]){return F[H].apply(this,Array.prototype.slice.call(arguments,1))}else{f.error("Method "+H+" does not exist on jQuery.swipe")}}else{if(F&&typeof H==="object"){F.option.apply(this,arguments)}else{if(!F&&(typeof H==="object"||!H)){return w.apply(this,arguments)}}}return G};f.fn.swipe.version=y;f.fn.swipe.defaults=n;f.fn.swipe.phases={PHASE_START:g,PHASE_MOVE:k,PHASE_END:h,PHASE_CANCEL:q};f.fn.swipe.directions={LEFT:p,RIGHT:o,UP:e,DOWN:x,IN:c,OUT:A};f.fn.swipe.pageScroll={NONE:m,HORIZONTAL:E,VERTICAL:u,AUTO:s};f.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:i};function w(F){if(F&&(F.allowPageScroll===undefined&&(F.swipe!==undefined||F.swipeStatus!==undefined))){F.allowPageScroll=m}if(F.click!==undefined&&F.tap===undefined){F.tap=F.click}if(!F){F={}}F=f.extend({},f.fn.swipe.defaults,F);return this.each(function(){var H=f(this);var G=H.data(C);if(!G){G=new D(this,F);H.data(C,G)}})}function D(a5,au){var au=f.extend({},au);var az=(a||d||!au.fallbackToMouseEvents),K=az?(d?(v?"MSPointerDown":"pointerdown"):"touchstart"):"mousedown",ax=az?(d?(v?"MSPointerMove":"pointermove"):"touchmove"):"mousemove",V=az?(d?(v?"MSPointerUp":"pointerup"):"touchend"):"mouseup",T=az?(d?"mouseleave":null):"mouseleave",aD=(d?(v?"MSPointerCancel":"pointercancel"):"touchcancel");var ag=0,aP=null,a2=null,ac=0,a1=0,aZ=0,H=1,ap=0,aJ=0,N=null;var aR=f(a5);var aa="start";var X=0;var aQ={};var U=0,a3=0,a6=0,ay=0,O=0;var aW=null,af=null;try{aR.bind(K,aN);aR.bind(aD,ba)}catch(aj){f.error("events not supported "+K+","+aD+" on jQuery.swipe")}this.enable=function(){aR.bind(K,aN);aR.bind(aD,ba);return aR};this.disable=function(){aK();return aR};this.destroy=function(){aK();aR.data(C,null);aR=null};this.option=function(bd,bc){if(typeof bd==="object"){au=f.extend(au,bd)}else{if(au[bd]!==undefined){if(bc===undefined){return au[bd]}else{au[bd]=bc}}else{if(!bd){return au}else{f.error("Option "+bd+" does not exist on jQuery.swipe.options")}}}return null};function aN(be){if(aB()){return}if(f(be.target).closest(au.excludedElements,aR).length>0){return}var bf=be.originalEvent?be.originalEvent:be;var bd,bg=bf.touches,bc=bg?bg[0]:bf;aa=g;if(bg){X=bg.length}else{if(au.preventDefaultEvents!==false){be.preventDefault()}}ag=0;aP=null;a2=null;aJ=null;ac=0;a1=0;aZ=0;H=1;ap=0;N=ab();S();ai(0,bc);if(!bg||(X===au.fingers||au.fingers===i)||aX()){U=ar();if(X==2){ai(1,bg[1]);a1=aZ=at(aQ[0].start,aQ[1].start)}if(au.swipeStatus||au.pinchStatus){bd=P(bf,aa)}}else{bd=false}if(bd===false){aa=q;P(bf,aa);return bd}else{if(au.hold){af=setTimeout(f.proxy(function(){aR.trigger("hold",[bf.target]);if(au.hold){bd=au.hold.call(aR,bf,bf.target)}},this),au.longTapThreshold)}an(true)}return null}function a4(bf){var bi=bf.originalEvent?bf.originalEvent:bf;if(aa===h||aa===q||al()){return}var be,bj=bi.touches,bd=bj?bj[0]:bi;var bg=aH(bd);a3=ar();if(bj){X=bj.length}if(au.hold){clearTimeout(af)}aa=k;if(X==2){if(a1==0){ai(1,bj[1]);a1=aZ=at(aQ[0].start,aQ[1].start)}else{aH(bj[1]);aZ=at(aQ[0].end,aQ[1].end);aJ=aq(aQ[0].end,aQ[1].end)}H=a8(a1,aZ);ap=Math.abs(a1-aZ)}if((X===au.fingers||au.fingers===i)||!bj||aX()){aP=aL(bg.start,bg.end);a2=aL(bg.last,bg.end);ak(bf,a2);ag=aS(bg.start,bg.end);ac=aM();aI(aP,ag);be=P(bi,aa);if(!au.triggerOnTouchEnd||au.triggerOnTouchLeave){var bc=true;if(au.triggerOnTouchLeave){var bh=aY(this);bc=F(bg.end,bh)}if(!au.triggerOnTouchEnd&&bc){aa=aC(k)}else{if(au.triggerOnTouchLeave&&!bc){aa=aC(h)}}if(aa==q||aa==h){P(bi,aa)}}}else{aa=q;P(bi,aa)}if(be===false){aa=q;P(bi,aa)}}function M(bc){var bd=bc.originalEvent?bc.originalEvent:bc,be=bd.touches;if(be){if(be.length&&!al()){G(bd);return true}else{if(be.length&&al()){return true}}}if(al()){X=ay}a3=ar();ac=aM();if(bb()||!am()){aa=q;P(bd,aa)}else{if(au.triggerOnTouchEnd||(au.triggerOnTouchEnd==false&&aa===k)){if(au.preventDefaultEvents!==false){bc.preventDefault()}aa=h;P(bd,aa)}else{if(!au.triggerOnTouchEnd&&a7()){aa=h;aF(bd,aa,B)}else{if(aa===k){aa=q;P(bd,aa)}}}}an(false);return null}function ba(){X=0;a3=0;U=0;a1=0;aZ=0;H=1;S();an(false)}function L(bc){var bd=bc.originalEvent?bc.originalEvent:bc;if(au.triggerOnTouchLeave){aa=aC(h);P(bd,aa)}}function aK(){aR.unbind(K,aN);aR.unbind(aD,ba);aR.unbind(ax,a4);aR.unbind(V,M);if(T){aR.unbind(T,L)}an(false)}function aC(bg){var bf=bg;var be=aA();var bd=am();var bc=bb();if(!be||bc){bf=q}else{if(bd&&bg==k&&(!au.triggerOnTouchEnd||au.triggerOnTouchLeave)){bf=h}else{if(!bd&&bg==h&&au.triggerOnTouchLeave){bf=q}}}return bf}function P(be,bc){var bd,bf=be.touches;if(J()||W()){bd=aF(be,bc,l)}if((Q()||aX())&&bd!==false){bd=aF(be,bc,t)}if(aG()&&bd!==false){bd=aF(be,bc,j)}else{if(ao()&&bd!==false){bd=aF(be,bc,b)}else{if(ah()&&bd!==false){bd=aF(be,bc,B)}}}if(bc===q){if(W()){bd=aF(be,bc,l)}if(aX()){bd=aF(be,bc,t)}ba(be)}if(bc===h){if(bf){if(!bf.length){ba(be)}}else{ba(be)}}return bd}function aF(bf,bc,be){var bd;if(be==l){aR.trigger("swipeStatus",[bc,aP||null,ag||0,ac||0,X,aQ,a2]);if(au.swipeStatus){bd=au.swipeStatus.call(aR,bf,bc,aP||null,ag||0,ac||0,X,aQ,a2);if(bd===false){return false}}if(bc==h&&aV()){clearTimeout(aW);clearTimeout(af);aR.trigger("swipe",[aP,ag,ac,X,aQ,a2]);if(au.swipe){bd=au.swipe.call(aR,bf,aP,ag,ac,X,aQ,a2);if(bd===false){return false}}switch(aP){case p:aR.trigger("swipeLeft",[aP,ag,ac,X,aQ,a2]);if(au.swipeLeft){bd=au.swipeLeft.call(aR,bf,aP,ag,ac,X,aQ,a2)}break;case o:aR.trigger("swipeRight",[aP,ag,ac,X,aQ,a2]);if(au.swipeRight){bd=au.swipeRight.call(aR,bf,aP,ag,ac,X,aQ,a2)}break;case e:aR.trigger("swipeUp",[aP,ag,ac,X,aQ,a2]);if(au.swipeUp){bd=au.swipeUp.call(aR,bf,aP,ag,ac,X,aQ,a2)}break;case x:aR.trigger("swipeDown",[aP,ag,ac,X,aQ,a2]);if(au.swipeDown){bd=au.swipeDown.call(aR,bf,aP,ag,ac,X,aQ,a2)}break}}}if(be==t){aR.trigger("pinchStatus",[bc,aJ||null,ap||0,ac||0,X,H,aQ]);if(au.pinchStatus){bd=au.pinchStatus.call(aR,bf,bc,aJ||null,ap||0,ac||0,X,H,aQ);if(bd===false){return false}}if(bc==h&&a9()){switch(aJ){case c:aR.trigger("pinchIn",[aJ||null,ap||0,ac||0,X,H,aQ]);if(au.pinchIn){bd=au.pinchIn.call(aR,bf,aJ||null,ap||0,ac||0,X,H,aQ)}break;case A:aR.trigger("pinchOut",[aJ||null,ap||0,ac||0,X,H,aQ]);if(au.pinchOut){bd=au.pinchOut.call(aR,bf,aJ||null,ap||0,ac||0,X,H,aQ)}break}}}if(be==B){if(bc===q||bc===h){clearTimeout(aW);clearTimeout(af);if(Z()&&!I()){O=ar();aW=setTimeout(f.proxy(function(){O=null;aR.trigger("tap",[bf.target]);if(au.tap){bd=au.tap.call(aR,bf,bf.target)}},this),au.doubleTapThreshold)}else{O=null;aR.trigger("tap",[bf.target]);if(au.tap){bd=au.tap.call(aR,bf,bf.target)}}}}else{if(be==j){if(bc===q||bc===h){clearTimeout(aW);clearTimeout(af);O=null;aR.trigger("doubletap",[bf.target]);if(au.doubleTap){bd=au.doubleTap.call(aR,bf,bf.target)}}}else{if(be==b){if(bc===q||bc===h){clearTimeout(aW);O=null;aR.trigger("longtap",[bf.target]);if(au.longTap){bd=au.longTap.call(aR,bf,bf.target)}}}}}return bd}function am(){var bc=true;if(au.threshold!==null){bc=ag>=au.threshold}return bc}function bb(){var bc=false;if(au.cancelThreshold!==null&&aP!==null){bc=(aT(aP)-ag)>=au.cancelThreshold}return bc}function ae(){if(au.pinchThreshold!==null){return ap>=au.pinchThreshold}return true}function aA(){var bc;if(au.maxTimeThreshold){if(ac>=au.maxTimeThreshold){bc=false}else{bc=true}}else{bc=true}return bc}function ak(bc,bd){if(au.preventDefaultEvents===false){return}if(au.allowPageScroll===m){bc.preventDefault()}else{var be=au.allowPageScroll===s;switch(bd){case p:if((au.swipeLeft&&be)||(!be&&au.allowPageScroll!=E)){bc.preventDefault()}break;case o:if((au.swipeRight&&be)||(!be&&au.allowPageScroll!=E)){bc.preventDefault()}break;case e:if((au.swipeUp&&be)||(!be&&au.allowPageScroll!=u)){bc.preventDefault()}break;case x:if((au.swipeDown&&be)||(!be&&au.allowPageScroll!=u)){bc.preventDefault()}break}}}function a9(){var bd=aO();var bc=Y();var be=ae();return bd&&bc&&be}function aX(){return !!(au.pinchStatus||au.pinchIn||au.pinchOut)}function Q(){return !!(a9()&&aX())}function aV(){var bf=aA();var bh=am();var be=aO();var bc=Y();var bd=bb();var bg=!bd&&bc&&be&&bh&&bf;return bg}function W(){return !!(au.swipe||au.swipeStatus||au.swipeLeft||au.swipeRight||au.swipeUp||au.swipeDown)}function J(){return !!(aV()&&W())}function aO(){return((X===au.fingers||au.fingers===i)||!a)}function Y(){return aQ[0].end.x!==0}function a7(){return !!(au.tap)}function Z(){return !!(au.doubleTap)}function aU(){return !!(au.longTap)}function R(){if(O==null){return false}var bc=ar();return(Z()&&((bc-O)<=au.doubleTapThreshold))}function I(){return R()}function aw(){return((X===1||!a)&&(isNaN(ag)||ag<au.threshold))}function a0(){return((ac>au.longTapThreshold)&&(ag<r))}function ah(){return !!(aw()&&a7())}function aG(){return !!(R()&&Z())}function ao(){return !!(a0()&&aU())}function G(bc){a6=ar();ay=bc.touches.length+1}function S(){a6=0;ay=0}function al(){var bc=false;if(a6){var bd=ar()-a6;if(bd<=au.fingerReleaseThreshold){bc=true}}return bc}function aB(){return !!(aR.data(C+"_intouch")===true)}function an(bc){if(!aR){return}if(bc===true){aR.bind(ax,a4);aR.bind(V,M);if(T){aR.bind(T,L)}}else{aR.unbind(ax,a4,false);aR.unbind(V,M,false);if(T){aR.unbind(T,L,false)}}aR.data(C+"_intouch",bc===true)}function ai(be,bc){var bd={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};bd.start.x=bd.last.x=bd.end.x=bc.pageX||bc.clientX;bd.start.y=bd.last.y=bd.end.y=bc.pageY||bc.clientY;aQ[be]=bd;return bd}function aH(bc){var be=bc.identifier!==undefined?bc.identifier:0;var bd=ad(be);if(bd===null){bd=ai(be,bc)}bd.last.x=bd.end.x;bd.last.y=bd.end.y;bd.end.x=bc.pageX||bc.clientX;bd.end.y=bc.pageY||bc.clientY;return bd}function ad(bc){return aQ[bc]||null}function aI(bc,bd){bd=Math.max(bd,aT(bc));N[bc].distance=bd}function aT(bc){if(N[bc]){return N[bc].distance}return undefined}function ab(){var bc={};bc[p]=av(p);bc[o]=av(o);bc[e]=av(e);bc[x]=av(x);return bc}function av(bc){return{direction:bc,distance:0}}function aM(){return a3-U}function at(bf,be){var bd=Math.abs(bf.x-be.x);var bc=Math.abs(bf.y-be.y);return Math.round(Math.sqrt(bd*bd+bc*bc))}function a8(bc,bd){var be=(bd/bc)*1;return be.toFixed(2)}function aq(){if(H<1){return A}else{return c}}function aS(bd,bc){return Math.round(Math.sqrt(Math.pow(bc.x-bd.x,2)+Math.pow(bc.y-bd.y,2)))}function aE(bf,bd){var bc=bf.x-bd.x;var bh=bd.y-bf.y;var be=Math.atan2(bh,bc);var bg=Math.round(be*180/Math.PI);if(bg<0){bg=360-Math.abs(bg)}return bg}function aL(bd,bc){var be=aE(bd,bc);if((be<=45)&&(be>=0)){return p}else{if((be<=360)&&(be>=315)){return p}else{if((be>=135)&&(be<=225)){return o}else{if((be>45)&&(be<135)){return x}else{return e}}}}}function ar(){var bc=new Date();return bc.getTime()}function aY(bc){bc=f(bc);var be=bc.offset();var bd={left:be.left,right:be.left+bc.outerWidth(),top:be.top,bottom:be.top+bc.outerHeight()};return bd}function F(bc,bd){return(bc.x>bd.left&&bc.x<bd.right&&bc.y>bd.top&&bc.y<bd.bottom)}}}));
/*!
 * headroom.js v0.9.3 - Give your page some headroom. Hide your header until you need it
 * Copyright (c) 2016 Nick Williams - http://wicky.nillia.ms/headroom.js
 * License: MIT
 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Headroom=b()}(this,function(){"use strict";function a(a){this.callback=a,this.ticking=!1}function b(a){return a&&"undefined"!=typeof window&&(a===window||a.nodeType)}function c(a){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var d,e,f=a||{};for(e=1;e<arguments.length;e++){var g=arguments[e]||{};for(d in g)"object"!=typeof f[d]||b(f[d])?f[d]=f[d]||g[d]:f[d]=c(f[d],g[d])}return f}function d(a){return a===Object(a)?a:{down:a,up:a}}function e(a,b){b=c(b,e.options),this.lastKnownScrollY=0,this.elem=a,this.tolerance=d(b.tolerance),this.classes=b.classes,this.offset=b.offset,this.scroller=b.scroller,this.initialised=!1,this.onPin=b.onPin,this.onUnpin=b.onUnpin,this.onTop=b.onTop,this.onNotTop=b.onNotTop,this.onBottom=b.onBottom,this.onNotBottom=b.onNotBottom}var f={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,a.prototype={constructor:a,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},e.prototype={constructor:e,init:function(){return e.cutsTheMustard?(this.debouncer=new a(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this):void 0},destroy:function(){var a=this.classes;this.initialised=!1,this.elem.classList.remove(a.unpinned,a.pinned,a.top,a.notTop,a.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var a=this.elem.classList,b=this.classes;!a.contains(b.pinned)&&a.contains(b.unpinned)||(a.add(b.unpinned),a.remove(b.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var a=this.elem.classList,b=this.classes;a.contains(b.unpinned)&&(a.remove(b.unpinned),a.add(b.pinned),this.onPin&&this.onPin.call(this))},top:function(){var a=this.elem.classList,b=this.classes;a.contains(b.top)||(a.add(b.top),a.remove(b.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notTop)||(a.add(b.notTop),a.remove(b.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.bottom)||(a.add(b.bottom),a.remove(b.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var a=this.elem.classList,b=this.classes;a.contains(b.notBottom)||(a.add(b.notBottom),a.remove(b.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(a){return Math.max(a.offsetHeight,a.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},getElementHeight:function(a){return Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(a){var b=0>a,c=a+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return b||c},toleranceExceeded:function(a,b){return Math.abs(a-this.lastKnownScrollY)>=this.tolerance[b]},shouldUnpin:function(a,b){var c=a>this.lastKnownScrollY,d=a>=this.offset;return c&&d&&b},shouldPin:function(a,b){var c=a<this.lastKnownScrollY,d=a<=this.offset;return c&&b||d},update:function(){var a=this.getScrollY(),b=a>this.lastKnownScrollY?"down":"up",c=this.toleranceExceeded(a,b);this.isOutOfBounds(a)||(a<=this.offset?this.top():this.notTop(),a+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(a,c)?this.unpin():this.shouldPin(a,c)&&this.pin(),this.lastKnownScrollY=a)}},e.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},e.cutsTheMustard="undefined"!=typeof f&&f.rAF&&f.bind&&f.classList,e});
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.6.0
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.focussed=!1,e.interrupted=!1,e.hidden="hidden",e.paused=!0,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,d,f),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0)}var b=0;return c}(),b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;return c&&null!==c&&(c=a(c).not(b.$slider)),c},b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(a.options.infinite===!1&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1===0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(b.$slider.addClass("slick-dotted"),d=a("<ul />").addClass(b.options.dotsClass),c=0;c<=b.getDotCount();c+=1)d.append(a("<li />").append(b.options.customPaging.call(this,b,c)));b.$dots=d.appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.empty().append(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.currentTarget);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=d.slideCount%d.options.slidesToScroll!==0,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.empty().append(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!==0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:b.options.rtl===!0?"next":"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:b.options.rtl===!0?"previous":"next"}}))},b.prototype.lazyLoad=function(){function g(c){a("img[data-lazy]",c).each(function(){var c=a(this),d=a(this).attr("data-lazy"),e=document.createElement("img");e.onload=function(){c.animate({opacity:0},100,function(){c.attr("src",d).animate({opacity:1},200,function(){c.removeAttr("data-lazy").removeClass("slick-loading")}),b.$slider.trigger("lazyLoaded",[b,c,d])})},e.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),b.$slider.trigger("lazyLoadError",[b,c,d])},e.src=d})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=Math.ceil(e+b.options.slidesToShow),b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),b.options.accessibility===!0&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var e,f,g,c=this,d=a("img[data-lazy]",c.$slider);d.length?(e=d.first(),f=e.attr("data-lazy"),g=document.createElement("img"),g.onload=function(){e.attr("src",f).removeAttr("data-lazy").removeClass("slick-loading"),c.options.adaptiveHeight===!0&&c.setPosition(),c.$slider.trigger("lazyLoaded",[c,e,f]),c.progressiveLazyLoad()},g.onerror=function(){3>b?setTimeout(function(){c.progressiveLazyLoad(b+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),c.$slider.trigger("lazyLoadError",[c,e,f]),c.progressiveLazyLoad())},g.src=f):c.$slider.trigger("allImagesLoaded",[c])},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,!c.options.infinite&&c.currentSlide>e&&(c.currentSlide=e),c.slideCount<=c.options.slidesToShow&&(c.currentSlide=0),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=b.slideWidth*d*-1,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var c,d,e,f,h,b=this,g=!1;if("object"===a.type(arguments[0])?(e=arguments[0],g=arguments[1],h="multiple"):"string"===a.type(arguments[0])&&(e=arguments[0],f=arguments[1],g=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?h="responsive":"undefined"!=typeof arguments[1]&&(h="single")),"single"===h)b.options[e]=f;else if("multiple"===h)a.each(e,function(a,c){b.options[a]=c});else if("responsive"===h)for(d in f)if("array"!==a.type(b.options.responsive))b.options.responsive=[f[d]];else{for(c=b.options.responsive.length-1;c>=0;)b.options.responsive[c].breakpoint===f[d].breakpoint&&b.options.responsive.splice(c,1),c--;b.options.responsive.push(f[d])}g&&(b.unload(),b.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,
d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.interrupt=function(a){var b=this;a||b.autoPlay(),b.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,j,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.options.asNavFor&&(j=i.getNavTarget(),j=j.slick("getSlick"),j.slideCount<=j.options.slidesToShow&&j.setSlideClasses(i.currentSlide)),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"down":"up":"vertical"},b.prototype.swipeEnd=function(a){var c,d,b=this;if(b.dragging=!1,b.interrupted=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe){switch(d=b.swipeDirection()){case"left":case"down":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.currentDirection=0;break;case"right":case"up":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.currentDirection=1}"vertical"!=d&&(b.slideHandler(c),b.touchObject={},b.$slider.trigger("swipe",[b,d]))}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.options.vertical===!1?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return b.interrupted=!0,1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(document[a.hidden]?a.interrupted=!0:a.interrupted=!1)},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});
!function(n){"use strict";function c(){var c=n(".ui.accordion");c.accordion({exclusive:!1})}n(document).ready(function(){c(),n(document).on("widget_set_content",function(n,i){11==i&&c()}.bind(this))})}(window.jQuery);
!function(t){t(function(){t(document).on(t.fn.shipping.events.outpostsOpen,function(){var s=t(".js-shipping__map-button"),n=s.data(),o=t(".js-outposts__list");s.on("click",function(){return t(".js-outposts__map").toggleClass("outpost-map_visible"),o.toggleClass("hide"),s.html(o.hasClass("hide")?n.listTitle:n.mapTitle),!1})})})}(window.jQuery);
!function(t){"use strict";var i=function(i,e,n){n=n||[],this.options=t.extend({field:"name",input:".js-filter__input",collection:".js-filter__item"},e),this.$element=i,this.data=n,this.$collectionItems=i.find(this.options.collection),this.initInput()},e=i.prototype;e.initInput=function(){this.$input=this.$element.find(this.options.input),this.$input.on("keyup",function(){this.filter(this.$input.val())}.bind(this))},e.filter=function(i){if(this.$collectionItems.show(),i=String(i).trim(),!i)return void this.$element.trigger("collection-filtered",{filtered:this.data});var e=new RegExp(i,"i"),n=this.data.filter(function(t){return e.test(t[this.options.field])}.bind(this));this.$element.trigger("collection-filtered",{filtered:n}),this.$collectionItems.filter(function(i,n){return!e.test(t(n).data(this.options.field))}.bind(this)).hide()},t.fn.collectionFilter=function(e,n){return e=e||{},this.each(function(){this.collectionFilter||(this.collectionFilter=new i(t(this),e,n))})}}(window.jQuery);
!function(o){"use strict";o(document).ready(function(){var n=".js-combo-box",t=o("body"),c=o(n);c.each(function(){var c=o(this),e=c.attr("combo-box"),i=c.find(n+"__content_"+e);c.find(n+"__button_"+e+", "+n+"__close_"+e).on("click",function(){i.toggleClass("combo-box__content_visible"),t.toggleClass("combo-box-open"),o(window).trigger("scroll:disable",t.hasClass("combo-box-open"))})})})}(window.jQuery);
!function(n){var t=".js-countdown";n(document).ready(function(){function o(){n(t).each(function(){var o=n(this),i=o.find(".js-countdown-interval").val(),d=o.find(".js-countdown-format").val(),a=o.find(".js-countdown-numbers").val(),w=window.view.translate("Года"),l=window.view.translate("Месяцы"),e=window.view.translate("Недели"),c=window.view.translate("Дни"),u=window.view.translate("Часы"),f=window.view.translate("Минуты"),r=window.view.translate("Секунды");o.find("#countdown-clock").countdown({until:i,format:d,layout:n("#countdown-layout").html(),significant:a,labels:[w,l,e,c,u,f,r],labels1:[w,l,e,c,u,f,r],onTick:function(i){var d=o.find(t+"__digits"),a=["y","o","w","d","h","m","s"];d.length&&i.forEach(function(i,w){var l,e=o.find(t+"__"+a[w]),c=n("<div></div>");e.length&&(l=(i+"").split(""),1==l.length&&c.append(d.find(t+"__digit_0").html()),l.forEach(function(n){c.append(d.find(t+"__digit_"+n).html())}),e.html(c.html()))})}})})}n(document.body).on("compile_block",function(t,i){var d=n(".block-"+i).attr("id");"countdown"!=d&&"countdown-left"!=d||o()}),o()})}(window.jQuery);
!function(o){"use strict";o(document).ready(function(){o(".js-variant-select").on("change",function(){var n=o(this);window.location=n.val()});var n=o(".ui.selection.dropdown");n.find(".menu").on("click",function(o){o.stopPropagation()}),n.dropdown({onShow:function(){var n=o(this),i=o("body").width();i<1024&&o(window).trigger("scroll:disable",!0),n.find(".menu").css({"padding-top":n.next(".ui-dropdown__header").outerHeight()+"px"})},onHide:function(){o(window).trigger("scroll:disable",!1)},showOnFocus:!1,duration:0}),n.off("touchstart")})}(window.jQuery);
!function(n){"use strict";function t(){var t=".js-label",c=n(t);c.off("click"),c.on("click",function(){var t=n(this),c=t.data("name");return n('[name="'+c+'"]').click(),!1})}n(document).ready(function(){t(),n(document).on("widget_set_content",function(){t()}.bind(this))})}(window.jQuery);
!function(a){"use strict";var o=a("body"),d=o.hasClass("js-edit-mode");d||a(document).on("modal:open",function(){a(".modal__content").swipe({swipeLeft:function(){a.magnificPopup.instance.next()},swipeRight:function(){a.magnificPopup.instance.prev()}})}),a(document).ready(function(){a.magnificPopup.defaults.image.markup='<article id="view-photo-edit-window" class="modal-window window js-photo-window gallery-picture-modal row modal modal_legacy_padding_none"><div class="small-12 column modal__wrap"><div class="modal__body"><header class="modal__header modal__header_photo"><div class="row"><div class="small-12 column"><h3 class="modal__head-text modal__head-text_bold modal__photo-head-text">'+window.view.translate("Фотография")+'<span class="mfp-counter"></span></h3></div></div><button class="modal__button-close js-cancel-window"><svg version="1.1" xmlns="http://www.w3.org/2000/svg"  width="768" height="768" viewBox="0 0 768 768"><path d="M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"></path></svg></button></header><div class="modal__content"><div class="row"><div class="small-12 column"><div id="photo-plate" class="set-sized"><div id="photo-wrapper" class="mfp-img"></div></div></div></div></div></div></div></article>',a.magnificPopup.defaults.gallery.tCounter="%curr% "+window.view.translate("из")+" %total%"})}(window.jQuery);
!function(n){"use strict";n(".js-scroll-up").on("click",function(t){return n("body,html").animate({scrollTop:0},200),t.preventDefault(),!1})}(window.jQuery);
!function(n){"use strict";n(document).ready(function(){var i="div.share-links-collapse",c=n("div.js-share-links-collapse"),e=c.find(i+"__content");c.find(i+"__share").on("click",function(){e.fadeToggle()}),c.find(i+"__close").on("click",function(){e.fadeOut()})})}(window.jQuery);
!function(i){"use strict";function t(t,e){this.$slider=null,e=e||{},this.$window=i(window),this.windowWidth=this.$window.width(),this.selector=t||".slider",this.config=i.extend({},{lazyLoad:"ondemand",dots:!0,accessibility:!1,easing:"swing",adaptiveHeight:!1,fade:!0,speed:600,arrows:!1,autoplay:!0,autoplaySpeed:5e3,mobileFirst:!0,prevArrow:".main-slider-arrow__prev",nextArrow:".main-slider-arrow__next",responsive:[{breakpoint:1300,settings:{fade:!1,arrows:!0}},{breakpoint:640,settings:{fade:!1}}]},e)}function e(t,e,s){this.$slider=null,e=e||{},this.arrows=s,this.selector=t||".slider",this.config=i.extend({},{dots:!1,arrows:!1,fade:!0,accessibility:!1,swipe:!1,easing:"swing",adaptiveHeight:!0},e)}var s=i("body"),r=s.hasClass("js-edit-mode");t.prototype.init=function(){this.$slider=i(this.selector),this.setSliderMinHeight(),setTimeout(function(){this.$slider=i(this.selector),this.$slider=this.$slider.find(".slider__content").slick(this.config),this.$slider.on("beforeChange",function(t,e,s,r){var n=i(e.$slides[s]),o=i(e.$slides[r]);n.addClass("slider-item_prev"),o.hasClass("slider-item_no-bg")&&n.addClass("slider-item_no-delay")}),this.$slider.on("afterChange",function(i,t){t.$slides.removeClass("slider-item_no-delay slider-item_prev")}),this.$window.on("resize",function(){var i=this.$window.width();i!=this.windowWidth&&(this.windowWidth=i,this.setSliderMinHeight())}.bind(this)),this.setSliderMinHeight()}.bind(this),r?500:0)},t.prototype.setSliderMinHeight=function(){this.$slider.find(this.selector+"__item, "+this.selector+"__item-constraint").css({"min-height":""});var t,e;e=Math.max.apply(null,this.$slider.find(this.selector+"__item").map(function(){return i(this).height()}).get()),t=Math.max(this.$window.height(),e),this.$slider.find(this.selector+"__item").css({"min-height":t}),this.$slider.find(this.selector+"__item-constraint").css({"min-height":this.$window.height()})},e.prototype.init=function(){setTimeout(function(){this.$slider=i(this.selector),this.$slider=this.$slider.slick(this.config),i(this.arrows.prevArrow).on("click",function(){return this.beforeChange(function(){this.$slider.slick("slickPrev")}.bind(this)),!1}.bind(this)),i(this.arrows.nextArrow).on("click",function(){return this.beforeChange(function(){this.$slider.slick("slickNext")}.bind(this)),!1}.bind(this))}.bind(this),r?500:0)},e.prototype.beforeChange=function(t){i(window).width()<1024?window.requestAnimationFrame(function(){i(document).trigger("scrollAnimationStart"),s.velocity("stop").velocity("scroll",{offset:i(this.config.scrollTo).offset().top-100,duration:300,easing:"swing",mobileHA:!1,complete:function(){i(document).trigger("scrollAnimationStop"),t()}})}.bind(this)):t()},i(document).ready(function(){var s,n,o,d;s=new t,s.init(),i(document).on("change-content-slider",function(){s.init()}),n=new e(".articles-slider__content",{scrollTo:".articles__header"},{prevArrow:".articles-slider-arrow__prev",nextArrow:".articles-slider-arrow__next"}),n.init(),o=new e(".posts-slider__content",{scrollTo:".posts__header"},{prevArrow:".post-slider-arrow__prev",nextArrow:".post-slider-arrow__next"}),o.init(),d=new e(".comments-home-slider",{dots:!0,scrollTo:".comments-faivorite__header ",responsive:[{breakpoint:1024,settings:{dots:!1,adaptiveHeight:!0}}]},{prevArrow:".comment-slider-arrow__prev",nextArrow:".comment-slider-arrow__next"}),d.init(),i(document).on("compile_block",function(t,e){var s=i(".block-"+e).attr("id");"subcomment-left"==s&&d.init()}),setTimeout(function(){var t=".js-product-media-slider",e=i(t);e.css("max-width",e.outerWidth()+"px"),e.slick({infinite:!1,dots:!0,mobileFirst:!0,lazyLoad:"progressive",arrows:!0,prevArrow:".product-slider-arrow__prev",nextArrow:".product-slider-arrow__next",responsive:[{breakpoint:1023,settings:{swipe:!1,adaptiveHeight:!0}},{breakpoint:640,settings:{fade:!1,adaptiveHeight:!1}}]}),i(window).resize(function(){var t=i("body").width();t>1023&&e.slick("slickGoTo",0,!0)})},r?500:0)})}(window.jQuery);
!function(o){"use strict";$(document).ready(function(){var t=$("body").hasClass("js-edit-mode");if(!t){var e,n,i,s=!1,a=".js-sticky__header",c=$(a),r=!1,d=$(document.body),l=c.outerHeight(),p=$(".js-header-constraint");if(n=new o(c[0],{offset:c.parent().offset().top+300,tolerance:5,classes:{initial:"site-header_initial",pinned:"site-header_pinned",unpinned:"site-header_unpinned",notTop:"site-header_not-top",bottom:"site-header_bottom",notBottom:"site-header_not-bottom"}}),o.cutsTheMustard){p.height(l),n.init(),c.toggleClass("site-header_top",c.parent().offset().top>$(document).scrollTop());var u=function(){c.velocity("stop").velocity({top:-c.height()},{easing:"swing",duration:10}),c.removeClass("js-anchor")};$(document).on("scrollAnimationStart",function(){s=!0}),$(document).on("scrollAnimationStop",function(){s=!1}),$(document).on("scroll",function(){c.toggleClass("site-header_top",c.parent().offset().top>$(document).scrollTop()),s||(c.hasClass("site-header_unpinned")?r&&(r=!1,c.velocity("stop").velocity({top:-c.height()},{easing:"swing",duration:300})):r||(r=!0,c.velocity("stop").velocity({top:0},{easing:"swing",duration:300})),c.hasClass("js-anchor")&&u())})}$(document).on("cart.update",function(){c.find(".top-cart").length&&(c.velocity("stop").velocity({top:0},{easing:"swing",duration:300}),window.clearTimeout(i),i=window.setTimeout(function(){c.hasClass("site-header_unpinned")?c.velocity("stop").velocity({top:-c.height()},{easing:"swing",duration:300}):c.velocity("stop").velocity({top:0},{easing:"swing",duration:300})},4e3))}),$(window).on("scroll:disable",function(o,t){return t?(e=d.scrollTop(),d.css({top:-e+"px",position:"fixed",width:"100%"}),d.scrollTop(0)):(d.css({top:"",position:"",width:""}),d.scrollTop(e)),!1}),$(document).on("modal:beforeOpen",function(){$(window).trigger("scroll:disable",!0)}),$(document).on("modal:close",function(){$(window).trigger("scroll:disable",!1)}),$(".user-inner a[href^='#']").on("click",function(){$(c).addClass("js-anchor")})}})}(window.Headroom);
!function(t){"use strict";t(function(){function i(t,i,e){r=t.parents().not(":visible"),d=r.eq(r.length-1),h=t.css("width"),t.css("width",""),d.show(),i.show(),e.css("width",""),e.width(i.outerWidth()),d.css("display",""),t.css("width",h),i.css("display","")}var e,n,s,a,r,d,h,w=t(".user-inner table").not(".user-inner table table"),c=w.add(".user-inner .table-wrap > table");c.each(function(){e=t(this),n=e.parent(),s=n.width(),a=t('<div class="user-inner__table"></div>'),a=e.wrap(a).parent(),s>0?a.width(s):i(e,n,a)}),t(window).resize(function(){a=c.parent(),a.hide(),c.each(function(){e=t(this),n=e.parent().parent(),s=n.width(),a=e.parent(),s>0?a.width(s):i(e,n,a),a.show()})})})}(window.jQuery);
!function(t){"use strict";function n(){var n=t(".js-product-tabs .js-tab-item");n.on("click",function(t){t.stopPropagation()}),n.tab({context:".js-product-tabs"})}t(document).ready(function(){n(),t(document).on("widget_set_content",function(t,o){11==o&&n()}.bind(this))})}(window.jQuery);
+function(t){"use strict";function n(){var n=t(".cart-widget"),c=n.find(".quantity-items"),i=c.length?parseInt(c.html()):0;n.length&&(t(document).on("click touchstart",function(c){c&&(n[0].contains(c.target)||t(".js-order-product").has(c.target).length)||n.find(".small-cart").hide()}),t(document).on("cart.update",function(){var a=n.find(".cart-is-empty"),e=n.find(".small-cart");a.html("Корзина пуста"),i=0,e.is(":visible")||(e.stop(),e.fadeIn(200)),t("#products-cart-left-show").find(".cart-item .num-items").each(function(){var n=t(this);i+=parseInt(n.val())}),i<1e3?c.html(i):c.html("&#8734")}),n.find(".cart-content").on("click",function(){n.find(".small-cart").toggle()}),n.on("click",".js-close-cart",function(){return n.find(".small-cart").toggle(),!1}))}t(document).ready(function(){n()})}(jQuery);
!function(o){"use strict";var s=".js-top-contacts",i=o(s),n=i.find(s+"__phones"),t=i.find(s+"__phone");t.on("click",function(){t.toggleClass("active"),n.toggleClass("show-for-medium")});var c=0;o(window).scroll(function(){var s=o(this).scrollTop();s<c&&(n.addClass("show-for-medium"),t.removeClass("active")),c=s})}(window.jQuery);
!function(t,n,i){"use strict";function s(){if(n.ymaps){var i=t.Deferred();return i.resolve(n.ymaps),i.promise()}return t.getScript("//api-maps.yandex.ru/2.1/?load=package.full&mode=release&lang=ru_RU").then(function(){return n.ymaps}.bind(this))}function e(t,n){this.element=t,this.points=n,s().then(function(t){this.ymaps=t,this.init(n)}.bind(this))}var o=e.prototype;o.init=function(){this.ymaps.ready(function(){this.ballonContentLayout(),this.cluster=this.initCluster(),this.map=this.initMap(),this.map.setBounds(this.getBounds()),this.map.geoObjects.add(this.cluster)}.bind(this))},o.initCluster=function(){var t=new this.ymaps.Clusterer({groupByCoordinates:!1,zoomMargin:40,clusterBalloonItemContentLayout:this.balloonLayout}),n=this.preparePoints();return t.add(n),t},o.updateCluster=function(t){this.points=t;var n=this.preparePoints();this.cluster.removeAll(),this.cluster.add(n),n.length&&this.map.setBounds(this.getBounds())},o.getBounds=function(t){t=t||.003;var n=this.cluster.getBounds();return n[0]=n[0].map(function(n){return Number(n)-t}),n[1]=n[1].map(function(n){return Number(n)+t}),n},o.preparePoints=function(){return this.points.map(function(t){return t.balloonContentHeader=t.name,t.hintContent=t.name,new this.ymaps.Placemark([t.longitude,t.latitude],t,{balloonContentLayout:this.balloonLayout})}.bind(this))},o.initMap=function(){var t=new this.ymaps.Map(this.element,{center:[0,0],zoom:9,controls:[]},{autoFitToViewport:"always"});return t.controls.add("zoomControl",{position:{top:10,left:10}}),t.behaviors.disable("scrollZoom"),t},o.ballonContentLayout=function(){var i=this,s=this.ymaps.templateLayoutFactory.createClass('<div class="shipping-map__balloon"><b class="shipping-map__name">{{properties.name}}</b><br /><button class="js-shipping__map-button shipping-map__button">'+n.view.translate("shipping_select_outpost")+"</button></div>",{build:function(){s.superclass.build.call(this),this.selectOutpost=this.selectOutpost.bind(this),t(".js-shipping__map-button").bind("click",this.selectOutpost)},clear:function(){t(".js-shipping__map-button").unbind("click",this.selectOutpost),s.superclass.clear.call(this)},selectOutpost:function(){t(i.element).trigger(t.fn.shippingMap.events.pointSelect,this._data.properties._data),i.map.destroy()}});this.balloonLayout=s},t.fn.shippingMap=function(t){return this.each(function(){this.shippingMap?this.shippingMap.updateCluster(t):this.shippingMap=new e(this,t)})},t.fn.shippingMap.events={pointSelect:"shipping-select-point"}}(window.jQuery,window,document);
!function(t,e,s){"use strict";var i=e.Nethouse.Modal,n=function(e,s){this.options=t.extend({elms:{city:".js-shipping__city",pickup:".js-shipping__pickup",outpostSelect:".js-shipping__outpost-select",outposts:".js-outposts",outpostModal:".js-outpost__modal",outpostsTemplate:".js-outposts__template",outpostsItem:".js-outposts__item",outpostsMap:".js-outposts__map",rates:".js-shipping__rates",rate:".js-shipping__rate",rateElm:".js-shipping__rate-elm",shipment:".js-shipping__shipment"},activeRateCls:"shipping__rate_active",citiesUrl:"/shipping/city-autocomplete?name={query}",ratesUrl:"/shipping/rates"},s),this.$element=e,this.ratesIsGet=!1,this.init()},o=n.prototype;o.init=function(){this.$rates=this.$element.find(this.options.elms.rates),this.$city=this.$element.find(this.options.elms.city),this.$rates.length&&(this.$city.length?(this.initCity(),this.$element.on(n.events.updateRates,function(){this.city?this.getRatesHtml():this.$element.trigger(n.events.rateNotSelected)}.bind(this)),setTimeout(function(){this.$element.trigger(n.events.rateNotSelected)}.bind(this),100)):(this.getRatesHtml(),this.$element.on(n.events.updateRates,function(){this.getRatesHtml()}.bind(this))))},o.collectPoints=function(){var e=[],s=this;return t(this.options.elms.outpostsItem).each(function(){var i=t(this),n=s.outpostItemData(i);e.push(n)}),e},o.disableScroll=function(s){t("html").hasClass("touch")&&t(e).trigger("scroll:disable",s)},o.initCity=function(){var i=this.$city.find(".search");setTimeout(function(){this.$city.dropdown({apiSettings:{url:this.options.citiesUrl,cache:!1,beforeSend:function(t){return!!t.urlData.query.length},onResponse:function(t){return t.cities&&t.cities.length?(t.cities.forEach(function(t){t.value=t.city_id,t.name=t.full_name}),{success:!0,results:t.cities}):{success:!0,results:[{name:i.val(),value:0}]}}.bind(this)},message:{noResults:e.view.translate("shipping_city_not_found")},direction:t("html").hasClass("touch")?"upward":"auto",sortSelect:!0,allowReselection:!0,selectOnKeydown:!1,minCharacters:1,context:s.body,forceSelection:!1,saveRemoteData:!1,duration:0,onHide:function(){var e=t(this);i.val()&&(i.val(""),e.find(".text").removeClass("filtered").html(e.dropdown("get text")),e.dropdown("refresh"))},onChange:function(t,e){this.city={id:t,name:e},this.$city.removeClass("error"),this.$city.removeClass("focused"),i.blur(),this.getRatesHtml(),this.disableScroll(!1)}.bind(this)})}.bind(this)),this.$city.find(".js-dropdown__close").on("click",function(){this.$city.removeClass("focused"),i.blur(),this.disableScroll(!1)}.bind(this)),i.on("focus",function(){this.$city.removeClass("error"),this.$city.hasClass("focused")||(this.disableScroll(!0),this.$city.addClass("focused"))}.bind(this)),i.on("click",function(){return setTimeout(function(){this.$city.dropdown("show"),this.$city.dropdown("set visible",!0)}.bind(this),100),!1}.bind(this))},o.getRatesHtml=function(e){return e=e||{},this.city&&(e.address_to={carrier_address_id:this.city.id,global:{locality:this.city.name}}),e.promocode=t(".js-promocode-input").val(),t.ajax({type:"POST",url:this.options.ratesUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8"}).then(function(t){this.insertRatesHtml(t),this.rateChanged(),this.$element.trigger(n.events.rateSelected),this.ratesIsGet=!0}.bind(this))},o.rateChanged=function(){var t=this.options.elms,e=this.$element.find(t.rate+":checked"),s=this.$element.find(t.shipment);this.$element.find(t.rateElm).removeClass(this.options.activeRateCls),e.length&&(e.parents(t.rateElm).addClass(this.options.activeRateCls),this.$element.trigger(n.events.rateChanged,{id:e.val(),shipment:s.val(),pickupPoint:this.$pickup.val(),price:Number(e.data("price"))}),this.$element.trigger(n.events.rateSelected))},o.insertRatesHtml=function(t){this.$rates.html(t),this.initOutpost(),this.$rates.find(this.options.elms.rate).on("change",function(){this.rateChanged()}.bind(this))},o.initOutpost=function(){this.$pickup=this.$rates.find(this.options.elms.pickup),this.$outpostSelect=this.$rates.find(this.options.elms.outpostSelect),this.$outpostSelect.on("click",function(){this.showOutpostModal()}.bind(this))},o.outpostItemData=function(t){return t.data()},o.setOutpostData=function(t){var e=this.options.elms;this.$pickup.val(t.value),this.getRatesHtml({shipment_id:this.$element.find(e.shipment).val(),pickup_point_id:t.value})},o.selectOutpostAddress=function(){var e=this;t(this.options.elms.outpostsItem).on("click",function(){var s=t(this),n=e.outpostItemData(s);e.setOutpostData(n),i.close()})},o.showOutpostModal=function(){var e=this.$element.find(this.options.elms.outpostsTemplate).html();i.openHtml(e,{open:function(){this.selectOutpostAddress();var e,s=t(this.options.elms.outpostModal),o=this.collectPoints(),h=s.find(this.options.elms.outpostsMap);s.find(this.options.elms.outposts).collectionFilter({},o).on("collection-filtered",function(t,e){h.shippingMap(e.filtered)}),e=h.shippingMap(o),e.on(t.fn.shippingMap.events.pointSelect,function(t,e){this.setOutpostData(e),this.rateChanged(),i.close()}.bind(this)),this.$element.trigger(n.events.outpostsOpen)}.bind(this)},!1)},o.rateSelected=function(){if(!this.$rates.length)return!0;if(!this.ratesIsGet)return!1;var t=this.$element.find(this.options.elms.rate);return Boolean(!this.$city.length&&!t.length||t.filter(":checked").length)},o.citySelected=function(){return!this.$city.length||(this.$city.dropdown("get value")?(this.$city.removeClass("error"),!0):(this.$city.addClass("error"),!1))},n.events={rateNotSelected:"shipping-not-selected",rateSelected:"shipping-selected",rateChanged:"shipping-changed",updateRates:"shipping-update-rates",outpostsOpen:"shipping-open-outposts"},t.fn.shipping=function(){var t=arguments,e=Array.prototype.slice.call(t,1);return this.length?this.shippingItem?t.length?this.shippingItem[t[0]].apply(this.shippingItem,e):void 0:(this.shippingItem=new n(this),this):this},t.fn.shipping.events=t.extend({},n.events)}(window.jQuery,window,document);